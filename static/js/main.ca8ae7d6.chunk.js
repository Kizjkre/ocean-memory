(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{175:function(e,t,n){},176:function(e,t,n){"use strict";n.r(t);var c,a,s,r=n(0),l=n(1),i=n.n(l),o=n(28),d=n.n(o),b=n(19),u=n(7),j=function(){return Object(r.jsxs)("div",{className:"page-wrapper with-navbar",children:[Object(r.jsxs)("nav",{className:"navbar",children:[Object(r.jsx)("span",{className:"navbar-brand anchor",children:"Ocean Memory Sonification"}),Object(r.jsx)("ul",{className:"navbar-nav d-none d-md-flex",children:Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.b,{to:"/workstation",className:"nav-link",children:"Workstation"})})})]}),Object(r.jsx)("div",{className:"content-wrapper",children:"Homepage"})]})},m=n(2),f=n(9),h=n(14),O=n.n(h),g=n(55),x=n(8),p=n(15),v=n.n(p),N=n(4),w="UPLOAD_FILE",k="ADD_TRACK",y="SET_SETTINGS",C="SET_GLOBAL_SETTINGS",S="FOCUS_WINDOW",M="DELETE_TRACK",E="SET_DATA",L={files:[],tracks:[],globalSettings:{bpm:120,key:"C",timesig:[4,4],dark:["dark-mode","not-set"].includes(v.a.getPreferredMode()),channels:[]},windows:[]},F={mute:!1,volume:100,pan:0,continuous:!1,channel:[]},T={continuous:!1,tracks:[]},A=function(e,t){return{type:y,payload:{id:e,settings:t}}},B=function(e){return{type:C,payload:e}},D=function(e){return{type:S,payload:e}},R=Object(N.b)(null,(function(e){return{uploadFile:function(t,n){return e(function(e,t){return{type:w,payload:{name:e,csv:t}}}(t,n))},setGlobalSettings:function(t){return e(B(t))}}}))((function(e){var t,n,c=e.uploadFile,a=e.setGlobalSettings,s=Object(l.createRef)(),i=Object(l.createRef)(),o=Object(l.createRef)(),d=Object(l.useState)({sidebar:!0,dark:"dark-mode"===v.a.getPreferredMode()}),u=Object(f.a)(d,2),j=u[0],h=u[1];return Object(r.jsxs)("nav",{className:"navbar",children:[Object(r.jsx)("span",{className:"navbar-brand anchor",children:"Workstation"}),Object(r.jsxs)("ul",{className:"navbar-nav",children:[Object(r.jsxs)("li",{className:"nav-item dropdown",children:[Object(r.jsx)("span",{className:"nav-link anchor","data-toggle":"dropdown",id:"nav-dropdown-file",ref:s,children:"File"}),Object(r.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"nav-dropdown-file",children:[Object(r.jsxs)("label",{htmlFor:"upload",className:"dropdown-item",children:[Object(r.jsx)("input",{type:"file",id:"upload",className:"d-none",accept:"text/csv",onChange:(t=c,n=s,function(){var e=Object(g.a)(O.a.mark((function e(c){var a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.target.files.length){e.next=8;break}return a=URL.createObjectURL(c.target.files[0]),e.next=4,x.c(a);case 4:s=e.sent,t(c.target.files[0].name,s),c.target.value="",n.current.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),Object(r.jsx)("i",{className:"fa fa-folder-open"}),"\u2003Open"]}),Object(r.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){return s.current.click()},children:[Object(r.jsx)("i",{className:"fa fa-file-export"}),"\u2003Export"]})]})]}),Object(r.jsxs)("li",{className:"nav-item dropdown",children:[Object(r.jsx)("span",{className:"nav-link anchor","data-toggle":"dropdown",id:"nav-dropdown-file",ref:i,children:"Edit"}),Object(r.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"nav-dropdown-file",children:[Object(r.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){return i.current.click()},children:[Object(r.jsx)("i",{className:"fa fa-trash"}),"\u2003Delete Track"]}),Object(r.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){return i.current.click()},children:[Object(r.jsx)("i",{className:"fa fa-trash"}),"\u2003Remove File"]})]})]}),Object(r.jsxs)("li",{className:"nav-item dropdown",children:[Object(r.jsx)("span",{className:"nav-link anchor","data-toggle":"dropdown",id:"nav-dropdown-file",ref:o,children:"View"}),Object(r.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"nav-dropdown-file",children:[Object(r.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){o.current.click(),v.a.toggleSidebar(),h(Object(m.a)(Object(m.a)({},j),{},{sidebar:!j.sidebar}))},children:[Object(r.jsx)("i",{className:"fa fa-toggle-".concat(j.sidebar?"off":"on")}),"\u2003",j.sidebar?"Close":"Open"," file browser"]}),Object(r.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){o.current.click(),v.a.toggleDarkMode(),a({dark:!j.dark}),h(Object(m.a)(Object(m.a)({},j),{},{dark:!j.dark}))},children:[Object(r.jsx)("i",{className:"fa fa-".concat(j.dark?"sun":"moon")}),"\u2003Toggle ",j.dark?"light":"dark"," mode"]})]})]})]}),Object(r.jsx)("div",{className:"navbar-content ml-auto",children:Object(r.jsxs)(b.b,{to:"/",className:"btn btn-danger",children:[Object(r.jsx)("i",{className:"fa fa-sign-out-alt"}),"\u2003Exit Workstation"]})})]})})),q=Object(N.b)((function(e){return{files:e.files}}),(function(e){return{focusWindow:function(t){return e(D(t))}}}))((function(e){var t=e.files,n=e.focusWindow,c=Object(l.useState)({content:null}),a=Object(f.a)(c,2),s=a[0],i=a[1];return Object(l.useEffect)((function(){t.length&&i(Object(m.a)(Object(m.a)({},s),{},{content:t.map((function(e){return Object(r.jsxs)("span",{"data-toggle":"modal","data-target":"modal-".concat(e.name),onClick:(t="#modal-".concat(e.name),function(){return n(t)}),className:"sidebar-link sidebar-link-with-icon anchor",children:[Object(r.jsx)("span",{className:"sidebar-icon",children:Object(r.jsx)("i",{className:"fa fa-file-csv"})}),e.name]},"anchor-".concat(e.name));var t}))}))}),[t]),Object(r.jsx)("div",{className:"sidebar",children:Object(r.jsxs)("div",{className:"sidebar-menu",children:[Object(r.jsxs)("h5",{className:"sidebar-title",children:[Object(r.jsx)("i",{className:"fa fa-folder"}),"\u2003Files"]}),Object(r.jsx)("hr",{className:"sidebar-divider"}),s.content]})})})),G=n(5),I=["Volume","Tempo","Pitch","Pan"],W={C:"C Major",c:"C Minor","C#":"C# Major","c#":"C# Minor",D:"D Major",d:"D Minor",Eb:"E&#9837; Major",eb:"E&#9837; Minor",E:"E Major",e:"E Minor",F:"F Major",f:"F Minor","F#":"F# Major","f#":"F# Minor",G:"G Major",g:"G Minor",Ab:"A&#9837; Major",ab:"A&#9837; Minor",A:"A Major",a:"A Minor",Bb:"B&#9837; Major",bb:"B&#9837; Minor",B:"B Major",b:"B Minor",chromatic:"Chromatic",whole:"Whole Tone",penta:"Pentatonic",harmonic:"Harmonic Minor",none:"None"},P={a:0,"a#":1,bb:1,b:2,cb:2,"b#":3,c:3,"c#":4,db:4,d:5,"d#":6,eb:6,e:7,fb:7,"e#":8,f:8,"f#":9,gb:9,g:10,"g#":11,ab:11},_={C:["c","d","e","f","g","a","b"],c:["c","d","eb","f","g","ab","bb"],"C#":["c#","d#","e#","f#","g#","a#","b#"],"c#":["c#","d#","e","f#","g#","a","b"],D:["d","e","f#","g","a","b","c#"],d:["d","e","f","g","a","bb","c"],Eb:["eb","f","g","ab","bb","c","d"],eb:["eb","f","gb","ab","bb","cb","db"],E:["e","f#","g#","a","b","c#","d#"],e:["e","f#","g","a","b","c","d"],F:["f","g","a","bb","c","d","e"],f:["f","g","ab","bb","c","db","eb"],"F#":["f#","g#","a#","b","c#","d#","e"],"f#":["f#","g#","a","b","c#","d","e"],G:["g","a","b","c","d","e","f#"],g:["g","a","bb","c","d","eb","f"],Ab:["ab","bb","c","db","eb","f","g"],ab:["ab","bb","cb","db","eb","fb","gb"],A:["a","b","c#","d","e","f#","g#"],a:["a","b","c","d","e","f","g"],Bb:["bb","c","d","eb","f","g","a"],bb:["bb","c","db","eb","f","gb","ab"],B:["b","c#","d#","e","f#","g#","a#"],b:["b","c#","d","e","f#","g","a"],chromatic:["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],whole:["c","d","e","f#","g#","a#"],penta:["c","d","e","g","a"],harmonic:["a","b","c","d","e","f","g#"],none:[]},z=Object(N.b)((function(e){return{tracks:e.tracks}}),(function(e){return{setSettings:function(t,n){return e(A(t,n))},deleteTrack:function(t){return e(function(e){return{type:M,payload:e}}(t))},focusWindow:function(t){return e(D(t))}}}))((function(e){var t=e.column,n=e.i,c=e.tracks,a=e.setSettings,s=e.deleteTrack,l=e.focusWindow;return Object(r.jsxs)("details",{className:"collapse-panel",children:[Object(r.jsxs)("summary",{className:"collapse-header",children:[Object(r.jsx)("i",{className:"fa fa-cog"}),"\u2003Settings"]}),Object(r.jsxs)("div",{className:"collapse-content",children:[c[n].settings.channel.length>0?null:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h6",{className:"font-weight-semi-bold",children:"Volume"}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-3",children:Object(r.jsxs)("div",{className:"custom-switch",children:[Object(r.jsx)("input",{type:"checkbox",id:"".concat(t,"-row-").concat(n,"-mute"),checked:!c[n].settings.mute,onChange:function(){return a(n,{mute:!c[n].settings.mute})}}),Object(r.jsx)("label",{htmlFor:"".concat(t,"-row-").concat(n,"-mute"),children:" "})]})}),Object(r.jsx)("div",{className:"col-9",children:Object(r.jsx)("div",{className:"h-full d-flex align-content-start",children:Object(r.jsx)("input",{disabled:c[n].settings.mute,className:c[n].settings.mute?"disabled":"",type:"range",min:"0",max:"100",defaultValue:"100",onMouseUp:function(e){return a(n,{volume:e.target.value})}})})})]}),Object(r.jsx)("br",{}),Object(r.jsx)("hr",{}),Object(r.jsx)("h6",{className:"font-weight-semi-bold",children:"Pan"}),Object(r.jsx)("div",{className:"h-full d-flex align-content-start",children:Object(r.jsx)("input",{type:"range",min:"-50",max:"50",value:c[n].settings.pan,onChange:function(e){return a(n,{pan:Math.abs(e.target.value)<5?0:parseInt(e.target.value)})}})}),Object(r.jsx)("br",{}),Object(r.jsx)("hr",{})]}),Object(r.jsx)("button",{onClick:function(){return l("#sonification-".concat(c[n].name,"-").concat(n))},"data-toggle":"modal","data-target":"sonification-".concat(c[n].name.replace(/\s/g,"-"),"-").concat(n),className:"btn btn-block btn-primary",children:"Sonification Settings (Advanced)"}),Object(r.jsx)("br",{}),Object(r.jsx)("hr",{}),Object(r.jsxs)("button",{onClick:function(){return s(n)},className:"btn btn-block btn-danger",children:[Object(r.jsx)("i",{className:"fa fa-trash"}),"\u2003Delete Track"]})]})]})})),U=-1,V=Object(N.b)((function(e){return{dark:e.globalSettings.dark,tracks:e.tracks}}))((function(e){var t=e.dark,n=e.tracks,c=e.id,a=Object(l.createRef)(),s=Object(l.createRef)(),i=Object(l.createRef)(),o=Object(l.useState)({graph:""}),d=Object(f.a)(o,2),b=d[0],u=d[1],j=n.find((function(e){return e.id===c})).data.map((function(e,t){return[t,e]}));return Object(l.useEffect)((function(){var e=getComputedStyle(a.current).width;U<0&&(U=getComputedStyle(a.current).height);var t=x.g().domain(x.d(j,(function(e){return e[0]}))).range([30,parseFloat(e.slice(0,e.length-2))]),n=x.g().domain(x.d(j,(function(e){return e[1]}))).range([parseFloat(U.slice(0,U.length-2))-20,0]);if(j.every((function(e){return!isNaN(e[1])}))){var c=x.e().x((function(e){return t(e[0])})).y((function(e){return n(e[1])}));u(Object(m.a)(Object(m.a)({},b),{},{graph:c(j)}));var r=[x.a().scale(t).ticks(0),x.b().scale(n)];x.h(s.current).call(r[0]),x.h(i.current).call(r[1])}s.current.style.transform="translateY(calc(".concat(U," - 20px))"),i.current.style.transform="translateX(30px)"}),[n]),Object(r.jsx)("svg",{className:"track-graph",ref:a,children:Object(r.jsxs)("g",{className:"graph-content",children:[Object(r.jsx)("g",{className:"x",ref:s}),Object(r.jsx)("g",{className:"y",ref:i}),Object(r.jsx)("g",{className:"line",children:Object(r.jsx)("path",{d:b.graph,fill:"none",stroke:t?"white":"black"})})]})})})),X=function(e){var t=e.i,n=e.column,c=e.name;return Object(r.jsxs)("div",{className:"row row-eq-spacing",children:[Object(r.jsx)("div",{className:"col-".concat(4),children:Object(r.jsxs)("div",{className:"card track",children:[Object(r.jsxs)("h2",{className:"card-title",children:["Track ",t+1," - ",n]}),Object(r.jsx)("p",{className:"text-muted",children:c}),Object(r.jsx)(z,{column:n,i:t})]})}),Object(r.jsx)("div",{className:"col-".concat(8),children:Object(r.jsx)("div",{className:"card track overflow-scroll d-flex align-content-center",children:Object(r.jsx)(V,{id:t})})})]})},Y=Object(N.b)((function(e){return{files:e.files,tracks:e.tracks}}))((function(e){var t=e.files,n=e.tracks,c=[];return n.forEach((function(e){var n,a=e.file,s=e.name,r=Object(G.a)(t);try{for(r.s();!(n=r.n()).done;){var l=n.value;if(l.name===a){c.push({file:l,column:s});break}}}catch(i){r.e(i)}finally{r.f()}})),Object(r.jsx)("div",{className:"content-wrapper",children:Object(r.jsx)("div",{className:"container-fluid ".concat(n.length?"":"h-full"),children:c.length?c.map((function(e,t){var n=e.file,c=e.column;return Object(r.jsx)(X,{i:t,column:c,name:n.name},"".concat(c,"-row-").concat(t))})):Object(r.jsx)("div",{className:"d-flex justify-content-center align-items-center h-full",children:Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("i",{className:"fa fa-music icon-lg"}),Object(r.jsxs)("p",{className:"font-size-20",children:["Nothing to see here..., open a ",Object(r.jsx)("kbd",{children:".csv"})," file to get started!"]})]})})})})})),H=Object(N.b)((function(e){return{windows:e.windows}}),(function(e){return{focusWindow:function(t){return e(D(t))}}}))((function(e){var t=e.anchor,n=e.buttons,a=e.children,s=e.title,i=e.windows,o=e.focusWindow,d=e.onClose;n||(n=[]),d||(d=function(){return null});var b=Object(l.createRef)(),u=Object(l.createRef)(),j=new MutationObserver((function(e){e[0].target.classList.contains("show")?x(Object(m.a)(Object(m.a)({},g),{},{x:c.x,y:c.y})):d()})),h=Object(l.useState)({x:null,y:null,offsetX:null,offsetY:null,click:!1,zIndex:-1e3}),O=Object(f.a)(h,2),g=O[0],x=O[1];Object(l.useEffect)((function(){c={x:u.current.offsetLeft,y:u.current.offsetTop},x(Object(m.a)(Object(m.a)({},g),{},{x:u.current.offsetLeft})),j.observe(b.current,{attributes:!0,attributeFilter:["class"],childList:!1,characterData:!1}),b.current.style.height="".concat(u.current.getBoundingClientRect().height,"px"),b.current.style.width="".concat(u.current.getBoundingClientRect().width,"px"),o("#".concat(t))}),[]),Object(l.useEffect)((function(){x(Object(m.a)(Object(m.a)({},g),{},{zIndex:b.current.classList.contains("show")?100+i.length-i.indexOf("#".concat(t)):-1e3}))}),[i]);var p=function(){return x(Object(m.a)(Object(m.a)({},g),{},{x:c.x,y:null}))};return Object(r.jsx)("div",{className:"modal window",id:t,tabIndex:"-1",role:"dialog",style:{top:g.y,left:g.x,zIndex:g.zIndex},ref:b,"data-overlay-dismissal-disabled":"true","data-esc-dismissal-disabled":"true",children:Object(r.jsx)("div",{className:"modal-dialog",role:"document",children:Object(r.jsxs)("div",{className:"modal-content",ref:u,children:[Object(r.jsxs)("h5",{className:"modal-title window-title",onMouseDown:function(e){o("#".concat(t)),x(Object(m.a)(Object(m.a)({},g),{},{offsetX:e.clientX-g.x,offsetY:e.clientY-g.y,click:!0}))},onMouseMove:function(e){g.click&&x(Object(m.a)(Object(m.a)({},g),{},{x:e.clientX-g.offsetX,y:e.clientY-g.offsetY}))},onMouseUp:function(){return x(Object(m.a)(Object(m.a)({},g),{},{click:!1}))},children:[Object(r.jsx)("button",{className:"btn btn-square rounded-circle custom-modal-dismiss red",onClick:p,"data-dismiss":"modal",children:"\xa0"}),"\xa0\xa0",n.map((function(e,n){var c=e.close,a=e.color,s=e.onClick,l=e.disabled;return Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{className:"btn btn-square rounded-circle custom-modal-dismiss ".concat(a),onClick:function(){s(),c&&p()},"data-dismiss":c?"modal":null,disabled:l,children:"\xa0"}),"\xa0\xa0"]},"btn-".concat(t,"-").concat(n))})),Object(r.jsx)("br",{}),s]}),Object(r.jsx)("div",{children:a})]})})})})),K=Object(N.b)((function(e){return{files:e.files}}),(function(e){return{addTrack:function(t,n,c){return e(function(e,t,n){return{type:k,payload:{name:e,file:t,data:n}}}(t,n,c))}}}))((function(e){var t,n,c,a=e.anchor,s=e.track,i=e.files,o=e.addTrack,d=Object(l.useState)({column:""}),b=Object(f.a)(d,2),u=b[0],j=b[1],h=Object(G.a)(i);try{for(h.s();!(c=h.n()).done;){var O=c.value;if(O.name===s){t=O.name,n=O.csv.columns;break}}}catch(g){h.e(g)}finally{h.f()}return Object(r.jsx)(H,{anchor:a,buttons:[{close:!0,color:""===u.column?"":"green",onClick:function(){""!==u.column&&(o(u.column,t,i.find((function(e){return e.name===s})).csv.map((function(e){return isNaN(e[u.column])?e[u.column]:parseFloat(e[u.column])}))),j(Object(m.a)(Object(m.a)({},u),{},{column:""})))},disabled:""===u.column}],title:"Add Track",children:Object(r.jsxs)("select",{className:"form-control form-control-lg",value:u.column,onChange:function(e){return j(Object(m.a)(Object(m.a)({},u),{},{column:e.target.value}))},children:[Object(r.jsx)("option",{value:"",disabled:!0,children:"Select a column"}),n.map((function(e){return Object(r.jsx)("option",{value:e,children:e},"column-".concat(e))}))]})})})),J=n(6),$=function(e){var t=e.title,n=e.children;return Object(r.jsx)(H,{anchor:"help-window",title:"Info: ".concat(t),children:n||Object(r.jsx)("div",{className:"p-20 m-20"})})},Q=function(e){return Array.from(e.children).forEach((function(e){e.classList.contains("active")&&e.classList.remove("active")}))},Z=Object(N.b)((function(e){return{tracks:e.tracks}}))((function(e){var t=e.anchor,n=e.title,c=e.i,a=e.tracks,s=Object(l.useState)({channel:-1,features:[]}),i=Object(f.a)(s,2),o=i[0],d=i[1],b=Object(l.createRef)();Object(l.useEffect)((function(){-1===o.channel&&Q(b.current)}),[o.channel]),Object(l.useEffect)((function(){a[c].settings.channel.length<=o.channel&&d(Object(m.a)(Object(m.a)({},o),{},{channel:-1}))}),[a[c].settings.channel]);var u=function(e){return function(t){Q(t.target.parentElement.parentElement),t.target.parentElement.classList.add("active"),d(Object(m.a)(Object(m.a)({},o),{},{channel:e}))}};return Object(r.jsxs)(H,{anchor:t,title:"".concat(n,": Channel Settings"),onClose:function(){return d(Object(m.a)(Object(m.a)({},o),{},{channel:-1}))},children:[Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{className:"pagination text-center",ref:b,children:[Object(r.jsx)("li",{className:"page-item",children:Object(r.jsxs)("button",{className:"page-link",children:[Object(r.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true"}),Object(r.jsx)("span",{className:"sr-only",children:"Previous"})]})}),a[c].settings.channel.map((function(e){return Object(r.jsx)("li",{className:"page-item",children:Object(r.jsx)("button",{className:"page-link",onClick:u(e),children:e})},"pagination-".concat(e))})),Object(r.jsx)("li",{className:"page-item",children:Object(r.jsxs)("button",{className:"page-link",children:[Object(r.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"}),Object(r.jsx)("span",{className:"sr-only",children:"Next"})]})})]})}),Object(r.jsxs)("div",{className:-1===o.channel?"transparent":"",children:[Object(r.jsxs)("h5",{className:"font-weight-bold",children:["Channel ",o.channel," Controlled Features"]}),Object(r.jsx)("button",{className:"btn btn-primary",onClick:function(){return d(Object(m.a)(Object(m.a)({},o),{},{features:[].concat(Object(J.a)(o.features),[Object(r.jsxs)("select",{className:"form-control",value:"none",children:[Object(r.jsx)("option",{value:"none",disabled:!0,children:"None"}),I.map((function(e){return Object(r.jsx)("option",{value:e,children:e},e)}))]},"select-".concat(o.features.length))])}))},children:"+\u2003Add Controlled Feature"}),Object(r.jsx)("br",{}),Object(r.jsx)("hr",{}),o.features]})]})})),ee=Object(r.jsx)("p",{children:"Channels group tracks into one output, allowing for tracks to affect different aspects of the sonification."}),te=Object(r.jsx)("p",{children:"Select a subset of the data to sonify."}),ne=function(e,t){t?(e.style.background="var(--dm-table-primary-bg-color)",e.style.color="var(--dm-table-primary-text-color)",e.style.rowBorder="var(--dm-table-primary-row-border-color)",e.style.cellBorder="var(--dm-table-primary-cell-border-color)"):(e.style.background="var(--lm-table-primary-bg-color)",e.style.color="var(--lm-table-primary-text-color)",e.style.rowBorder="var(--lm-table-primary-row-border-color)",e.style.cellBorder="var(--lm-table-primary-cell-border-color)")},ce=Object(N.b)((function(e){return{tracks:e.tracks,globalSettings:e.globalSettings,files:e.files}}),(function(e){return{setSettings:function(t,n){return e(A(t,n))},setGlobalSettings:function(t){return e(B(t))},focusWindow:function(t){return e(D(t))},setData:function(t,n){return e(function(e,t){return{type:E,payload:{id:e,data:t}}}(t,n))}}}))((function(e){var t=e.anchor,n=e.trackno,c=e.tracks,a=e.setSettings,s=e.globalSettings,i=e.setGlobalSettings,o=e.focusWindow,d=e.setData,b=e.files,u=Object(l.useState)({title:"",children:null,segment:""}),j=Object(f.a)(u,2),h=j[0],O=j[1];Object(l.useEffect)((function(){Array.from(document.getElementsByClassName("datum-selected")).forEach((function(e){return ne(e,s.dark)}))}),[s.dark]);var g=function(e){return function(t){if(t.target.classList.contains("btn-primary")){t.target.classList.remove("btn-primary");var r=Object(J.a)(c[n].settings.channel);r.splice(c[n].settings.channel.indexOf(e),1),a(n,{channel:r});var l=Object(J.a)(s.channels);l[e].tracks.splice(l[e].tracks.indexOf(n),1),i({channels:l})}else{t.target.classList.add("btn-primary"),a(n,{channel:[].concat(Object(J.a)(c[n].settings.channel),[e]).sort((function(e,t){return e-t}))});var o=Object(J.a)(s.channels);o[e].tracks=[].concat(Object(J.a)(o[e].tracks),[n]),i({channels:o})}}},p=function(e,t){return function(a){var r=c[n].data;a.target.classList.contains("datum-selected")?(a.target.classList.remove("datum-selected"),a.target.style.background=null,a.target.style.color=null,a.target.style.rowBorder=null,a.target.style.cellBorder=null,r.splice(t,1),d(n,r)):(a.target.classList.add("datum-selected"),ne(a.target,s.dark),r.splice(t,0,e),d(n,r))}},v=function(e,t){return function(){O(Object(m.a)(Object(m.a)({},h),{},{title:e,children:t})),o("#help-window")}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(H,{anchor:t,title:"".concat(c[n].name,": Sonification Settings"),children:[Object(r.jsxs)("h5",{className:"font-weight-bold d-flex align-items-baseline",children:["Connect to Channel\u2003",Object(r.jsx)("i",{className:"fa fa-question-circle anchor","data-toggle":"modal","data-target":"help-window",onClick:v("Connect to Channel",ee)})]}),Object(r.jsxs)("div",{className:"w-full",children:[Object(r.jsx)("button",{className:"btn btn-square btn-primary m-5",onClick:function(){return i({channels:[].concat(Object(J.a)(s.channels),[Object(m.a)(Object(m.a)({},T),{},{id:s.channels.length})])})},children:"+"}),Object(J.a)(s.channels).map((function(e,t){return Object(r.jsx)("button",{className:"btn btn-square m-5",onClick:g(t),children:t},"channel-".concat(t))}))]}),0===c[n].settings.channel.length?null:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:"w-full",children:Object(r.jsx)("button",{className:"btn btn-primary ml-5","data-toggle":"modal","data-target":"channel-".concat(c[n].name,"-").concat(n),onClick:function(){return o("#channel-".concat(c[n].name,"-").concat(n))},children:"Channel Settings"})})]}),Object(r.jsx)("br",{}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{className:"font-weight-bold d-flex align-items-baseline",children:"Data Processing"}),Object(r.jsxs)("h6",{className:"font-weight-semi-bold d-flex align-items-baseline",children:["Data Points\u2003",Object(r.jsx)("i",{className:"fa fa-question-circle anchor","data-toggle":"modal","data-target":"help-window",onClick:v("Data Points",te)})]}),Object(r.jsx)("div",{className:"w-full overflow-scroll",children:Object(r.jsx)("table",{className:"table",children:Object(r.jsx)("tbody",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:c[n].name}),c[n].data.map((function(e,t){return Object(r.jsx)("td",{className:"anchor sonification-data-point is-primary",onClick:p(e,t),children:e},"data-".concat(t))}))]})})})}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-6",children:Object(r.jsx)("button",{className:"btn btn-primary",onClick:function(){return d(n,function(e){var t=x.f(e,.25),n=x.f(e,.75),c=[];return e.forEach((function(e){e<1.5*t||e>1.5*n||c.push(e)})),c}(c[n].data))},children:"Remove Outliers"})}),Object(r.jsx)("div",{className:"col-6",children:Object(r.jsx)("input",{className:"form-control",placeholder:"Segmentation Size",type:"number",min:"1",value:h.segment,onChange:function(e){d(n,function(e,t){for(var n=[],c=0;c<e.length-t;c+=t){for(var a=[],s=0;s<t;s++)a.push(e[c+s]);n.push(a)}return n}(c[n].data,e.target.value)),O(Object(m.a)(Object(m.a)({},h),{},{segment:e.target.value}))}})})]}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{className:"btn btn-primary",onClick:function(){d(n,b.find((function(e){return e.name===c[n].file})).csv.map((function(e){return isNaN(e[c[n].name])?e[c[n].name]:parseFloat(e[c[n].name])}))),O(Object(m.a)(Object(m.a)({},h),{},{segment:""}))},children:"Restore Data"}),Object(r.jsx)("br",{}),c[n].settings.channel.length>0?null:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsx)("hr",{}),Object(r.jsxs)("h5",{className:"font-weight-bold d-flex align-items-baseline",children:[c[n].settings.continuous?"Continuous":"Discrete","\u2003",Object(r.jsx)("i",{className:"fa fa-question-circle anchor","data-toggle":"modal","data-target":"help-window"})]}),Object(r.jsx)("div",{className:"d-flex w-full justify-items-center align-items-center",children:Object(r.jsxs)("div",{className:"custom-switch",children:[Object(r.jsx)("input",{type:"checkbox",id:"continuous-".concat(t),value:c[n].settings.continuous,onChange:function(e){return a(n,{continuous:e.target.checked})}}),Object(r.jsx)("label",{htmlFor:"continuous-".concat(t)})]})})]})]}),Object(r.jsx)($,{title:h.title,children:h.children}),Object(r.jsx)(Z,{anchor:"channel-".concat(c[n].name.replace(/\s/g,"-"),"-").concat(n),title:c[n].name,i:n})]})})),ae=function(e,t){return 440*Math.pow(2,t-(P[e]>2?5:4))*Math.pow(2,P[e]/12)},se=Object(N.b)((function(e){return{globalSettings:e.globalSettings,tracks:e.tracks}}),(function(e){return{setGlobalSettings:function(t){return e(B(t))}}}))((function(e){var t=e.globalSettings,n=e.setGlobalSettings,c=e.tracks,s=0!==c.length,l=function(e){return function(c){return n({timesig:e?[c.target.value,t.timesig[1]]:Number.isInteger(Math.log(c.target.value)/Math.log(2))?[t.timesig[0],c.target.value]:Object(J.a)(t.timesig)})}};return Object(r.jsx)("nav",{className:"navbar navbar-fixed-bottom controls",children:Object(r.jsx)("div",{className:"navbar-content w-full",children:Object(r.jsxs)("div",{className:"row w-full",children:[Object(r.jsx)("div",{className:"col-4",children:Object(r.jsxs)("div",{className:"row h-full",children:[Object(r.jsx)("div",{className:"col-6 d-flex justify-content-center",children:Object(r.jsx)("div",{className:"h-full w-full d-flex justify-content-center",children:Object(r.jsxs)("div",{className:"dropdown dropup with-arrow align-self-center",children:[Object(r.jsxs)("button",{className:"btn btn-lg","data-toggle":"dropdown",type:"button",id:"bpm-dropup",children:[Object(r.jsx)("i",{className:"fa fa-drum"}),"\u2003BPM: ",Object(r.jsx)("span",{className:"text-monospace",children:t.bpm<0?"N/A":t.bpm})]}),Object(r.jsx)("div",{className:"dropdown-menu","aria-labelledby":"bpm-dropup",children:Object(r.jsx)("div",{className:"container mt-15",children:Object(r.jsxs)("div",{className:"form-group w-full",children:[Object(r.jsx)("label",{htmlFor:"bpm",children:"Set BPM"}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"custom-switch align-self-center",children:[Object(r.jsx)("input",{type:"checkbox",id:"bpm-toggle",checked:t.bpm>0,onChange:function(){return n({bpm:t.bpm>0?-1:120})}}),Object(r.jsx)("label",{htmlFor:"bpm-toggle"})]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:t.bpm<0?"text":"number",className:"form-control",id:"bpm",min:"30",max:"240",value:t.bpm<0?"N/A":t.bpm,disabled:t.bpm<0,placeholder:"BPM",onChange:function(e){return n({bpm:0===e.target.value.length?30:parseInt(e.target.value)})}})]})})})]})})}),Object(r.jsx)("div",{className:"col-6 d-flex justify-content-center",children:Object(r.jsx)("div",{className:"h-full w-full d-flex justify-content-center",children:Object(r.jsxs)("div",{className:"dropdown dropup with-arrow align-self-center",children:[Object(r.jsxs)("button",{className:"btn btn-lg","data-toggle":"dropdown",type:"button",id:"key-dropup",children:[Object(r.jsx)("i",{className:"fa fa-hashtag"}),"\u2003Key: ",Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:W[t.key]}})]}),Object(r.jsx)("div",{className:"dropdown-menu","aria-labelledby":"key-dropup",children:Object(r.jsx)("div",{className:"container mt-15",children:Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"key",children:"Set Key"}),Object(r.jsx)("select",{className:"form-control",id:"key",onChange:function(e){return n({key:e.target.value})},children:Object.keys(W).map((function(e){return Object(r.jsx)("option",{value:e,dangerouslySetInnerHTML:{__html:W[e]}},e)}))})]})})})]})})})]})}),Object(r.jsx)("div",{className:"col-4",children:Object(r.jsx)("div",{className:"w-full d-flex justify-content-center",children:Object(r.jsx)("button",{className:"btn btn-square rounded-circle btn-success play font-size-24",type:"button",disabled:!s,onClick:function(e){if(e.target.classList.contains("btn-danger"))e.target.classList.add("btn-success"),e.target.classList.remove("btn-danger"),a.close(),a=void 0;else if(e.target.classList.contains("btn-secondary"))e.target.classList.add("btn-danger"),e.target.classList.remove("btn-secondary"),a.suspend();else{e.target.classList.add("btn-danger"),e.target.classList.remove("btn-success");var n=[];c.forEach((function(e){0===e.settings.channel.length&&n.push(e)})),function(e,t){if(a)a.resume();else{a=new AudioContext;var n=t.bpm<0?60:t.bpm,c="none"===t.key?"chromatic":t.key;e.forEach((function(t){if(0===t.settings.channel.length){var s=new OscillatorNode(a,{type:"sine"}),r=new GainNode(a);s.connect(r).connect(a.destination),r.gain.value=t.settings.mute?0:t.settings.volume/100/e.length;var l=Math.max.apply(Math,Object(J.a)(t.data)),i=Math.min.apply(Math,Object(J.a)(t.data)),o=2*_[c].length,d=function(e){return Math.round(o/(l-i)*(e-i))};t.settings.continuous?t.data.forEach((function(e,t){var r=d(e);s.frequency.linearRampToValueAtTime(ae(_[c][r%_[c].length],4+Math.floor(r/_[c].length)),a.currentTime+60*t/n)})):t.data.forEach((function(e,t){var r=d(e);s.frequency.setValueAtTime(ae(_[c][r%_[c].length],4+Math.floor(r/_[c].length)),a.currentTime+60*t/n)})),s.start(),s.stop(a.currentTime+60*t.data.length/n)}})),t.channels.forEach((function(e){console.log(e)}))}}(n,t)}}})})}),Object(r.jsx)("div",{className:"col-4",children:Object(r.jsx)("div",{className:"row h-full",children:Object(r.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(r.jsx)("div",{className:"h-full w-full d-flex justify-content-center",children:Object(r.jsxs)("div",{className:"dropdown dropup with-arrow align-self-center",children:[Object(r.jsxs)("button",{className:"btn btn-lg d-flex align-items-center","data-toggle":"dropdown",type:"button",id:"timesig-dropup",children:[Object(r.jsx)("i",{className:"fa fa-stopwatch"}),"\u2003Time Signature:\xa0",Object(r.jsxs)("span",{className:"supsub",children:[Object(r.jsx)("sup",{children:t.timesig[0]<=0?"N/A":t.timesig[0]}),Object(r.jsx)("sub",{children:t.timesig[1]<=0?"N/A":t.timesig[1]})]})]}),Object(r.jsx)("div",{className:"dropdown-menu","aria-labelledby":"timesig-dropup",children:Object(r.jsx)("div",{className:"container mt-15",children:Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"timesig",children:"Set Time Signature"}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"custom-switch align-self-center",children:[Object(r.jsx)("input",{type:"checkbox",id:"timesig-toggle",checked:t.timesig[0]>0,onChange:function(){return n({timesig:t.timesig[0]>0?[-1,-1]:[4,4]})}}),Object(r.jsx)("label",{htmlFor:"timesig-toggle",children:" "})]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"number",className:"form-control",id:"timesig",min:"1",max:"20",placeholder:t.timesig[0]<=0?"N/A":t.timesig[0],onChange:l(!0)}),Object(r.jsx)("input",{type:"number",className:"form-control",id:"timesig-bottom",min:"1",max:"32",placeholder:t.timesig[1]<=0?"N/A":t.timesig[1],onChange:l(!1)})]})})})]})})})})})]})})})})),re=Object(N.b)((function(e){return s=e.globalSettings.dark,{files:e.files,tracks:e.tracks}}),(function(e){return{setGlobalSettings:function(t){return e(B(t))}}}))((function(e){var t=e.files,n=e.tracks,c=e.setGlobalSettings,a=function(e){2===e.length&&"shift"===e[0]&&"d"===e[1]&&c({dark:s=!s})};return Object(l.useEffect)((function(){var e=[];document.addEventListener("keydown",(function(t){document.querySelector("input:focus")||document.querySelector("textarea:focus")||document.querySelector("select:focus")||(e.push(t.key.toLowerCase()),a(e))})),document.addEventListener("keyup",(function(t){document.querySelector("input:focus")||document.querySelector("textarea:focus")||document.querySelector("select:focus")||(e.splice(e.indexOf(t.key.toLowerCase()),1),a(e))}))}),[]),Object(r.jsxs)("div",{className:"page-wrapper with-navbar with-sidebar with-navbar-fixed-bottom",children:[Object(r.jsx)("div",{className:"sticky-alerts"}),t.map((function(e){var t=e.name;return Object(r.jsx)(K,{anchor:"modal-".concat(t),track:t},"modal-".concat(t))})),n.map((function(e,t){e.file;var n=e.name;return Object(r.jsx)(ce,{anchor:"sonification-".concat(n.replace(/\s/g,"-"),"-").concat(t),trackno:t},"sonification-".concat(n,"-").concat(t))})),Object(r.jsx)(R,{}),Object(r.jsx)(q,{}),Object(r.jsx)(Y,{}),Object(r.jsx)(se,{})]})})),le=function(){return Object(r.jsx)(b.a,{children:Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{exact:!0,path:"/",component:j}),Object(r.jsx)(u.a,{path:"/workstation",component:re})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=n(56),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object.assign({},e,{files:[].concat(Object(J.a)(e.files),[t.payload])});case k:return Object.assign({},e,{tracks:[].concat(Object(J.a)(e.tracks),[Object(m.a)(Object(m.a)({},t.payload),{},{settings:Object(m.a)({},F),id:e.tracks.length})])});case y:return Object.assign({},e,{tracks:e.tracks.map((function(e){return t.payload.id===e.id?Object(m.a)(Object(m.a)({},e),{},{settings:Object(m.a)(Object(m.a)({},e.settings),t.payload.settings)}):e}))});case C:return Object.assign({},e,{globalSettings:Object(m.a)(Object(m.a)({},e.globalSettings),t.payload)});case S:var n=e.windows.indexOf(t.payload);return n>=0?Object.assign({},e,{windows:[t.payload].concat(Object(J.a)(e.windows.slice(0,n)),Object(J.a)(e.windows.slice(n+1,e.windows.length)))}):Object.assign({},e,{windows:[t.payload].concat(Object(J.a)(e.windows))});case M:var c,a=0,s=Object(G.a)(e.tracks);try{for(s.s();!(c=s.n()).done;){var r=c.value;if(t.payload===r.id)break;a++}}catch(l){s.e(l)}finally{s.f()}return Object.assign({},e,{tracks:[].concat(Object(J.a)(e.tracks.slice(0,a)),Object(J.a)(e.tracks.slice(a+1,e.tracks.length)))});case E:return Object.assign({},e,{tracks:e.tracks.map((function(e){return e.id!==t.payload.id?e:Object(m.a)(Object(m.a)({},e),{},{data:t.payload.data})}))});default:return e}},de=Object(ie.b)(oe);n(174),n(175);window.onload=function(){return v.a.onDOMContentLoaded()},d.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(N.a,{store:de,children:Object(r.jsx)(le,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[176,1,2]]]);
//# sourceMappingURL=main.ca8ae7d6.chunk.js.map