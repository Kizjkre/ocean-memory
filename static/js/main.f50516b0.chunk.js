(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var c,a=n(2),s=n(5),r=n.n(s),l=n(33),i=n.n(l),o=n(25),d=n(12),b=function(){return Object(a.jsxs)("div",{className:"page-wrapper with-navbar",children:[Object(a.jsxs)("nav",{className:"navbar",children:[Object(a.jsx)("span",{className:"navbar-brand anchor",children:"Ocean Memory Sonification"}),Object(a.jsx)("ul",{className:"navbar-nav d-none d-md-flex",children:Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(o.b,{to:"/workstation",className:"nav-link",children:"Workstation"})})})]}),Object(a.jsx)("div",{className:"content-wrapper",children:"Homepage"})]})},u=n(3),j=n(8),f=n(4),m=n.n(f),h=n(7),g=n(13),O=n(20),p=n.n(O),x=n(11),v="UPLOAD_FILE",N="ADD_TRACK",w="SET_SETTINGS",k="SET_GLOBAL_SETTINGS",y="FOCUS_WINDOW",S="DELETE_TRACK",C="SET_DATA",M={files:[],tracks:[],globalSettings:{bpm:120,key:"C",timesig:[4,4],dark:["dark-mode","not-set"].includes(p.a.getPreferredMode()),channels:[]},windows:[]},E={mute:!1,volume:100,pan:0,continuous:!1,channel:[]},L={continuous:!1,tracks:[],features:[{name:"Volume",controller:-1},{name:"Pitch",controller:-1},{name:"Pan",controller:-1},{name:"Tempo",controller:-1}]},T=function(e,t){return{type:w,payload:{id:e,settings:t}}},F=function(e){return{type:k,payload:e}},A=function(e){return{type:y,payload:e}},B=Object(x.b)(null,(function(e){return{uploadFile:function(t,n){return e(function(e,t){return{type:v,payload:{name:e,csv:t}}}(t,n))},setGlobalSettings:function(t){return e(F(t))}}}))((function(e){var t,n,c=e.uploadFile,r=e.setGlobalSettings,l=Object(s.createRef)(),i=Object(s.createRef)(),d=Object(s.createRef)(),b=Object(s.useState)({sidebar:!0,dark:"dark-mode"===p.a.getPreferredMode()}),f=Object(j.a)(b,2),O=f[0],x=f[1];return Object(a.jsxs)("nav",{className:"navbar",children:[Object(a.jsx)("span",{className:"navbar-brand anchor",children:"Workstation"}),Object(a.jsxs)("ul",{className:"navbar-nav",children:[Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)("span",{className:"nav-link anchor","data-toggle":"dropdown",id:"nav-dropdown-file",ref:l,children:"File"}),Object(a.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"nav-dropdown-file",children:[Object(a.jsxs)("label",{htmlFor:"upload",className:"dropdown-item",children:[Object(a.jsx)("input",{type:"file",id:"upload",className:"d-none",accept:"text/csv",onChange:(t=c,n=l,function(){var e=Object(h.a)(m.a.mark((function e(c){var a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.target.files.length){e.next=8;break}return a=URL.createObjectURL(c.target.files[0]),e.next=4,g.c(a);case 4:s=e.sent,t(c.target.files[0].name,s),c.target.value="",n.current.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),Object(a.jsx)("i",{className:"fa fa-folder-open"}),"\u2003Open"]}),Object(a.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){return l.current.click()},children:[Object(a.jsx)("i",{className:"fa fa-file-export"}),"\u2003Export"]})]})]}),Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)("span",{className:"nav-link anchor","data-toggle":"dropdown",id:"nav-dropdown-file",ref:i,children:"Edit"}),Object(a.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"nav-dropdown-file",children:[Object(a.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){return i.current.click()},children:[Object(a.jsx)("i",{className:"fa fa-trash"}),"\u2003Delete Track"]}),Object(a.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){return i.current.click()},children:[Object(a.jsx)("i",{className:"fa fa-trash"}),"\u2003Remove File"]})]})]}),Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)("span",{className:"nav-link anchor","data-toggle":"dropdown",id:"nav-dropdown-file",ref:d,children:"View"}),Object(a.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"nav-dropdown-file",children:[Object(a.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){d.current.click(),p.a.toggleSidebar(),x(Object(u.a)(Object(u.a)({},O),{},{sidebar:!O.sidebar}))},children:[Object(a.jsx)("i",{className:"fa fa-toggle-".concat(O.sidebar?"off":"on")}),"\u2003",O.sidebar?"Close":"Open"," file browser"]}),Object(a.jsxs)("span",{className:"dropdown-item anchor",onClick:function(){d.current.click(),p.a.toggleDarkMode(),r({dark:!O.dark}),x(Object(u.a)(Object(u.a)({},O),{},{dark:!O.dark}))},children:[Object(a.jsx)("i",{className:"fa fa-".concat(O.dark?"sun":"moon")}),"\u2003Toggle ",O.dark?"light":"dark"," mode"]})]})]})]}),Object(a.jsx)("div",{className:"navbar-content ml-auto",children:Object(a.jsxs)(o.b,{to:"/",className:"btn btn-danger",children:[Object(a.jsx)("i",{className:"fa fa-sign-out-alt"}),"\u2003Exit Workstation"]})})]})})),D=Object(x.b)((function(e){return{files:e.files}}),(function(e){return{focusWindow:function(t){return e(A(t))}}}))((function(e){var t=e.files,n=e.focusWindow,c=Object(s.useState)({content:null}),r=Object(j.a)(c,2),l=r[0],i=r[1];return Object(s.useEffect)((function(){t.length&&i(Object(u.a)(Object(u.a)({},l),{},{content:t.map((function(e){return Object(a.jsxs)("span",{"data-toggle":"modal","data-target":"modal-".concat(e.name),onClick:(t="#modal-".concat(e.name),function(){return n(t)}),className:"sidebar-link sidebar-link-with-icon anchor",children:[Object(a.jsx)("span",{className:"sidebar-icon",children:Object(a.jsx)("i",{className:"fa fa-file-csv"})}),e.name]},"anchor-".concat(e.name));var t}))}))}),[t]),Object(a.jsx)("div",{className:"sidebar",children:Object(a.jsxs)("div",{className:"sidebar-menu",children:[Object(a.jsxs)("h5",{className:"sidebar-title",children:[Object(a.jsx)("i",{className:"fa fa-folder"}),"\u2003Files"]}),Object(a.jsx)("hr",{className:"sidebar-divider"}),l.content]})})})),R=n(9),I=L.features.map((function(e){return e.name})),q={C:"C Major",c:"C Minor","C#":"C# Major","c#":"C# Minor",D:"D Major",d:"D Minor",Eb:"E&#9837; Major",eb:"E&#9837; Minor",E:"E Major",e:"E Minor",F:"F Major",f:"F Minor","F#":"F# Major","f#":"F# Minor",G:"G Major",g:"G Minor",Ab:"A&#9837; Major",ab:"A&#9837; Minor",A:"A Major",a:"A Minor",Bb:"B&#9837; Major",bb:"B&#9837; Minor",B:"B Major",b:"B Minor",chromatic:"Chromatic",whole:"Whole Tone",penta:"Pentatonic",harmonic:"Harmonic Minor",none:"None"},G={C:["c","d","e","f","g","a","b"],c:["c","d","eb","f","g","ab","bb"],"C#":["c#","d#","e#","f#","g#","a#","b#"],"c#":["c#","d#","e","f#","g#","a","b"],D:["d","e","f#","g","a","b","c#"],d:["d","e","f","g","a","bb","c"],Eb:["eb","f","g","ab","bb","c","d"],eb:["eb","f","gb","ab","bb","cb","db"],E:["e","f#","g#","a","b","c#","d#"],e:["e","f#","g","a","b","c","d"],F:["f","g","a","bb","c","d","e"],f:["f","g","ab","bb","c","db","eb"],"F#":["f#","g#","a#","b","c#","d#","e"],"f#":["f#","g#","a","b","c#","d","e"],G:["g","a","b","c","d","e","f#"],g:["g","a","bb","c","d","eb","f"],Ab:["ab","bb","c","db","eb","f","g"],ab:["ab","bb","cb","db","eb","fb","gb"],A:["a","b","c#","d","e","f#","g#"],a:["a","b","c","d","e","f","g"],Bb:["bb","c","d","eb","f","g","a"],bb:["bb","c","db","eb","f","gb","ab"],B:["b","c#","d#","e","f#","g#","a#"],b:["b","c#","d","e","f#","g","a"],chromatic:["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],whole:["c","d","e","f#","g#","a#"],penta:["c","d","e","g","a"],harmonic:["a","b","c","d","e","f","g#"],none:[]},W=Object(x.b)((function(e){return{tracks:e.tracks}}),(function(e){return{setSettings:function(t,n){return e(T(t,n))},deleteTrack:function(t){return e(function(e){return{type:S,payload:e}}(t))},focusWindow:function(t){return e(A(t))}}}))((function(e){var t=e.column,n=e.i,c=e.tracks,s=e.setSettings,r=e.deleteTrack,l=e.focusWindow;return Object(a.jsxs)("details",{className:"collapse-panel",children:[Object(a.jsxs)("summary",{className:"collapse-header",children:[Object(a.jsx)("i",{className:"fa fa-cog"}),"\u2003Settings"]}),Object(a.jsxs)("div",{className:"collapse-content",children:[c[n].settings.channel.length>0?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h6",{className:"font-weight-semi-bold",children:"Volume"}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsxs)("div",{className:"custom-switch",children:[Object(a.jsx)("input",{type:"checkbox",id:"".concat(t,"-row-").concat(n,"-mute"),checked:!c[n].settings.mute,onChange:function(){return s(n,{mute:!c[n].settings.mute})}}),Object(a.jsx)("label",{htmlFor:"".concat(t,"-row-").concat(n,"-mute"),children:" "})]})}),Object(a.jsx)("div",{className:"col-9",children:Object(a.jsx)("div",{className:"h-full d-flex align-content-start",children:Object(a.jsx)("input",{disabled:c[n].settings.mute,className:c[n].settings.mute?"disabled":"",type:"range",min:"0",max:"100",defaultValue:"100",onMouseUp:function(e){return s(n,{volume:e.target.value})}})})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{}),Object(a.jsx)("h6",{className:"font-weight-semi-bold",children:"Pan"}),Object(a.jsx)("div",{className:"h-full d-flex align-content-start",children:Object(a.jsx)("input",{type:"range",min:"-50",max:"50",value:c[n].settings.pan,onChange:function(e){return s(n,{pan:Math.abs(e.target.value)<5?0:parseInt(e.target.value)})}})}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{})]}),Object(a.jsx)("button",{onClick:function(){return l("#sonification-".concat(c[n].name,"-").concat(n))},"data-toggle":"modal","data-target":"sonification-".concat(c[n].name.replace(/\s/g,"-"),"-").concat(n),className:"btn btn-block btn-primary",children:"Sonification Settings (Advanced)"}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{}),Object(a.jsxs)("button",{onClick:function(){return r(n)},className:"btn btn-block btn-danger",children:[Object(a.jsx)("i",{className:"fa fa-trash"}),"\u2003Delete Track"]})]})]})})),P=-1,_=Object(x.b)((function(e){return{dark:e.globalSettings.dark,tracks:e.tracks}}))((function(e){var t=e.dark,n=e.tracks,c=e.id,r=Object(s.createRef)(),l=Object(s.createRef)(),i=Object(s.createRef)(),o=Object(s.useState)({graph:""}),d=Object(j.a)(o,2),b=d[0],f=d[1],m=n.find((function(e){return e.id===c})).data.map((function(e,t){return[t,e]}));return Object(s.useEffect)((function(){var e=getComputedStyle(r.current).width;P<0&&(P=getComputedStyle(r.current).height);var t=g.g().domain(g.d(m,(function(e){return e[0]}))).range([30,parseFloat(e.slice(0,e.length-2))]),n=g.g().domain(g.d(m,(function(e){return e[1]}))).range([parseFloat(P.slice(0,P.length-2))-20,0]);if(m.every((function(e){return!isNaN(e[1])}))){var c=g.e().x((function(e){return t(e[0])})).y((function(e){return n(e[1])}));f(Object(u.a)(Object(u.a)({},b),{},{graph:c(m)}));var a=[g.a().scale(t).ticks(0),g.b().scale(n)];g.h(l.current).call(a[0]),g.h(i.current).call(a[1])}l.current.style.transform="translateY(calc(".concat(P," - 20px))"),i.current.style.transform="translateX(30px)"}),[n]),Object(a.jsx)("svg",{className:"track-graph",ref:r,children:Object(a.jsxs)("g",{className:"graph-content",children:[Object(a.jsx)("g",{className:"x",ref:l}),Object(a.jsx)("g",{className:"y",ref:i}),Object(a.jsx)("g",{className:"line",children:Object(a.jsx)("path",{d:b.graph,fill:"none",stroke:t?"white":"black"})})]})})})),z=function(e){var t=e.i,n=e.id,c=e.column,s=e.name;return Object(a.jsxs)("div",{className:"row row-eq-spacing",children:[Object(a.jsx)("div",{className:"col-".concat(4),children:Object(a.jsxs)("div",{className:"card track",children:[Object(a.jsxs)("h2",{className:"card-title",children:["Track ",t+1," - ",c]}),Object(a.jsx)("p",{className:"text-muted",children:s}),Object(a.jsx)(W,{column:c,i:t})]})}),Object(a.jsx)("div",{className:"col-".concat(8),children:Object(a.jsx)("div",{className:"card track overflow-scroll d-flex align-content-center",children:Object(a.jsx)(_,{id:n})})})]})},U=Object(x.b)((function(e){return{files:e.files,tracks:e.tracks}}))((function(e){var t=e.files,n=e.tracks,c=[];return n.forEach((function(e){var n,a=e.file,s=e.name,r=e.id,l=Object(R.a)(t);try{for(l.s();!(n=l.n()).done;){var i=n.value;if(i.name===a){c.push({file:i,column:s,id:r});break}}}catch(o){l.e(o)}finally{l.f()}})),Object(a.jsx)("div",{className:"content-wrapper",children:Object(a.jsx)("div",{className:"container-fluid ".concat(n.length?"":"h-full"),children:c.length?c.map((function(e,t){var n=e.file,c=e.column,s=e.id;return Object(a.jsx)(z,{i:t,id:s,column:c,name:n.name},"".concat(c,"-row-").concat(t))})):Object(a.jsx)("div",{className:"d-flex justify-content-center align-items-center h-full",children:Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("i",{className:"fa fa-music icon-lg"}),Object(a.jsxs)("p",{className:"font-size-20",children:["Nothing to see here..., open a ",Object(a.jsx)("kbd",{children:".csv"})," file to get started!"]})]})})})})})),V=Object(x.b)((function(e){return{windows:e.windows}}),(function(e){return{focusWindow:function(t){return e(A(t))}}}))((function(e){var t=e.anchor,n=e.buttons,c=e.children,r=e.title,l=e.windows,i=e.focusWindow,o=e.onClose,d=e.width;n||(n=[]),o||(o=function(){return null});var b=Object(s.createRef)(),f=Object(s.createRef)(),m=Object(s.useRef)({x:null,y:null}),h=Object(s.useState)({x:null,y:null,offsetX:null,offsetY:null,click:!1,zIndex:-1e3}),g=Object(j.a)(h,2),O=g[0],p=g[1];Object(s.useEffect)((function(){p(Object(u.a)(Object(u.a)({},O),{},{x:f.current.offsetLeft,initial:{x:f.current.offsetLeft,y:f.current.offsetTop}})),m.current={x:f.current.offsetLeft,y:f.current.offsetTop},b.current.style.height="".concat(f.current.getBoundingClientRect().height,"px"),b.current.style.width="".concat(f.current.getBoundingClientRect().width,"px"),i("#".concat(t))}),[]),Object(s.useEffect)((function(){b.current.classList.contains("show")?p(Object(u.a)(Object(u.a)({},O),{},{zIndex:100+l.length-l.indexOf("#".concat(t)),x:m.current.x,y:m.current.y})):(o(),p(Object(u.a)(Object(u.a)({},O),{},{zIndex:-1e3})))}),[l]);var x=function(){return p(Object(u.a)(Object(u.a)({},O),{},{x:m.current.x,y:null}))};return Object(a.jsx)("div",{className:"modal window",id:t,tabIndex:"-1",role:"dialog",style:{top:O.y,left:O.x,zIndex:O.zIndex},ref:b,"data-overlay-dismissal-disabled":"true","data-esc-dismissal-disabled":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",ref:f,style:{width:d||null},children:[Object(a.jsxs)("h5",{className:"modal-title window-title",onMouseDown:function(e){i("#".concat(t)),p(Object(u.a)(Object(u.a)({},O),{},{offsetX:e.clientX-O.x,offsetY:e.clientY-O.y,click:!0}))},onMouseMove:function(e){O.click&&p(Object(u.a)(Object(u.a)({},O),{},{x:e.clientX-O.offsetX,y:e.clientY-O.offsetY}))},onMouseUp:function(){return p(Object(u.a)(Object(u.a)({},O),{},{click:!1}))},children:[Object(a.jsx)("button",{className:"btn btn-square rounded-circle custom-modal-dismiss red",onClick:x,"data-dismiss":"modal",children:"\xa0"}),"\xa0\xa0",n.map((function(e,n){var c=e.close,s=e.color,r=e.onClick,l=e.disabled;return Object(a.jsxs)("span",{children:[Object(a.jsx)("button",{className:"btn btn-square rounded-circle custom-modal-dismiss ".concat(s),onClick:function(){r(),c&&x()},"data-dismiss":c?"modal":null,disabled:l,children:"\xa0"}),"\xa0\xa0"]},"btn-".concat(t,"-").concat(n))})),Object(a.jsx)("br",{}),r]}),Object(a.jsx)("div",{children:c})]})})})})),X=Object(x.b)((function(e){return{files:e.files}}),(function(e){return{addTrack:function(t,n,c){return e(function(e,t,n){return{type:N,payload:{name:e,file:t,data:n}}}(t,n,c))}}}))((function(e){var t,n,c,r=e.anchor,l=e.track,i=e.files,o=e.addTrack,d=Object(s.useState)({column:""}),b=Object(j.a)(d,2),f=b[0],m=b[1],h=Object(R.a)(i);try{for(h.s();!(c=h.n()).done;){var g=c.value;if(g.name===l){t=g.name,n=g.csv.columns;break}}}catch(O){h.e(O)}finally{h.f()}return Object(a.jsx)(V,{anchor:r,buttons:[{close:!0,color:""===f.column?"":"green",onClick:function(){""!==f.column&&(o(f.column,t,i.find((function(e){return e.name===l})).csv.map((function(e){return isNaN(e[f.column])?e[f.column]:parseFloat(e[f.column])}))),m(Object(u.a)(Object(u.a)({},f),{},{column:""})))},disabled:""===f.column}],title:"Add Track",children:Object(a.jsxs)("select",{className:"form-control form-control-lg",value:f.column,onChange:function(e){return m(Object(u.a)(Object(u.a)({},f),{},{column:e.target.value}))},children:[Object(a.jsx)("option",{value:"",disabled:!0,children:"Select a column"}),n.map((function(e){return Object(a.jsx)("option",{value:e,children:e},"column-".concat(e))}))]})})})),Y=n(6),H=function(e){var t=e.title,n=e.children;return Object(a.jsx)(V,{anchor:"help-window",title:"Info: ".concat(t),children:n||Object(a.jsx)("div",{className:"p-20 m-20"})})},K=function(e){return Array.from(e.children).forEach((function(e){e.classList.contains("active")&&e.classList.remove("active")}))},J=Object(x.b)((function(e){return{tracks:e.tracks,channels:e.globalSettings.channels}}),(function(e){return{setGlobalSettings:function(t){return e(F(t))}}}))((function(e){var t=e.anchor,n=e.title,c=e.i,r=e.tracks,l=e.channels,i=e.setGlobalSettings,o=Object(s.useState)({selected:-1}),d=Object(j.a)(o,2),b=d[0],f=d[1],m=Object(s.createRef)(),h=b.selected<0?{features:[]}:l.find((function(e){return e.id===b.selected}));Object(s.useEffect)((function(){-1===b.selected&&K(m.current)}),[b.selected]),Object(s.useEffect)((function(){r[c].settings.channel.length<=b.selected&&f(Object(u.a)(Object(u.a)({},b),{},{selected:-1}))}),[r[c].settings.channel]);var g=function(e){return function(t){K(t.target.parentElement.parentElement),t.target.parentElement.classList.add("active"),f(Object(u.a)(Object(u.a)({},b),{},{selected:e}))}},O=function(e){var t=Object(Y.a)(l),n=l.findIndex((function(e){return e.id===c}));e.target.classList.contains("btn-primary")?(e.target.classList.remove("btn-primary"),t[n].features.find((function(t){return t.name===e.target.innerText.trim()})).controller=-1):(e.target.classList.add("btn-primary"),t[n].features.find((function(t){return t.name===e.target.innerText.trim()})).controller=c),i({channels:t})};return Object(a.jsxs)(V,{anchor:t,title:"".concat(n,": Channel Settings"),onClose:function(){return f(Object(u.a)(Object(u.a)({},b),{},{channel:-1}))},children:[Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"pagination text-center",ref:m,children:[Object(a.jsx)("li",{className:"page-item",children:Object(a.jsxs)("button",{className:"page-link",children:[Object(a.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true"}),Object(a.jsx)("span",{className:"sr-only",children:"Previous"})]})}),r[c].settings.channel.map((function(e){return Object(a.jsx)("li",{className:"page-item",children:Object(a.jsx)("button",{className:"page-link",onClick:g(e),children:e})},"pagination-".concat(e))})),Object(a.jsx)("li",{className:"page-item",children:Object(a.jsxs)("button",{className:"page-link",children:[Object(a.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"}),Object(a.jsx)("span",{className:"sr-only",children:"Next"})]})})]})}),Object(a.jsxs)("div",{className:-1===b.selected?"transparent":"",children:[Object(a.jsxs)("h5",{className:"font-weight-bold",children:["Channel ",b.selected," Controlled Features"]}),I.map((function(e){var t=h.features.find((function(t){return t.name===e}));return[-1,c].includes(null===t||void 0===t?void 0:t.controller)?Object(a.jsx)("button",{className:"btn ml-5",onClick:O,children:e},e):null}))]})]})})),$=Object(a.jsx)("p",{children:"Channels group tracks into one output, allowing for tracks to affect different aspects of the sonification."}),Q=Object(a.jsx)("p",{children:"Select a subset of the data to sonify."}),Z=function(e,t){t?(e.style.background="var(--dm-table-primary-bg-color)",e.style.color="var(--dm-table-primary-text-color)",e.style.rowBorder="var(--dm-table-primary-row-border-color)",e.style.cellBorder="var(--dm-table-primary-cell-border-color)"):(e.style.background="var(--lm-table-primary-bg-color)",e.style.color="var(--lm-table-primary-text-color)",e.style.rowBorder="var(--lm-table-primary-row-border-color)",e.style.cellBorder="var(--lm-table-primary-cell-border-color)")},ee=Object(x.b)((function(e){return{tracks:e.tracks,globalSettings:e.globalSettings,files:e.files}}),(function(e){return{setSettings:function(t,n){return e(T(t,n))},setGlobalSettings:function(t){return e(F(t))},focusWindow:function(t){return e(A(t))},setData:function(t,n){return e(function(e,t){return{type:C,payload:{id:e,data:t}}}(t,n))}}}))((function(e){var t=e.anchor,n=e.trackno,c=e.tracks,r=e.setSettings,l=e.globalSettings,i=e.setGlobalSettings,o=e.focusWindow,d=e.setData,b=e.files,f=Object(s.useState)({title:"",children:null,segment:""}),m=Object(j.a)(f,2),h=m[0],O=m[1];Object(s.useEffect)((function(){Array.from(document.getElementsByClassName("datum-selected")).forEach((function(e){return Z(e,l.dark)}))}),[l.dark]);var p=function(e){return function(t){if(t.target.classList.contains("btn-primary")){t.target.classList.remove("btn-primary");var a=Object(Y.a)(c[n].settings.channel);a.splice(c[n].settings.channel.indexOf(e),1),r(n,{channel:a});var s=Object(Y.a)(l.channels);s[e].tracks.splice(s[e].tracks.indexOf(n),1),i({channels:s})}else{t.target.classList.add("btn-primary"),r(n,{channel:[].concat(Object(Y.a)(c[n].settings.channel),[e]).sort((function(e,t){return e-t}))});var o=Object(Y.a)(l.channels);o[e].tracks=[].concat(Object(Y.a)(o[e].tracks),[n]),i({channels:o})}}},x=function(e,t){return function(a){var s=c[n].data;a.target.classList.contains("datum-selected")?(a.target.classList.remove("datum-selected"),a.target.style.background=null,a.target.style.color=null,a.target.style.rowBorder=null,a.target.style.cellBorder=null,s.splice(t,1),d(n,s)):(a.target.classList.add("datum-selected"),Z(a.target,l.dark),s.splice(t,0,e),d(n,s))}},v=function(e,t){return function(){O(Object(u.a)(Object(u.a)({},h),{},{title:e,children:t})),o("#help-window")}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(V,{anchor:t,title:"".concat(c[n].name,": Sonification Settings"),width:"50vw",children:[Object(a.jsxs)("h5",{className:"font-weight-bold d-flex align-items-baseline",children:["Connect to Channel\u2003",Object(a.jsx)("i",{className:"fa fa-question-circle anchor","data-toggle":"modal","data-target":"help-window",onClick:v("Connect to Channel",$)})]}),Object(a.jsxs)("div",{className:"w-full",children:[Object(a.jsx)("button",{className:"btn btn-square btn-primary m-5",onClick:function(){return i({channels:[].concat(Object(Y.a)(l.channels),[Object(u.a)(Object(u.a)({},L),{},{id:l.channels.length})])})},children:"+"}),Object(Y.a)(l.channels).map((function(e,t){return Object(a.jsx)("button",{className:"btn btn-square m-5",onClick:p(t),children:t},"channel-".concat(t))}))]}),0===c[n].settings.channel.length?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"w-full",children:Object(a.jsx)("button",{className:"btn btn-primary ml-5","data-toggle":"modal","data-target":"channel-".concat(c[n].name,"-").concat(n),onClick:function(){return o("#channel-".concat(c[n].name,"-").concat(n))},children:"Channel Settings"})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{}),Object(a.jsx)("h5",{className:"font-weight-bold d-flex align-items-baseline",children:"Data Processing"}),Object(a.jsxs)("h6",{className:"font-weight-semi-bold d-flex align-items-baseline",children:["Data Points\u2003",Object(a.jsx)("i",{className:"fa fa-question-circle anchor","data-toggle":"modal","data-target":"help-window",onClick:v("Data Points",Q)})]}),Object(a.jsx)("div",{className:"w-full overflow-scroll",children:Object(a.jsx)("table",{className:"table",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:c[n].name}),c[n].data.map((function(e,t){return Object(a.jsx)("td",{className:"anchor sonification-data-point is-primary",onClick:x(e,t),children:e},"data-".concat(t))}))]})})})}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){return d(n,function(e){var t=g.f(e,.25),n=g.f(e,.75),c=[];return e.forEach((function(e){e<1.5*t||e>1.5*n||c.push(e)})),c}(c[n].data))},children:"Remove Outliers"})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)("input",{className:"form-control",placeholder:"Segmentation Size",type:"number",min:"1",value:h.segment,onChange:function(e){d(n,function(e,t){for(var n=[],c=0;c<e.length-t;c+=t){for(var a=[],s=0;s<t;s++)a.push(e[c+s]);n.push(a)}return n}(c[n].data,e.target.value)),O(Object(u.a)(Object(u.a)({},h),{},{segment:e.target.value}))}})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){d(n,b.find((function(e){return e.name===c[n].file})).csv.map((function(e){return isNaN(e[c[n].name])?e[c[n].name]:parseFloat(e[c[n].name])}))),O(Object(u.a)(Object(u.a)({},h),{},{segment:""}))},children:"Restore Data"}),Object(a.jsx)("br",{}),c[n].settings.channel.length>0?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("hr",{}),Object(a.jsxs)("h5",{className:"font-weight-bold d-flex align-items-baseline",children:[c[n].settings.continuous?"Continuous":"Discrete","\u2003",Object(a.jsx)("i",{className:"fa fa-question-circle anchor","data-toggle":"modal","data-target":"help-window"})]}),Object(a.jsx)("div",{className:"d-flex w-full justify-items-center align-items-center",children:Object(a.jsxs)("div",{className:"custom-switch",children:[Object(a.jsx)("input",{type:"checkbox",id:"continuous-".concat(t),value:c[n].settings.continuous,onChange:function(e){return r(n,{continuous:e.target.checked})}}),Object(a.jsx)("label",{htmlFor:"continuous-".concat(t)})]})})]})]}),Object(a.jsx)(H,{title:h.title,children:h.children}),Object(a.jsx)(J,{anchor:"channel-".concat(c[n].name.replace(/\s/g,"-"),"-").concat(n),title:c[n].name,i:n})]})})),te=n(21),ne=[],ce=[],ae=function(){var e=Object(h.a)(m.a.mark((function e(t,n){var c,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n.bpm<0?60:n.bpm,a="none"===n.key?"chromatic":n.key,te.c.bpm.value=c,s=new te.a(1/t.length).toDestination(),t.forEach((function(e){if(0===e.settings.channel.length){var t=Math.max.apply(Math,Object(Y.a)(e.data)),n=Math.min.apply(Math,Object(Y.a)(e.data)),c=2*G[a].length;ce.push(new te.a(e.settings.mute?0:e.settings.volume/100)),ne.push(new te.b(0,"sine").connect(s)),ne[ne.length-1].debug=!0;var r=[];e.data.forEach((function(e,s){var l,i=(l=e,Math.round(c/(t-n)*(l-n)));r.push(["0:".concat(s),"".concat(G[a][i%G[a].length]).concat(4+Math.floor(i/G[a].length))])})),e.settings.continuous?r.forEach((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];ne[ne.length-1].frequency.linearRampToValueAtTime(c,n)})):r.forEach((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];ne[ne.length-1].frequency.setValueAtTime(c,n)})),ne[ne.length-1].sync().start(0).stop(ne[ne.length-1].toSeconds(r[r.length-1][0]))}})),n.channels.forEach((function(e){console.log(e)})),te.c.start();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=Object(x.b)((function(e){return{globalSettings:e.globalSettings,tracks:e.tracks}}),(function(e){return{setGlobalSettings:function(t){return e(F(t))}}}))((function(e){var t=e.globalSettings,n=e.setGlobalSettings,c=e.tracks,s=0!==c.length,r=function(e){return function(c){return n({timesig:e?[c.target.value,t.timesig[1]]:Number.isInteger(Math.log(c.target.value)/Math.log(2))?[t.timesig[0],c.target.value]:Object(Y.a)(t.timesig)})}};return Object(a.jsx)("nav",{className:"navbar navbar-fixed-bottom controls",children:Object(a.jsx)("div",{className:"navbar-content w-full",children:Object(a.jsxs)("div",{className:"row w-full",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsxs)("div",{className:"row h-full",children:[Object(a.jsx)("div",{className:"col-6 d-flex justify-content-center",children:Object(a.jsx)("div",{className:"h-full w-full d-flex justify-content-center",children:Object(a.jsxs)("div",{className:"dropdown dropup with-arrow align-self-center",children:[Object(a.jsxs)("button",{className:"btn btn-lg","data-toggle":"dropdown",type:"button",id:"bpm-dropup",children:[Object(a.jsx)("i",{className:"fa fa-drum"}),"\u2003BPM: ",Object(a.jsx)("span",{className:"text-monospace",children:t.bpm<0?"N/A":t.bpm})]}),Object(a.jsx)("div",{className:"dropdown-menu","aria-labelledby":"bpm-dropup",children:Object(a.jsx)("div",{className:"container mt-15",children:Object(a.jsxs)("div",{className:"form-group w-full",children:[Object(a.jsx)("label",{htmlFor:"bpm",children:"Set BPM"}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"custom-switch align-self-center",children:[Object(a.jsx)("input",{type:"checkbox",id:"bpm-toggle",checked:t.bpm>0,onChange:function(){return n({bpm:t.bpm>0?-1:120})}}),Object(a.jsx)("label",{htmlFor:"bpm-toggle"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:t.bpm<0?"text":"number",className:"form-control",id:"bpm",min:"30",max:"240",value:t.bpm<0?"N/A":t.bpm,disabled:t.bpm<0,placeholder:"BPM",onChange:function(e){return n({bpm:0===e.target.value.length?30:parseInt(e.target.value)})}})]})})})]})})}),Object(a.jsx)("div",{className:"col-6 d-flex justify-content-center",children:Object(a.jsx)("div",{className:"h-full w-full d-flex justify-content-center",children:Object(a.jsxs)("div",{className:"dropdown dropup with-arrow align-self-center",children:[Object(a.jsxs)("button",{className:"btn btn-lg","data-toggle":"dropdown",type:"button",id:"key-dropup",children:[Object(a.jsx)("i",{className:"fa fa-hashtag"}),"\u2003Key: ",Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:q[t.key]}})]}),Object(a.jsx)("div",{className:"dropdown-menu","aria-labelledby":"key-dropup",children:Object(a.jsx)("div",{className:"container mt-15",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"key",children:"Set Key"}),Object(a.jsx)("select",{className:"form-control",id:"key",onChange:function(e){return n({key:e.target.value})},children:Object.keys(q).map((function(e){return Object(a.jsx)("option",{value:e,dangerouslySetInnerHTML:{__html:q[e]}},e)}))})]})})})]})})})]})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("div",{className:"w-full d-flex justify-content-center",children:Object(a.jsx)("button",{className:"btn btn-square rounded-circle btn-success play font-size-24",type:"button",disabled:!s,onClick:function(e){if(e.target.classList.contains("btn-danger"))e.target.classList.add("btn-success"),e.target.classList.remove("btn-danger"),te.c.stop();else if(e.target.classList.contains("btn-secondary"))e.target.classList.add("btn-danger"),e.target.classList.remove("btn-secondary"),te.c.pause();else{e.target.classList.add("btn-danger"),e.target.classList.remove("btn-success");var n=[];c.forEach((function(e){0===e.settings.channel.length&&n.push(e)})),Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(n,t);case 2:case"end":return e.stop()}}),e)})))()}}})})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("div",{className:"row h-full",children:Object(a.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(a.jsx)("div",{className:"h-full w-full d-flex justify-content-center",children:Object(a.jsxs)("div",{className:"dropdown dropup with-arrow align-self-center",children:[Object(a.jsxs)("button",{className:"btn btn-lg d-flex align-items-center","data-toggle":"dropdown",type:"button",id:"timesig-dropup",children:[Object(a.jsx)("i",{className:"fa fa-stopwatch"}),"\u2003Time Signature:\xa0",Object(a.jsxs)("span",{className:"supsub",children:[Object(a.jsx)("sup",{children:t.timesig[0]<=0?"N/A":t.timesig[0]}),Object(a.jsx)("sub",{children:t.timesig[1]<=0?"N/A":t.timesig[1]})]})]}),Object(a.jsx)("div",{className:"dropdown-menu","aria-labelledby":"timesig-dropup",children:Object(a.jsx)("div",{className:"container mt-15",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"timesig",children:"Set Time Signature"}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"custom-switch align-self-center",children:[Object(a.jsx)("input",{type:"checkbox",id:"timesig-toggle",checked:t.timesig[0]>0,onChange:function(){return n({timesig:t.timesig[0]>0?[-1,-1]:[4,4]})}}),Object(a.jsx)("label",{htmlFor:"timesig-toggle",children:" "})]}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"number",className:"form-control",id:"timesig",min:"1",max:"20",placeholder:t.timesig[0]<=0?"N/A":t.timesig[0],onChange:r(!0)}),Object(a.jsx)("input",{type:"number",className:"form-control",id:"timesig-bottom",min:"1",max:"32",placeholder:t.timesig[1]<=0?"N/A":t.timesig[1],onChange:r(!1)})]})})})]})})})})})]})})})})),re=Object(x.b)((function(e){return c=e.globalSettings.dark,{files:e.files,tracks:e.tracks}}),(function(e){return{setGlobalSettings:function(t){return e(F(t))}}}))((function(e){var t=e.files,n=e.tracks,r=e.setGlobalSettings,l=function(e){2===e.length&&"shift"===e[0]&&"d"===e[1]&&r({dark:c=!c})};return Object(s.useEffect)((function(){var e=[];document.addEventListener("keydown",(function(t){document.querySelector("input:focus")||document.querySelector("textarea:focus")||document.querySelector("select:focus")||(e.push(t.key.toLowerCase()),l(e))})),document.addEventListener("keyup",(function(t){document.querySelector("input:focus")||document.querySelector("textarea:focus")||document.querySelector("select:focus")||(e.splice(e.indexOf(t.key.toLowerCase()),1),l(e))}))}),[]),Object(a.jsxs)("div",{className:"page-wrapper with-navbar with-sidebar with-navbar-fixed-bottom",children:[Object(a.jsx)("div",{className:"sticky-alerts"}),t.map((function(e){var t=e.name;return Object(a.jsx)(X,{anchor:"modal-".concat(t),track:t},"modal-".concat(t))})),n.map((function(e,t){e.file;var n=e.name;return Object(a.jsx)(ee,{anchor:"sonification-".concat(n.replace(/\s/g,"-"),"-").concat(t),trackno:t},"sonification-".concat(n,"-").concat(t))})),Object(a.jsx)(B,{}),Object(a.jsx)(D,{}),Object(a.jsx)(U,{}),Object(a.jsx)(se,{})]})})),le=function(){return Object(a.jsx)(o.a,{children:Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/",component:b}),Object(a.jsx)(d.a,{path:"/workstation",component:re})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=n(60),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{files:[].concat(Object(Y.a)(e.files),[t.payload])});case N:return Object.assign({},e,{tracks:[].concat(Object(Y.a)(e.tracks),[Object(u.a)(Object(u.a)({},t.payload),{},{settings:Object(u.a)({},E),id:e.tracks.length})])});case w:return Object.assign({},e,{tracks:e.tracks.map((function(e){return t.payload.id===e.id?Object(u.a)(Object(u.a)({},e),{},{settings:Object(u.a)(Object(u.a)({},e.settings),t.payload.settings)}):e}))});case k:return Object.assign({},e,{globalSettings:Object(u.a)(Object(u.a)({},e.globalSettings),t.payload)});case y:var n=e.windows.indexOf(t.payload);return n>=0?Object.assign({},e,{windows:[t.payload].concat(Object(Y.a)(e.windows.slice(0,n)),Object(Y.a)(e.windows.slice(n+1,e.windows.length)))}):Object.assign({},e,{windows:[t.payload].concat(Object(Y.a)(e.windows))});case S:var c,a=0,s=Object(R.a)(e.tracks);try{for(s.s();!(c=s.n()).done;){var r=c.value;if(t.payload===r.id)break;a++}}catch(l){s.e(l)}finally{s.f()}return Object.assign({},e,{tracks:[].concat(Object(Y.a)(e.tracks.slice(0,a)),Object(Y.a)(e.tracks.slice(a+1,e.tracks.length)))});case C:return Object.assign({},e,{tracks:e.tracks.map((function(e){return e.id!==t.payload.id?e:Object(u.a)(Object(u.a)({},e),{},{data:t.payload.data})}))});default:return e}},de=Object(ie.b)(oe);n(186),n(187);window.onload=function(){return p.a.onDOMContentLoaded()},i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(x.a,{store:de,children:Object(a.jsx)(le,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[188,1,2]]]);
//# sourceMappingURL=main.f50516b0.chunk.js.map