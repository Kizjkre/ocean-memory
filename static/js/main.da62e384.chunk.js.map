{"version":3,"sources":["synth/synth.js","components/Workstation.js","components/Index.js","constants/state.js","helper/processing.js","actions/index.js","components/workstation/Toolbar.js","components/workstation/FileBrowser.js","constants/workstation.js","components/workstation/Settings.js","components/workstation/TrackData.js","components/workstation/Track.js","components/workstation/Main.js","components/workstation/windows/Window.js","components/workstation/windows/AddTrack.js","components/workstation/windows/Info.js","components/workstation/windows/Channel.js","helper/info.js","components/workstation/windows/Sonification.js","reducers/index.js","store/index.js","components/workstation/Controls.js","app.js","serviceWorker.js","index.js"],"names":["context","dark","Index","className","to","UPLOAD_FILE","ADD_TRACK","SET_SETTINGS","SET_GLOBAL_SETTINGS","FOCUS_WINDOW","DELETE_TRACK","SET_DATA","INITIAL_STATE","files","tracks","globalSettings","bpm","key","timesig","includes","halfmoon","getPreferredMode","channels","windows","INITIAL_SETTINGS","mute","volume","pan","continuous","channel","INITIAL_CHANNEL_SETTINGS","features","name","controller","scale","data","type","max","min","center","some","d","isNaN","map","Math","E","tanh","PI","atan","sign","formatCSV","raw","lines","split","columns","length","filter","line","join","typeify","forEach","row","Object","keys","col","parseFloat","average","sum","datum","uploadFile","a","d3","payload","setSettings","id","settings","setGlobalSettings","focusWindow","window","connect","state","dispatch","file","createRef","edit","view","useState","sidebar","setState","handleUpload","e","target","url","URL","createObjectURL","fetch","text","value","current","click","data-toggle","ref","aria-labelledby","htmlFor","accept","onChange","onClick","toggleSidebar","toggleDarkMode","content","useEffect","data-target","FEATURES","f","KEYS","NOTES","SCALES","deleteTrack","column","i","checked","disabled","defaultValue","onMouseUp","abs","parseInt","replace","height","svg","xAxis","yAxis","graph","find","t","width","getComputedStyle","x","domain","range","slice","y","every","axes","ticks","call","style","transform","fill","stroke","Track","push","anchor","buttons","children","title","onClose","win","dialog","initial","useRef","offsetX","offsetY","zIndex","offsetLeft","offsetTop","getBoundingClientRect","classList","contains","indexOf","resetPosition","tabIndex","role","top","left","data-overlay-dismissal-disabled","data-esc-dismissal-disabled","onMouseDown","clientX","clientY","onMouseMove","data-dismiss","close","color","addTrack","track","Info","deselect","Array","from","child","remove","selected","ul","c","handleChannel","parentElement","add","handleFeature","index","findIndex","ch","innerText","trim","aria-hidden","feature","f2","select","background","rowBorder","cellBorder","setData","trackno","segment","document","getElementsByClassName","temp","splice","temp2","sort","b","handlePoint","handleInfo","_","dataInfo","first","third","removeOutliers","placeholder","size","subTemp","j","chunkify","rootReducer","action","assign","focusIndex","store","createStore","play","resume","AudioContext","now","currentTime","osc","OscillatorNode","gain","GainNode","panner","StereoPannerNode","destination","num","normalize","round","frequency","linearRampToValueAtTime","calculateFrequency","floor","setValueAtTime","start","stop","getState","pitch","rawVolume","rawPan","maxPitch","minPitch","note","octave","hasTracks","handleTimesig","Number","isInteger","log","dangerouslySetInnerHTML","__html","k","undefined","suspend","output","keyPress","addEventListener","querySelector","toLowerCase","App","exact","path","component","Workstation","Boolean","location","hostname","match","onload","onDOMContentLoaded","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.da62e384.chunk.js","sourcesContent":["import { NOTES, SCALES } from '../constants/workstation';\nimport { average, scale } from '../helper/processing';\nimport store from '../store/';\n\nlet context;\n\nexport const play = (tracks, globalSettings) => {\n  if (context) {\n    context.resume();\n  } else {\n    context = new AudioContext();\n\n    let bpm = globalSettings.bpm < 0 ? 60 : globalSettings.bpm;\n    let key = globalSettings.key === 'none' ? 'chromatic' : globalSettings.key;\n\n    const now = context.currentTime;\n\n    tracks.forEach(t => {\n      if (t.settings.channel.length === 0) {\n        const osc = new OscillatorNode(context, { type: 'sine' });\n        const gain = new GainNode(context);\n        const panner = new StereoPannerNode(context);\n        osc.connect(gain).connect(panner).connect(context.destination);\n        gain.gain.value = t.settings.mute ? 0 : t.settings.volume / 100 / (tracks.length + globalSettings.channels.length);\n        panner.pan.value = t.settings.pan / 50;\n\n        const max = Math.max(...t.data);\n        const min = Math.min(...t.data);\n        const num = SCALES[key].length * 2;\n        const normalize = x => Math.round(num / (max - min) * (x - min));\n\n        if (t.settings.continuous) {\n          t.data.forEach((datum, i) => {\n            const index = normalize(datum);\n            osc.frequency.linearRampToValueAtTime(calculateFrequency(SCALES[key][index % SCALES[key].length], 4 + Math.floor(index / SCALES[key].length)), now + i * 60 / bpm);\n          });\n        } else {\n          t.data.forEach((datum, i) => {\n            const index = normalize(datum);\n            osc.frequency.setValueAtTime(calculateFrequency(SCALES[key][index % SCALES[key].length], 4 + Math.floor(index / SCALES[key].length)), now + i * 60 / bpm);\n          });\n        }\n\n        osc.start();\n        osc.stop(now + t.data.length * 60 / bpm);\n      }\n    });\n\n    globalSettings.channels.forEach(c => {\n      const osc = new OscillatorNode(context, { type: 'sine' });\n      const gain = new GainNode(context);\n      const panner = new StereoPannerNode(context);\n      osc.connect(gain).connect(panner).connect(context.destination);\n\n      const data = feature => {\n        const controller = c.features.find(f => f.name === feature).controller;\n        if (controller < 0) {\n          return [];\n        }\n        return store.getState().tracks.find(t => t.id === controller).data;\n      };\n\n      const pitch = data('Pitch');\n\n      const rawVolume = data('Volume');\n      const rawPan = data('Pan');\n      const volume = scale(rawVolume, 'logistic', 1, 0, average(rawVolume));\n      const pan = scale(rawPan, 'logistic', 1, -1, average(rawPan));\n\n      const maxPitch = Math.max(...pitch);\n      const minPitch = Math.min(...pitch);\n      const num = SCALES[key].length * 2;\n      const normalize = x => Math.round(num / (maxPitch - minPitch) * (x - minPitch));\n\n      if (volume.length === 0) {\n        gain.gain.value = 1 / (tracks.length + globalSettings.channels.length);\n      }\n\n      volume.forEach((datum, i) => gain.gain.linearRampToValueAtTime(datum, now + i * 60 / bpm));\n      pan.forEach((datum, i) => panner.pan.linearRampToValueAtTime(datum, now + i * 60 / bpm));\n\n      if (pitch.length === 0) {\n        osc.frequency.value = calculateFrequency(SCALES[key][0], 4);\n      }\n      if (c.continuous) {\n        pitch.forEach((datum, i) => {\n          const index = normalize(datum);\n          osc.frequency.linearRampToValueAtTime(calculateFrequency(SCALES[key][index % SCALES[key].length], 4 + Math.floor(index / SCALES[key].length)), now + i * 60 / bpm);\n        });\n      } else {\n        pitch.forEach((datum, i) => {\n          const index = normalize(datum);\n          osc.frequency.setValueAtTime(calculateFrequency(SCALES[key][index % SCALES[key].length], 4 + Math.floor(index / SCALES[key].length)), now + i * 60 / bpm);\n        });\n      }\n\n      osc.start();\n      osc.stop(now + Math.max(pitch.length, volume.length, pan.length) * 60 / bpm);\n    });\n  }\n};\n\nexport const pause = () => context.suspend();\n\nexport const stop = () => {\n  context.close();\n  context = undefined;\n};\n\nconst calculateFrequency = (note, octave) => 440 * 2 ** (octave - (NOTES[note] > 2 ? 5 : 4)) * 2 ** (NOTES[note] / 12);\n","import { useEffect } from 'react';\nimport Toolbar from './workstation/Toolbar';\nimport FileBrowser from './workstation/FileBrowser';\nimport Main from './workstation/Main';\nimport AddTrack from './workstation/windows/AddTrack';\nimport Sonification from './workstation/windows/Sonification';\nimport Controls from './workstation/Controls';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings } from '../actions';\n\nlet dark;\n\nconst Workstation = ({ files, tracks, setGlobalSettings }) => {\n  const keyPress = keys => {\n    if (keys.length === 2 && keys[0] === 'shift' && keys[1] === 'd') {\n      dark = !dark;\n      setGlobalSettings({ dark });\n    }\n  };\n\n  useEffect(() => {\n    let keys = [];\n\n    document.addEventListener('keydown', e => {\n      if (!(document.querySelector('input:focus') || document.querySelector('textarea:focus') || document.querySelector('select:focus'))) {\n        keys.push(e.key.toLowerCase());\n        keyPress(keys);\n      }\n    });\n    document.addEventListener('keyup', e => {\n      if (!(document.querySelector('input:focus') || document.querySelector('textarea:focus') || document.querySelector('select:focus'))) {\n        keys.splice(keys.indexOf(e.key.toLowerCase()), 1);\n        keyPress(keys);\n      }\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div className=\"page-wrapper with-navbar with-sidebar with-navbar-fixed-bottom\">\n      <div className=\"sticky-alerts\" />\n      { files.map(({ name }) => <AddTrack key={ `modal-${ name }` } anchor={ `modal-${ name }` } track={ name } />) }\n      { tracks.map(({ file, name }, i) => <Sonification key={ `sonification-${ name }-${ i }` } anchor={ `sonification-${ name.replace(/\\s/g, '-') }-${ i }` } trackno={ i } />) }\n      <Toolbar />\n      <FileBrowser />\n      <Main />\n      <Controls />\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  dark = state.globalSettings.dark;\n  return ({\n    files: state.files,\n    tracks: state.tracks\n  })\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Workstation);\n","import { Link } from 'react-router-dom';\n\nconst Index = () => {\n  return (\n    <div className=\"page-wrapper with-navbar\">\n      <nav className=\"navbar\">\n        <span className=\"navbar-brand anchor\">\n          Ocean Memory Sonification\n        </span>\n        <ul className=\"navbar-nav d-none d-md-flex\">\n          <li className=\"nav-item\">\n            <Link to=\"/workstation\" className=\"nav-link\">Workstation</Link>\n          </li>\n        </ul>\n      </nav>\n      <div className=\"content-wrapper\">\n        Homepage\n      </div>\n    </div>\n  );\n};\n\nexport default Index;\n","import halfmoon from 'halfmoon';\n\nexport const UPLOAD_FILE = 'UPLOAD_FILE';\nexport const ADD_TRACK = 'ADD_TRACK';\nexport const SET_SETTINGS = 'SET_SETTINGS';\nexport const SET_GLOBAL_SETTINGS = 'SET_GLOBAL_SETTINGS';\nexport const FOCUS_WINDOW = 'FOCUS_WINDOW';\nexport const DELETE_TRACK = 'DELETE_TRACK';\nexport const SET_DATA = 'SET_DATA';\n\nexport const INITIAL_STATE = {\n  files: [],\n  tracks: [],\n  globalSettings: {\n    bpm: 120,\n    key: 'C',\n    timesig: [4, 4],\n    dark: ['dark-mode', 'not-set'].includes(halfmoon.getPreferredMode()),\n    channels: []\n  },\n  windows: []\n};\n\nexport const INITIAL_SETTINGS = {\n  mute: false,\n  volume: 100,\n  pan: 0,\n  continuous: false,\n  channel: []\n};\n\nexport const INITIAL_CHANNEL_SETTINGS = {\n  continuous: false,\n  tracks: [],\n  features: [\n    {\n      name: 'Volume',\n      controller: -1\n    },\n    {\n      name: 'Pitch',\n      controller: -1\n    },\n    {\n      name: 'Pan',\n      controller: -1\n    },\n    {\n      name: 'Tempo',\n      controller: -1\n    }\n  ]\n};\n","import * as d3 from 'd3';\n\nexport const chunkify = (data, size) => {\n  const temp = [];\n  for (let i = 0; i < data.length - size; i += size) {\n    const subTemp = [];\n    for (let j = 0; j < size; j++) {\n      subTemp.push(data[i + j]);\n    }\n    temp.push(subTemp);\n  }\n  return temp;\n};\n\nexport const scale = (data, type, max = 1, min = -1, center = 0) => {\n  if (data.some(d => isNaN(d))) {\n    return null;\n  }\n  return data.map(d => {\n    switch (type) {\n      case 'logistic':\n        return (max - min) / (1 + Math.E ** (-1 * (d - center))) - 1 + (max + min) / 2;\n      case 'tanh':\n        return (max - min) * Math.tanh(d - center) + (max + min) / 2;\n      case 'arctan':\n        return (max - min) * 2 / Math.PI * Math.atan(d - center) + (max + min) / 2;\n      case 'sign':\n        return (max - min) * Math.sign(d - center) + (max + min) / 2;\n      default:\n        return d;\n    }\n  });\n};\n\nexport const removeOutliers = data => {\n  const first = d3.quantile(data, 0.25);\n  const third = d3.quantile(data, 0.75);\n  const temp = [];\n  data.forEach(d => {\n    if (!(d < 1.5 * first || d > 1.5 * third)) {\n      temp.push(d);\n    }\n  });\n  return temp;\n};\n\nexport const formatCSV = raw => {\n  let lines = raw.split(/\\n/g);\n  const columns = lines[lines.length / 2].split(',').length;\n  lines = lines.filter(line => line.split(',').length === columns);\n  return lines.join('\\n');\n};\n\nexport const typeify = data => {\n  // TODO: more data types\n  data.forEach(row => {\n    Object.keys(row).forEach(col => {\n      if (!isNaN(row[col])) {\n        row[col] = parseFloat(row[col]);\n      }\n    });\n  });\n\n  return data;\n};\n\nexport const average = data => {\n  let sum = 0;\n  data.forEach(datum => sum += datum);\n  return sum / data.length;\n};\n","import {\n  UPLOAD_FILE,\n  ADD_TRACK,\n  SET_SETTINGS,\n  SET_GLOBAL_SETTINGS, FOCUS_WINDOW, DELETE_TRACK, SET_DATA\n} from '../constants/state';\nimport * as d3 from 'd3';\nimport { formatCSV, typeify } from '../helper/processing';\n\nexport const uploadFile = async (name, raw) => {\n  const data = typeify(await d3.csvParse(formatCSV(raw)));\n\n  return {\n    type: UPLOAD_FILE,\n    payload: { name, data }\n  };\n};\n\nexport const addTrack = (name, file, data) => ({\n  type: ADD_TRACK,\n  payload: { name, file, data }\n});\n\nexport const setSettings = (id, settings) => ({\n  type: SET_SETTINGS,\n  payload: { id, settings }\n});\n\nexport const setGlobalSettings = settings => ({\n  type: SET_GLOBAL_SETTINGS,\n  payload: settings\n});\n\nexport const focusWindow = window => ({\n  type: FOCUS_WINDOW,\n  payload: window\n});\n\nexport const deleteTrack = id => ({\n  type: DELETE_TRACK,\n  payload: id\n});\n\nexport const setData = (id, data) => ({\n  type: SET_DATA,\n  payload: { id, data }\n});\n","import { createRef, useState } from 'react';\nimport halfmoon from 'halfmoon';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings, uploadFile } from '../../actions';\n\nconst Toolbar = ({ uploadFile, setGlobalSettings, dark }) => {\n  const file = createRef();\n  const edit = createRef();\n  const view = createRef();\n  const [state, setState] = useState({ sidebar: true });\n\n  const handleUpload = async e => {\n    if (e.target.files.length) {\n      const url = URL.createObjectURL(e.target.files[0]);\n      await uploadFile(e.target.files[0].name, await (await fetch(url)).text());\n      e.target.value = '';\n      file.current.click();\n    }\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <span className=\"navbar-brand anchor\">Workstation</span>\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ file }>File</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <label htmlFor=\"upload\" className=\"dropdown-item\">\n              <input type=\"file\" id=\"upload\" className=\"d-none\" accept=\"text/csv\" onChange={ handleUpload } />\n              <i className=\"fa fa-folder-open\"/>\n              &emsp;Open\n            </label>\n            <span className=\"dropdown-item anchor\" onClick={ () => file.current.click() }>\n              <i className=\"fa fa-file-export\"/>\n              &emsp;Export\n            </span>\n          </div>\n        </li>\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ edit }>Edit</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <span className=\"dropdown-item anchor\" onClick={ () => edit.current.click() }>\n              <i className=\"fa fa-trash\"/>\n              &emsp;Delete Track\n            </span>\n            <span className=\"dropdown-item anchor\" onClick={ () => edit.current.click() }>\n              <i className=\"fa fa-trash\"/>\n              &emsp;Remove File\n            </span>\n          </div>\n        </li>\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ view }>View</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <span\n              className=\"dropdown-item anchor\"\n              onClick={ () => {\n                view.current.click();\n                halfmoon.toggleSidebar();\n                setState({ ...state, sidebar: !state.sidebar });\n              } }\n            >\n              <i className={ `fa fa-toggle-${ state.sidebar ? 'off' : 'on' }` } />\n              &emsp;{ state.sidebar ? 'Close' : 'Open' } file browser\n            </span>\n            <span\n              className=\"dropdown-item anchor\"\n              onClick={ () => {\n                view.current.click();\n                halfmoon.toggleDarkMode();\n                setGlobalSettings({ dark: !dark });\n              } }\n            >\n              <i className={ `fa fa-${ dark ? 'sun' : 'moon' }` } />\n              &emsp;Toggle { dark ? 'light' : 'dark' } mode\n            </span>\n          </div>\n        </li>\n      </ul>\n      <div className=\"navbar-content ml-auto\">\n        <Link to=\"/\" className=\"btn btn-danger\">\n          <i className=\"fa fa-sign-out-alt\" />\n          &emsp;Exit Workstation\n        </Link>\n      </div>\n    </nav>\n  );\n};\n\nconst mapStateToProps = state => ({\n  dark: state.globalSettings.dark\n});\n\nconst mapDispatchToProps = dispatch => ({\n  uploadFile: async (name, raw) => dispatch(await uploadFile(name, raw)),\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Toolbar);\n","import { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { focusWindow } from '../../actions';\n\nconst FileBrowser = ({ files, focusWindow }) => {\n  const [state, setState] = useState({ content: null });\n\n  const handleFocus = name => () => focusWindow(name);\n\n  useEffect(() => {\n    if (files.length) {\n      setState({\n        ...state,\n        content: (\n          files.map(file => (\n            <span key={ `anchor-${ file.name }` } data-toggle=\"modal\" data-target={ `modal-${ file.name }` } onClick={ handleFocus(`#modal-${ file.name }`) } className=\"sidebar-link sidebar-link-with-icon anchor\">\n              <span className=\"sidebar-icon\">\n                <i className=\"fa fa-file-csv\" />\n              </span>\n              { file.name }\n            </span>\n          ))\n        )\n      })\n    }\n  }, [files]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebar-menu\">\n        <h5 className=\"sidebar-title\">\n          <i className=\"fa fa-folder\"/>\n          &emsp;Files\n        </h5>\n        <hr className=\"sidebar-divider\"/>\n        { state.content }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  focusWindow: payload => dispatch(focusWindow(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FileBrowser);\n","import { INITIAL_CHANNEL_SETTINGS } from './state';\n\nexport const TRACK_CONTROLS_WIDTH = 4;\nexport const TRACK_WIDTH = 12 - TRACK_CONTROLS_WIDTH;\n\nexport const FEATURES = INITIAL_CHANNEL_SETTINGS.features.map(f => f.name);\n\nexport const KEYS = {\n  'C': 'C Major',\n  'c': 'C Minor',\n  'C#': 'C# Major',\n  'c#': 'C# Minor',\n  'D': 'D Major',\n  'd': 'D Minor',\n  'Eb': 'E&#9837; Major',\n  'eb': 'E&#9837; Minor',\n  'E': 'E Major',\n  'e': 'E Minor',\n  'F': 'F Major',\n  'f': 'F Minor',\n  'F#': 'F# Major',\n  'f#': 'F# Minor',\n  'G': 'G Major',\n  'g': 'G Minor',\n  'Ab': 'A&#9837; Major',\n  'ab': 'A&#9837; Minor',\n  'A': 'A Major',\n  'a': 'A Minor',\n  'Bb': 'B&#9837; Major',\n  'bb': 'B&#9837; Minor',\n  'B': 'B Major',\n  'b': 'B Minor',\n  'chromatic': 'Chromatic',\n  'whole': 'Whole Tone',\n  'penta': 'Pentatonic', // TODO: More keys\n  'harmonic': 'Harmonic Minor', // TODO: More keys\n  'none': 'None'\n};\n\nexport const NOTES = {\n  'a': 0,\n  'a#': 1,\n  'bb': 1,\n  'b': 2,\n  'cb': 2,\n  'b#': 3,\n  'c': 3,\n  'c#': 4,\n  'db': 4,\n  'd': 5,\n  'd#': 6,\n  'eb': 6,\n  'e': 7,\n  'fb': 7,\n  'e#': 8,\n  'f': 8,\n  'f#': 9,\n  'gb': 9,\n  'g': 10,\n  'g#': 11,\n  'ab': 11\n};\n\nexport const SCALES = {\n  'C': ['c', 'd', 'e', 'f', 'g', 'a', 'b'],\n  'c': ['c', 'd', 'eb', 'f', 'g', 'ab', 'bb'],\n  'C#': ['c#', 'd#', 'e#', 'f#', 'g#', 'a#', 'b#'],\n  'c#': ['c#', 'd#', 'e', 'f#', 'g#', 'a', 'b'],\n  'D': ['d', 'e', 'f#', 'g', 'a', 'b', 'c#'],\n  'd': ['d', 'e', 'f', 'g', 'a', 'bb', 'c'],\n  'Eb': ['eb', 'f', 'g', 'ab', 'bb', 'c', 'd'],\n  'eb': ['eb', 'f', 'gb', 'ab', 'bb', 'cb', 'db'],\n  'E': ['e', 'f#', 'g#', 'a', 'b', 'c#', 'd#'],\n  'e': ['e', 'f#', 'g', 'a', 'b', 'c', 'd'],\n  'F': ['f', 'g', 'a', 'bb', 'c', 'd', 'e'],\n  'f': ['f', 'g', 'ab', 'bb', 'c', 'db', 'eb'],\n  'F#': ['f#', 'g#', 'a#', 'b', 'c#', 'd#', 'e'],\n  'f#': ['f#', 'g#', 'a', 'b', 'c#', 'd', 'e'],\n  'G': ['g', 'a', 'b', 'c', 'd', 'e', 'f#'],\n  'g': ['g', 'a', 'bb', 'c', 'd', 'eb', 'f'],\n  'Ab': ['ab', 'bb', 'c', 'db', 'eb', 'f', 'g'],\n  'ab': ['ab', 'bb', 'cb', 'db', 'eb', 'fb', 'gb'],\n  'A': ['a', 'b', 'c#', 'd', 'e', 'f#', 'g#'],\n  'a': ['a', 'b', 'c', 'd', 'e', 'f', 'g'],\n  'Bb': ['bb', 'c', 'd', 'eb', 'f', 'g', 'a'],\n  'bb': ['bb', 'c', 'db', 'eb', 'f', 'gb', 'ab'],\n  'B': ['b', 'c#', 'd#', 'e', 'f#', 'g#', 'a#'],\n  'b': ['b', 'c#', 'd', 'e', 'f#', 'g', 'a'],\n  'chromatic': ['c', 'c#', 'd', 'd#', 'e', 'f', 'f#', 'g', 'g#', 'a', 'a#', 'b'],\n  'whole': ['c', 'd', 'e', 'f#', 'g#', 'a#'],\n  'penta': ['c', 'd', 'e', 'g', 'a'], // TODO: More keys\n  'harmonic': ['a', 'b', 'c', 'd', 'e', 'f', 'g#'], // TODO: More keys\n  'none': [],\n}\n","import { connect } from 'react-redux';\nimport { setSettings, deleteTrack, focusWindow } from '../../actions';\n\nconst Settings = ({ column, i, tracks, setSettings, deleteTrack, focusWindow }) => {\n  const handleMute = () => setSettings(i, { mute: !tracks[i].settings.mute });\n  const handleVolume = e => setSettings(i, { volume: e.target.value });\n  const handlePan = e => setSettings(i, { pan: Math.abs(e.target.value) < 5 ? 0 : parseInt(e.target.value) });\n  const handleDelete = () => deleteTrack(i);\n  const handleClick = () => focusWindow(`#sonification-${ tracks[i].name }-${ i }`);\n\n  return (\n    <details className=\"collapse-panel\">\n      <summary className=\"collapse-header\">\n        <i className=\"fa fa-cog\"/>\n        &emsp;Settings\n      </summary>\n      <div className=\"collapse-content\">\n        {\n          tracks[i].settings.channel.length > 0 ? null : (\n            <>\n              <h6 className=\"font-weight-semi-bold\">Volume</h6>\n              <div className=\"row\">\n                <div className=\"col-3\">\n                  <div className=\"custom-switch\">\n                    <input type=\"checkbox\" id={ `${ column }-row-${ i }-mute` } checked={ !tracks[i].settings.mute } onChange={ handleMute } />\n                    <label htmlFor={ `${ column }-row-${ i }-mute` }> </label>\n                  </div>\n                </div>\n                <div className=\"col-9\">\n                  <div className=\"h-full d-flex align-content-start\">\n                    <input disabled={ tracks[i].settings.mute } className={ tracks[i].settings.mute ? 'disabled' : '' } type=\"range\" min=\"0\" max=\"100\" defaultValue=\"100\" onMouseUp={ handleVolume } />\n                  </div>\n                </div>\n              </div>\n              <br />\n              <hr />\n              <h6 className=\"font-weight-semi-bold\">Pan</h6>\n              <div className=\"h-full d-flex align-content-start\">\n                <input type=\"range\" min=\"-50\" max=\"50\" value={ tracks[i].settings.pan } onChange={ handlePan } />\n              </div>\n              <br />\n              <hr />\n            </>\n          )\n        }\n        <button onClick={ handleClick } data-toggle=\"modal\" data-target={ `sonification-${ tracks[i].name.replace(/\\s/g, '-') }-${ i }` } className=\"btn btn-block btn-primary\">Sonification Settings (Advanced)</button>\n        <br />\n        <hr />\n        <button onClick={ handleDelete } className=\"btn btn-block btn-danger\">\n          <i className=\"fa fa-trash\" />\n          &emsp;Delete Track\n        </button>\n      </div>\n    </details>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setSettings: (id, settings) => dispatch(setSettings(id, settings)),\n  deleteTrack: id => dispatch(deleteTrack(id)),\n  focusWindow: window => dispatch(focusWindow(window))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\n","import { useState, useEffect, createRef } from 'react';\nimport * as d3 from 'd3';\nimport { connect } from 'react-redux';\n\nlet height = -1;\n\nconst TrackData = ({ dark, tracks, id }) => {\n  const svg = createRef();\n  const xAxis = createRef();\n  const yAxis = createRef();\n\n  const [state, setState] = useState({ graph: '' });\n\n  const data = tracks.find(t => t.id === id).data.map((d, i) => [i, d]);\n\n  useEffect(() => {\n    const width = getComputedStyle(svg.current).width;\n\n    if (height < 0) {\n      height = getComputedStyle(svg.current).height;\n    }\n\n    const x = d3.scaleLinear()\n      .domain(d3.extent(data, datum => datum[0]))\n      .range([30, parseFloat(width.slice(0, width.length - 2))]);\n    const y = d3.scaleLinear()\n      .domain(d3.extent(data, datum => datum[1]))\n      .range([parseFloat(height.slice(0, height.length - 2)) - 20, 0]);\n\n    if (data.every(datum => !isNaN(datum[1]))) {\n      const line = d3.line()\n        .x(data => x(data[0]))\n        .y(data => y(data[1]));\n\n      setState({ ...state, graph: line(data) });\n\n      const axes = [\n        d3.axisBottom()\n          .scale(x)\n          .ticks(0),\n        d3.axisLeft()\n          .scale(y)\n      ];\n\n      d3.select(xAxis.current).call(axes[0]);\n      d3.select(yAxis.current).call(axes[1]);\n    } else {\n      // TODO: Implement histogram\n    }\n\n    xAxis.current.style.transform = `translateY(calc(${ height } - 20px))`;\n    yAxis.current.style.transform = 'translateX(30px)';\n  }, [tracks]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <svg className=\"track-graph\" ref={ svg }>\n      <g className=\"graph-content\">\n        <g className=\"x\" ref={ xAxis } />\n        <g className=\"y\" ref={ yAxis } />\n        <g className=\"line\">\n          {/* TODO: Make responsive */}\n          <path d={ state.graph } fill=\"none\" stroke={ dark ? 'white' : 'black' } />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nconst mapStateToProps = state => ({\n  dark: state.globalSettings.dark,\n  tracks: state.tracks\n});\n\nexport default connect(mapStateToProps)(TrackData);\n","import { TRACK_CONTROLS_WIDTH, TRACK_WIDTH } from '../../constants/workstation';\nimport Settings from './Settings';\nimport TrackData from './TrackData';\n\nconst Track = ({ i, id, column, name }) => (\n  <div className=\"row row-eq-spacing\">\n    <div className={ `col-${ TRACK_CONTROLS_WIDTH }` }>\n      <div className=\"card track\">\n        <h2 className=\"card-title\">Track { i + 1 } - { column }</h2>\n        <p className=\"text-muted\">{ name }</p>\n        <Settings column={ column } i={ i } />\n      </div>\n    </div>\n    <div className={ `col-${ TRACK_WIDTH }` }>\n      <div className=\"card track overflow-scroll d-flex align-content-center\">\n        <TrackData id={ id } />\n      </div>\n    </div>\n  </div>\n);\n\nexport default Track;\n","import { connect } from 'react-redux';\nimport Track from './Track';\n\nconst Main = ({ files, tracks }) => {\n  let t = [];\n  tracks.forEach(({ file, name, id }) => {\n    for (const f of files) {\n      if (f.name === file) {\n        t.push({ file: f, column: name, id });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className=\"content-wrapper\">\n      <div className={ `container-fluid ${ tracks.length ? '' : 'h-full' }` }>\n        {\n          t.length ?\n            t.map(({ file, column, id }, i) =>\n              <Track key={ `${ column }-row-${ i }` } i={ i } id={ id } column={ column } name={ file.name } />\n            ) : (\n              <div className=\"d-flex justify-content-center align-items-center h-full\">\n                <div className=\"text-center\">\n                  <i className=\"fa fa-music icon-lg\" />\n                  <p className=\"font-size-20\">Nothing to see here..., open a <kbd>.csv</kbd> file to get started!</p>\n                </div>\n              </div>\n            )\n        }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files,\n  tracks: state.tracks\n});\n\nexport default connect(mapStateToProps)(Main);\n","import { useState, useEffect, useRef, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { focusWindow } from '../../../actions';\n\nconst Window = ({ anchor, buttons, children, title, windows, focusWindow, onClose, width }) => {\n  if (!buttons) {\n    buttons = [];\n  }\n  if (!onClose) {\n    onClose = () => null;\n  }\n\n  const win = createRef();\n  const dialog = createRef();\n  const initial = useRef({ x: null, y: null });\n\n  const [state, setState] = useState({ x: null, y: null, offsetX: null, offsetY: null, click: false, zIndex: -1000 });\n\n  useEffect(() => {\n    setState({\n      ...state,\n      x: dialog.current.offsetLeft,\n      initial: {\n        x: dialog.current.offsetLeft,\n        y: dialog.current.offsetTop\n      }\n    });\n\n    initial.current = {\n      x: dialog.current.offsetLeft,\n      y: dialog.current.offsetTop\n    };\n\n    win.current.style.height = `${ dialog.current.getBoundingClientRect().height }px`;\n    win.current.style.width = `${ dialog.current.getBoundingClientRect().width }px`;\n\n    focusWindow(`#${ anchor }`);\n  }, []);  // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (win.current.classList.contains('show')) {\n      setState({ ...state, zIndex: 100 + windows.length - windows.indexOf(`#${ anchor }`), x: initial.current.x, y: initial.current.y });\n    } else {\n      onClose();\n      setState({ ...state, zIndex: -1000 });\n    }\n  }, [windows]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleMouseDown = e => {\n    focusWindow(`#${ anchor }`);\n    setState({ ...state, offsetX: e.clientX - state.x, offsetY: e.clientY - state.y, click: true });\n  };\n  const handleDrag = e => {\n    if (state.click) {\n      setState({ ...state, x: e.clientX - state.offsetX, y: e.clientY - state.offsetY });\n    }\n  };\n  const handleMouseUp = () => setState({ ...state, click: false });\n  const resetPosition = () => setState({...state, x: initial.current.x, y: null});\n\n  return (\n    <div className=\"modal window\" id={ anchor } tabIndex=\"-1\" role=\"dialog\" style={ { top: state.y, left: state.x, zIndex: state.zIndex } } ref={ win } data-overlay-dismissal-disabled=\"true\" data-esc-dismissal-disabled=\"true\">\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\" ref={ dialog } style={ { width: width ? width: null } }>\n          <h5 className=\"modal-title window-title\" onMouseDown={ handleMouseDown } onMouseMove={ handleDrag } onMouseUp={ handleMouseUp }>\n            <button className=\"btn btn-square rounded-circle custom-modal-dismiss red\" onClick={ resetPosition } data-dismiss=\"modal\">&#160;</button>\n            &nbsp;&nbsp;\n            {\n              buttons.map(({ close, color, onClick, disabled }, i) =>\n                <span key={ `btn-${ anchor }-${ i }` }>\n                  <button className={ `btn btn-square rounded-circle custom-modal-dismiss ${ color }` } onClick={ () => { onClick(); if (close) resetPosition(); } } data-dismiss={ close ? 'modal' : null } disabled={ disabled }>&#160;</button>\n                  &nbsp;&nbsp;\n                </span>\n              )\n            }\n            <br />{ title }\n          </h5>\n          <div>{ children }</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  windows: state.windows\n});\n\nconst mapDispatchToProps = dispatch => ({\n  focusWindow: payload => dispatch(focusWindow(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Window);\n","import { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { addTrack } from '../../../actions';\nimport Window from './Window';\n\nconst AddTrack = ({ anchor, track, files, addTrack }) => {\n  const [state, setState] = useState({ column: '' });\n\n  const file = files.find(file => file.name === track);\n\n  const handleSelect = e => setState({ ...state, column: e.target.value });\n  const handleSubmit = () => {\n    if (state.column !== '') {\n      addTrack(state.column, file.name, file.data.map(row => row[state.column]));\n      setState({ ...state, column: '' });\n    }\n  };\n\n  return (\n    <Window anchor={ anchor } buttons={ [{ close: true, color: state.column === '' ? '' : 'green', onClick: handleSubmit, disabled: state.column === '' }] } title=\"Add Track\">\n      <select className=\"form-control form-control-lg\" value={ state.column } onChange={ handleSelect }>\n        <option value=\"\" disabled>Select a column</option>\n        { Object.keys(file.data[0]).map(column => <option key={ `column-${ column }` } value={ column }>{ column }</option>) }\n      </select>\n    </Window>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addTrack: (name, file, data) => dispatch(addTrack(name, file, data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddTrack);\n","import Window from './Window';\n\nconst Info = ({ title, children }) => {\n  return (\n    <Window anchor=\"help-window\" title={ `Info: ${ title }` }>\n      { children ? children : <div className=\"p-20 m-20\" /> }\n    </Window>\n  );\n};\n\nexport default Info;\n","import { useState, createRef, useEffect } from 'react';\nimport Window from './Window';\nimport { connect } from 'react-redux';\nimport { FEATURES } from '../../../constants/workstation';\nimport { setGlobalSettings } from '../../../actions';\n\nconst deselect = e => Array.from(e.children).forEach(child => {\n  if (child.classList.contains('active')) {\n    child.classList.remove('active');\n  }\n});\n\nconst Channel = ({ anchor, title, i, tracks, channels, setGlobalSettings }) => {\n  const [state, setState] = useState({ selected: -1 });\n\n  const ul = createRef();\n  const channel = state.selected < 0 ? { features: [] } : channels.find(c => c.id === state.selected);\n\n  useEffect(() => {\n    if (state.selected === -1) {\n      deselect(ul.current);\n    }\n  }, [state.selected]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (tracks[i].settings.channel.length <= state.selected) {\n      setState({ ...state, selected: -1 });\n    }\n  }, [tracks[i].settings.channel]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleChannel = channel => e => {\n    deselect(e.target.parentElement.parentElement);\n    e.target.parentElement.classList.add('active');\n    setState({ ...state, selected: channel });\n  };\n\n  const handleFeature = e => {\n    const c = [...channels];\n    const index = channels.findIndex(ch => ch.id === state.selected);\n    if (!e.target.classList.contains('btn-primary')) {\n      e.target.classList.add('btn-primary');\n      c[index].features.find(f => f.name === e.target.innerText.trim()).controller = i;\n    } else {\n      e.target.classList.remove('btn-primary');\n      c[index].features.find(f => f.name === e.target.innerText.trim()).controller = -1;\n    }\n    setGlobalSettings({ channels: c });\n  };\n\n  const handleClose = () => setState({ ...state, channel: -1 });\n\n  return (\n    <Window anchor={ anchor } title={ `${ title }: Channel Settings` } onClose={ handleClose }>\n      <nav>\n        <ul className=\"pagination text-center\" ref={ ul }>\n          <li className=\"page-item\">\n            <button className=\"page-link\">\n              <i className=\"fa fa-angle-left\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Previous</span>\n            </button>\n          </li>\n          { tracks[i].settings.channel.map(i => <li key={ `pagination-${ i }` } className=\"page-item\"><button className=\"page-link\" onClick={ handleChannel(i) }>{ i }</button></li>) }\n          <li className=\"page-item\">\n            <button className=\"page-link\">\n              <i className=\"fa fa-angle-right\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Next</span>\n            </button>\n          </li>\n        </ul>\n      </nav>\n      <div className={ state.selected === -1 ? 'transparent' : '' }>\n        <h5 className=\"font-weight-bold\">Channel { state.selected } Controlled Features</h5>\n        {\n          FEATURES.map(f => {\n            const feature = channel.features.find(f2 => f2.name === f);\n            if ([-1, i].includes(feature?.controller)) {\n              return <button key={ f } className=\"btn ml-5\" onClick={ handleFeature }>{ f }</button>;\n            }\n            return null;\n          })\n        }\n      </div>\n    </Window>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks,\n  channels: state.globalSettings.channels\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: settings => dispatch(setGlobalSettings(settings))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Channel);\n","export const channel =\n  <p>Channels group tracks into one output, allowing for tracks to affect different aspects of the sonification.</p>;\n\nexport const data =\n  <p>Select a subset of the data to sonify.</p>;\n","import { useState, useEffect } from 'react';\nimport Window from './Window';\nimport Info from './Info';\nimport Channel from './Channel';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings, setSettings, focusWindow, setData } from '../../../actions';\nimport { channel, data as dataInfo } from '../../../helper/info';\nimport { chunkify, removeOutliers } from '../../../helper/processing';\nimport { INITIAL_CHANNEL_SETTINGS } from '../../../constants/state';\n\nconst select = (e, dark) => {\n  if (dark) {\n    e.style.background = 'var(--dm-table-primary-bg-color)';\n    e.style.color = 'var(--dm-table-primary-text-color)';\n    e.style.rowBorder = 'var(--dm-table-primary-row-border-color)';\n    e.style.cellBorder = 'var(--dm-table-primary-cell-border-color)';\n  } else {\n    e.style.background = 'var(--lm-table-primary-bg-color)';\n    e.style.color = 'var(--lm-table-primary-text-color)';\n    e.style.rowBorder = 'var(--lm-table-primary-row-border-color)';\n    e.style.cellBorder = 'var(--lm-table-primary-cell-border-color)';\n  }\n};\n\nconst Sonification = ({ anchor, trackno, tracks, setSettings, globalSettings, setGlobalSettings, focusWindow, setData, files }) => {\n  const [state, setState] = useState({ title: '', children: null, segment: '', data: [...tracks[trackno].data] });\n\n  useEffect(() => {\n    Array.from(document.getElementsByClassName('datum-selected')).forEach(e => select(e, globalSettings.dark));\n  }, [globalSettings.dark]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleContinuousOrDiscrete = e => setSettings(trackno, { continuous: e.target.checked });\n\n  const handleAdd = () => setGlobalSettings({ channels: [...globalSettings.channels, { ...INITIAL_CHANNEL_SETTINGS, id: globalSettings.channels.length }] });\n\n  const handleChannel = i => e => {\n    if (e.target.classList.contains('btn-primary')) {\n      e.target.classList.remove('btn-primary');\n\n      const temp = [...tracks[trackno].settings.channel];\n      temp.splice(tracks[trackno].settings.channel.indexOf(i), 1);\n      setSettings(trackno, { channel: temp });\n\n      const temp2 = [...globalSettings.channels];\n      temp2[i].tracks.splice(temp2[i].tracks.indexOf(trackno), 1);\n      setGlobalSettings({ channels: temp2 });\n    } else {\n      e.target.classList.add('btn-primary');\n      setSettings(trackno, { channel: [...tracks[trackno].settings.channel, i].sort((a, b) => a - b) });\n\n      const temp = [...globalSettings.channels];\n      temp[i].tracks = [...temp[i].tracks, trackno];\n      setGlobalSettings({ channels: temp });\n    }\n  };\n\n  const handlePoint = (datum, i) => e => {\n    const temp = tracks[trackno].data;\n\n    if (e.target.classList.contains('datum-selected')) {\n      e.target.classList.remove('datum-selected');\n      e.target.style.background = null;\n      e.target.style.color = null;\n      e.target.style.rowBorder = null;\n      e.target.style.cellBorder = null;\n\n      temp.splice(i, 1);\n      setData(trackno, temp);\n    } else {\n      e.target.classList.add('datum-selected');\n      select(e.target, globalSettings.dark);\n      temp.splice(i, 0, datum);\n      setData(trackno, temp);\n    }\n  };\n\n  const handleInfo = (title, children) => () => {\n    setState({ ...state, title, children });\n    focusWindow('#help-window');\n  };\n\n  const handleOutliers = () => setData(trackno, removeOutliers(tracks[trackno].data));\n\n  const handleRestore = () => {\n    setData(trackno, files.find(f => f.name === tracks[trackno].file).data.map(row => isNaN(row[tracks[trackno].name]) ? row[tracks[trackno].name] : parseFloat(row[tracks[trackno].name])));\n    setState({ ...state, segment: '' });\n  };\n\n  const handleSegment = e => {\n    setData(trackno, chunkify(tracks[trackno].data, e.target.value));\n    setState({ ...state, segment: e.target.value });\n  };\n\n  return (\n    <>\n      <Window anchor={ anchor } title={ `${ tracks[trackno].name }: Sonification Settings` } width=\"50vw\">\n        <h5 className=\"font-weight-bold d-flex align-items-baseline\">\n          Connect to Channel&emsp;\n          <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" onClick={ handleInfo('Connect to Channel', channel) } />\n        </h5>\n        <div className=\"w-full\">\n          <button className=\"btn btn-square btn-primary m-5\" onClick={ handleAdd }>+</button>\n          { [...globalSettings.channels].map((_, i) => <button key={ `channel-${ i }` } className=\"btn btn-square m-5\" onClick={ handleChannel(i) }>{ i }</button>) }\n        </div>\n        {\n          tracks[trackno].settings.channel.length === 0 ? null : (\n            <>\n              <br />\n              <div className=\"w-full\">\n                <button className=\"btn btn-primary ml-5\" data-toggle=\"modal\" data-target={ `channel-${ tracks[trackno].name.replace(/\\s/g, '-') }-${ trackno }` } onClick={ () => focusWindow(`#channel-${ tracks[trackno].name }-${ trackno }`) }>Channel Settings</button>\n              </div>\n            </>\n          )\n        }\n        <br />\n        <hr />\n        <h5 className=\"font-weight-bold d-flex align-items-baseline\">Data Processing</h5>\n        <h6 className=\"font-weight-semi-bold d-flex align-items-baseline\">\n          Data Points&emsp;\n          <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" onClick={ handleInfo('Data Points', dataInfo) } />\n        </h6>\n        <div className=\"w-full overflow-scroll\">\n          <table className=\"table\">\n            <tbody>\n              <tr>\n                <th>{ tracks[trackno].name }</th>\n                { state.data.map((datum, i) => <td key={ `data-${ i }` } className=\"anchor sonification-data-point is-primary datum-selected\" onClick={ handlePoint(datum, i) }>{ datum }</td>) }\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <br />\n        <div className=\"row\">\n          <div className=\"col-6\">\n            <button className=\"btn btn-primary\" onClick={ handleOutliers }>Remove Outliers</button>\n          </div>\n          <div className=\"col-6\">\n            <input className=\"form-control\" placeholder=\"Segmentation Size\" type=\"number\" min=\"1\" value={ state.segment } onChange={ handleSegment } />\n          </div>\n        </div>\n        <br />\n        <button className=\"btn btn-primary\" onClick={ handleRestore }>Restore Data</button>\n        <br />\n        {\n          tracks[trackno].settings.channel.length > 0 ? null : (\n            <>\n              <br />\n              <hr />\n              <h5 className=\"font-weight-bold d-flex align-items-baseline\">\n                { tracks[trackno].settings.continuous ? 'Continuous' : 'Discrete' }&emsp;\n                <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" />\n              </h5>\n              <div className=\"d-flex w-full justify-items-center align-items-center\">\n                <div className=\"custom-switch\">\n                  <input type=\"checkbox\" id={ `continuous-${ anchor }` } value={ tracks[trackno].settings.continuous } onChange={ handleContinuousOrDiscrete } />\n                  <label htmlFor={ `continuous-${ anchor }` } />\n                </div>\n              </div>\n            </>\n          )\n        }\n      </Window>\n      <Info title={ state.title }>\n        { state.children }\n      </Info>\n      <Channel anchor={ `channel-${ tracks[trackno].name.replace(/\\s/g, '-') }-${ trackno }` } title={ tracks[trackno].name } i={ trackno } />\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks,\n  globalSettings: state.globalSettings,\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setSettings: (id, settings) => dispatch(setSettings(id, settings)),\n  setGlobalSettings: settings => dispatch(setGlobalSettings(settings)),\n  focusWindow: window => dispatch(focusWindow(window)),\n  setData: (id, data) => dispatch(setData(id, data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sonification);\n","import {\n  UPLOAD_FILE,\n  ADD_TRACK,\n  SET_SETTINGS,\n  SET_GLOBAL_SETTINGS, FOCUS_WINDOW, DELETE_TRACK, INITIAL_STATE, INITIAL_SETTINGS, SET_DATA\n} from '../constants/state';\n\nconst rootReducer = (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case UPLOAD_FILE:\n      return Object.assign({}, state, {\n        files: [...state.files, action.payload]\n      });\n    case ADD_TRACK:\n      return Object.assign({}, state, {\n        tracks: [...state.tracks, { ...action.payload, settings: { ...INITIAL_SETTINGS }, id: state.tracks.length }],\n      });\n    case SET_SETTINGS:\n      return Object.assign({}, state, {\n        tracks: state.tracks.map(t => action.payload.id === t.id ? { ...t, settings: { ...t.settings, ...action.payload.settings } } : t)\n      });\n    case SET_GLOBAL_SETTINGS:\n      return Object.assign({}, state, {\n        globalSettings: { ...state.globalSettings, ...action.payload }\n      });\n    case FOCUS_WINDOW:\n      const focusIndex = state.windows.indexOf(action.payload);\n      if (focusIndex >= 0) {\n        return Object.assign({}, state, {\n          windows: [action.payload, ...state.windows.slice(0, focusIndex), ...state.windows.slice(focusIndex + 1, state.windows.length)]\n        });\n      }\n      return Object.assign({}, state, {\n        windows: [action.payload, ...state.windows]\n      });\n    case DELETE_TRACK:\n      let i = 0;\n      for (const t of state.tracks) {\n        if (action.payload === t.id) {\n          break;\n        }\n        i++;\n      }\n      return Object.assign({}, state, {\n        tracks: [...state.tracks.slice(0, i), ...state.tracks.slice(i + 1, state.tracks.length)],\n      });\n    case SET_DATA:\n      return Object.assign({}, state, {\n        tracks: state.tracks.map(t => {\n          if (t.id !== action.payload.id) {\n            return t;\n          }\n          return { ...t, data: action.payload.data };\n        })\n      });\n    default:\n      return state;\n  }\n};\n\nexport default rootReducer;\n","import { createStore } from '@reduxjs/toolkit';\nimport rootReducer from '../reducers/index';\n\nconst store = createStore(rootReducer);\n\nexport default store;","import { connect } from 'react-redux';\nimport { setGlobalSettings } from '../../actions';\nimport { KEYS } from '../../constants/workstation';\nimport { play, pause, stop } from '../../synth/synth';\n\nconst Controls = ({ globalSettings, setGlobalSettings, tracks }) => {\n  const hasTracks = tracks.length !== 0;\n\n  const handleBPM = e => setGlobalSettings({ bpm: e.target.value.length === 0 ? 30 : parseInt(e.target.value) });\n\n  const handleKey = e => setGlobalSettings({ key: e.target.value });\n\n  const handleTimesig = top => e => setGlobalSettings({\n    timesig: top ? [e.target.value, globalSettings.timesig[1]] : Number.isInteger(Math.log(e.target.value) / Math.log(2)) ? [globalSettings.timesig[0], e.target.value] : [...globalSettings.timesig]\n  });\n\n  const handleBPMToggle = () => setGlobalSettings({ bpm: globalSettings.bpm > 0 ? -1 : 120 });\n\n  const handleTimesigToggle = () => setGlobalSettings({ timesig: globalSettings.timesig[0] > 0 ? [-1, -1] : [4, 4] });\n\n  const handlePlay = e => {\n    if (e.target.classList.contains('btn-danger')) {\n      e.target.classList.add('btn-success');\n      e.target.classList.remove('btn-danger');\n\n      stop();\n    } else if (e.target.classList.contains('btn-secondary')) {\n      e.target.classList.add('btn-danger');\n      e.target.classList.remove('btn-secondary');\n\n      pause();\n    } else {\n      e.target.classList.add('btn-danger'); // TODO: fix\n      e.target.classList.remove('btn-success');\n\n      const output = [];\n\n      tracks.forEach(t => {\n        if (t.settings.channel.length === 0) {\n          output.push(t);\n        } else {\n          // TODO: Do something\n        }\n      });\n\n      (async () => {\n        await play(output, globalSettings);\n      })();\n    }\n  };\n\n  return (\n    <nav className=\"navbar navbar-fixed-bottom controls\">\n      <div className=\"navbar-content w-full\">\n        <div className=\"row w-full\">\n          <div className=\"col-4\">\n            <div className=\"row h-full\">\n              <div className=\"col-6 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg\" data-toggle=\"dropdown\" type=\"button\" id=\"bpm-dropup\">\n                      <i className=\"fa fa-drum\"/>\n                      &emsp;BPM: <span className=\"text-monospace\">{ globalSettings.bpm < 0 ? 'N/A' : globalSettings.bpm }</span>\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"bpm-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group w-full\">\n                          <label htmlFor=\"bpm\">Set BPM</label>\n                          <br />\n                          <div className=\"custom-switch align-self-center\">\n                            <input type=\"checkbox\" id=\"bpm-toggle\" checked={ globalSettings.bpm > 0 } onChange={ handleBPMToggle } />\n                            <label htmlFor=\"bpm-toggle\" />\n                          </div>\n                          <br />\n                          <input type={ globalSettings.bpm < 0 ? 'text' : 'number' } className=\"form-control\" id=\"bpm\" min=\"30\" max=\"240\" value={ globalSettings.bpm < 0 ? 'N/A' : globalSettings.bpm } disabled={ globalSettings.bpm < 0 } placeholder=\"BPM\" onChange={ handleBPM } />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-6 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg\" data-toggle=\"dropdown\" type=\"button\" id=\"key-dropup\">\n                      <i className=\"fa fa-hashtag\"/>\n                      &emsp;Key: { <span dangerouslySetInnerHTML={ { __html: KEYS[globalSettings.key] } } /> }\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"key-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"key\">Set Key</label>\n                          <select className=\"form-control\" id=\"key\" onChange={ handleKey }>\n                            { Object.keys(KEYS).map(k => <option value={ k } key={ k } dangerouslySetInnerHTML={ { __html: KEYS[k] } } />) }\n                          </select>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"w-full d-flex justify-content-center\">\n              <button className=\"btn btn-square rounded-circle btn-success play font-size-24\" type=\"button\" disabled={ !hasTracks } onClick={ handlePlay }>\n                { /*<i className=\"fa fa-play\" />*/ }\n                { /* TODO: Toggle button color */ }\n              </button>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"row h-full\">\n              <div className=\"col-12 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg d-flex align-items-center\" data-toggle=\"dropdown\" type=\"button\" id=\"timesig-dropup\">\n                      <i className=\"fa fa-stopwatch\"/>\n                      &emsp;Time Signature:&nbsp;\n                      <span className=\"supsub\">\n                        <sup>{ globalSettings.timesig[0] <= 0 ? 'N/A' : globalSettings.timesig[0] }</sup>\n                        <sub>{ globalSettings.timesig[1] <= 0 ? 'N/A' : globalSettings.timesig[1] }</sub>\n                      </span>\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"timesig-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"timesig\">Set Time Signature</label>\n                          <br />\n                          <div className=\"custom-switch align-self-center\">\n                            <input type=\"checkbox\" id=\"timesig-toggle\" checked={ globalSettings.timesig[0] > 0 } onChange={ handleTimesigToggle } />\n                            <label htmlFor=\"timesig-toggle\"> </label>\n                          </div>\n                          <br />\n                          <input type=\"number\" className=\"form-control\" id=\"timesig\" min=\"1\" max=\"20\" placeholder={ globalSettings.timesig[0] <= 0 ? 'N/A' : globalSettings.timesig[0] } onChange={ handleTimesig(true) } />\n                          <input type=\"number\" className=\"form-control\" id=\"timesig-bottom\" min=\"1\" max=\"32\" placeholder={ globalSettings.timesig[1] <= 0 ? 'N/A' : globalSettings.timesig[1] } onChange={ handleTimesig(false) } />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nconst mapStateToProps = state => ({\n  globalSettings: state.globalSettings,\n  tracks: state.tracks\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import { HashRouter, Route, Switch } from 'react-router-dom';\nimport Index from './components/Index';\nimport Workstation from './components/Workstation';\n\nconst App = () => {\n  return (\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\" component={ Index } />\n        <Route path=\"/workstation\" component={ Workstation } />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport store from './store';\r\nimport halfmoon from 'halfmoon';\r\nimport 'halfmoon/css/halfmoon-variables.min.css';\r\nimport './style.css';\r\n\r\nwindow.onload = () => halfmoon.onDOMContentLoaded();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={ store }>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}