{"version":3,"sources":["components/workstation/windows/Window.js","components/workstation/helper/synth.js","components/Workstation.js","components/Index.js","constants/state.js","actions/index.js","components/workstation/Toolbar.js","components/workstation/FileBrowser.js","constants/workstation.js","components/workstation/Settings.js","components/workstation/TrackData.js","components/workstation/Track.js","components/workstation/Main.js","components/workstation/windows/AddTrack.js","components/workstation/windows/Info.js","components/workstation/windows/Channel.js","components/workstation/helper/info.js","components/workstation/windows/Sonification.js","components/workstation/helper/processing.js","components/workstation/Controls.js","app.js","serviceWorker.js","reducers/index.js","store/index.js","index.js"],"names":["initial","context","dark","Index","className","to","UPLOAD_FILE","ADD_TRACK","SET_SETTINGS","SET_GLOBAL_SETTINGS","FOCUS_WINDOW","DELETE_TRACK","SET_DATA","INITIAL_STATE","files","tracks","globalSettings","bpm","key","timesig","includes","halfmoon","getPreferredMode","channels","windows","INITIAL_SETTINGS","mute","volume","pan","continuous","channel","INITIAL_CHANNEL_SETTINGS","setSettings","id","settings","type","payload","setGlobalSettings","focusWindow","window","connect","dispatch","uploadFile","name","data","csv","action","ref","file","createRef","edit","view","useState","sidebar","state","setState","data-toggle","aria-labelledby","htmlFor","accept","onChange","e","a","target","length","url","URL","createObjectURL","d3","value","current","click","onClick","toggleSidebar","toggleDarkMode","content","useEffect","map","data-target","FEATURES","KEYS","NOTES","SCALES","deleteTrack","column","i","checked","disabled","min","max","defaultValue","onMouseUp","Math","abs","parseInt","replace","height","svg","xAxis","yAxis","graph","find","t","d","width","getComputedStyle","x","domain","datum","range","parseFloat","slice","y","every","isNaN","line","axes","scale","ticks","call","style","transform","fill","stroke","Track","forEach","f","push","anchor","buttons","children","title","onClose","win","dialog","observer","MutationObserver","classList","contains","offsetX","offsetY","zIndex","offsetLeft","offsetTop","observe","attributes","attributeFilter","childList","characterData","getBoundingClientRect","indexOf","resetPosition","tabIndex","role","top","left","data-overlay-dismissal-disabled","data-esc-dismissal-disabled","onMouseDown","clientX","clientY","onMouseMove","data-dismiss","close","color","addTrack","columns","track","row","Info","deselect","Array","from","child","remove","features","ul","handleChannel","parentElement","add","aria-hidden","select","background","rowBorder","cellBorder","setData","trackno","segment","document","getElementsByClassName","temp","splice","temp2","sort","b","handlePoint","handleInfo","_","dataInfo","first","third","removeOutliers","placeholder","size","subTemp","j","chunkify","calculateFrequency","note","octave","hasTracks","handleTimesig","Number","isInteger","log","dangerouslySetInnerHTML","__html","Object","keys","k","undefined","suspend","output","resume","AudioContext","osc","OscillatorNode","gain","GainNode","destination","num","normalize","round","index","frequency","linearRampToValueAtTime","floor","currentTime","setValueAtTime","start","stop","c","console","play","keyPress","addEventListener","querySelector","toLowerCase","App","exact","path","component","Workstation","Boolean","location","hostname","match","rootReducer","assign","store","createStore","onload","onDOMContentLoaded","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ca8ae7d6.chunk.js","sourcesContent":["// TODO: Fix initial open location\n\nimport { useState, useEffect, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { focusWindow } from '../../../actions';\n\nlet first = true;\nlet initial;\n\nconst Window = ({ anchor, buttons, children, title, windows, focusWindow, onClose }) => {\n  if (!buttons) {\n    buttons = [];\n  }\n  if (!onClose) {\n    onClose = () => null;\n  }\n\n  const win = createRef();\n  const dialog = createRef();\n\n  const observer = new MutationObserver(e => {\n    if (e[0].target.classList.contains('show')) {\n      setState({ ...state, x: initial.x, y: initial.y });\n    } else {\n      onClose();\n    }\n  });\n\n  const [state, setState] = useState({ x: null, y: null, offsetX: null, offsetY: null, click: false, zIndex: -1000 });\n\n  useEffect(() => {\n    initial = {\n      x: dialog.current.offsetLeft,\n      y: dialog.current.offsetTop\n    };\n\n    setState({\n      ...state,\n      x: dialog.current.offsetLeft\n    });\n\n    observer.observe(win.current, {\n      attributes: true,\n      attributeFilter: ['class'],\n      childList: false,\n      characterData: false\n    });\n\n    win.current.style.height = `${ dialog.current.getBoundingClientRect().height }px`;\n    win.current.style.width = `${ dialog.current.getBoundingClientRect().width }px`;\n\n    focusWindow(`#${ anchor }`);\n  }, []);  // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    setState({ ...state, zIndex: win.current.classList.contains('show') ? 100 + windows.length - windows.indexOf(`#${ anchor }`) : -1000 });\n  }, [windows]) // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleMouseDown = e => {\n    focusWindow(`#${ anchor }`);\n    if (first) {\n      setState({ ...state, offsetX: e.clientX - state.x, offsetY: e.clientY - state.y, click: true });\n    } else {\n      setState({ ...state, click: true });\n    }\n  };\n  const handleDrag = e => {\n    if (state.click) {\n      setState({ ...state, x: e.clientX - state.offsetX, y: e.clientY - state.offsetY });\n    }\n  };\n  const handleMouseUp = () => setState({ ...state, click: false });\n  const resetPosition = () => setState({...state, x: initial.x, y: null});\n\n  return (\n    <div className=\"modal window\" id={ anchor } tabIndex=\"-1\" role=\"dialog\" style={ { top: state.y, left: state.x, zIndex: state.zIndex } } ref={ win } data-overlay-dismissal-disabled=\"true\" data-esc-dismissal-disabled=\"true\">\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\" ref={ dialog }>\n          <h5 className=\"modal-title window-title\" onMouseDown={ handleMouseDown } onMouseMove={ handleDrag } onMouseUp={ handleMouseUp }>\n            <button className=\"btn btn-square rounded-circle custom-modal-dismiss red\" onClick={ resetPosition } data-dismiss=\"modal\">&#160;</button>\n            &nbsp;&nbsp;\n            {\n              buttons.map(({ close, color, onClick, disabled }, i) =>\n                <span key={ `btn-${ anchor }-${ i }` }>\n                  <button className={ `btn btn-square rounded-circle custom-modal-dismiss ${ color }` } onClick={ () => { onClick(); if (close) resetPosition(); } } data-dismiss={ close ? 'modal' : null } disabled={ disabled }>&#160;</button>\n                  &nbsp;&nbsp;\n                </span>\n              )\n            }\n            <br />{ title }\n          </h5>\n          <div>{ children }</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  windows: state.windows\n});\n\nconst mapDispatchToProps = dispatch => ({\n  focusWindow: payload => dispatch(focusWindow(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Window);\n","import { NOTES, SCALES } from '../../../constants/workstation';\n\nlet context;\n\n// const synth = new WebAudioTinySynth({ internalContext: 0, quality: 1 });\n//\n// synth.setAudioContext(context);\n// synth.ready().then(() => {\n//\n// });\n\nexport const play = (data, globalSettings) => {\n  if (context) {\n    context.resume();\n  } else {\n    context = new AudioContext();\n\n    let bpm = globalSettings.bpm < 0 ? 60 : globalSettings.bpm;\n    let key = globalSettings.key === 'none' ? 'chromatic' : globalSettings.key;\n\n    data.forEach(d => {\n      if (d.settings.channel.length === 0) {\n        const osc = new OscillatorNode(context, { type: 'sine' });\n        const gain = new GainNode(context);\n        osc.connect(gain).connect(context.destination);\n        gain.gain.value = d.settings.mute ? 0 : d.settings.volume / 100 / data.length;\n\n        const max = Math.max(...d.data);\n        const min = Math.min(...d.data);\n        const num = SCALES[key].length * 2;\n        const normalize = x => Math.round(num / (max - min) * (x - min));\n\n        if (d.settings.continuous) {\n          d.data.forEach((datum, i) => {\n            const index = normalize(datum);\n            osc.frequency.linearRampToValueAtTime(calculateFrequency(SCALES[key][index % SCALES[key].length], 4 + Math.floor(index / SCALES[key].length)), context.currentTime + i * 60 / bpm);\n          });\n        } else {\n          d.data.forEach((datum, i) => {\n            const index = normalize(datum);\n            osc.frequency.setValueAtTime(calculateFrequency(SCALES[key][index % SCALES[key].length], 4 + Math.floor(index / SCALES[key].length)), context.currentTime + i * 60 / bpm);\n          });\n        }\n\n        osc.start();\n        osc.stop(context.currentTime + d.data.length * 60 / bpm);\n      }\n    });\n\n    globalSettings.channels.forEach(c => {\n      console.log(c);\n    });\n  }\n};\n\nexport const pause = () => context.suspend();\n\nexport const stop = () => {\n  context.close();\n  context = undefined;\n};\n\nconst calculateFrequency = (note, octave) => 440 * 2 ** (octave - (NOTES[note] > 2 ? 5 : 4)) * 2 ** (NOTES[note] / 12);\n","import { useEffect } from 'react';\nimport Toolbar from './workstation/Toolbar';\nimport FileBrowser from './workstation/FileBrowser';\nimport Main from './workstation/Main';\nimport AddTrack from './workstation/windows/AddTrack';\nimport Sonification from './workstation/windows/Sonification';\nimport Controls from './workstation/Controls';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings } from '../actions';\n\nlet dark;\n\nconst Workstation = ({ files, tracks, setGlobalSettings }) => {\n  const keyPress = keys => {\n    if (keys.length === 2 && keys[0] === 'shift' && keys[1] === 'd') {\n      dark = !dark;\n      setGlobalSettings({ dark });\n    }\n  };\n\n  useEffect(() => {\n    let keys = [];\n\n    document.addEventListener('keydown', e => {\n      if (!(document.querySelector('input:focus') || document.querySelector('textarea:focus') || document.querySelector('select:focus'))) {\n        keys.push(e.key.toLowerCase());\n        keyPress(keys);\n      }\n    });\n    document.addEventListener('keyup', e => {\n      if (!(document.querySelector('input:focus') || document.querySelector('textarea:focus') || document.querySelector('select:focus'))) {\n        keys.splice(keys.indexOf(e.key.toLowerCase()), 1);\n        keyPress(keys);\n      }\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div className=\"page-wrapper with-navbar with-sidebar with-navbar-fixed-bottom\">\n      <div className=\"sticky-alerts\" />\n      { files.map(({ name }) => <AddTrack key={ `modal-${ name }` } anchor={ `modal-${ name }` } track={ name } />) }\n      { tracks.map(({ file, name }, i) => <Sonification key={ `sonification-${ name }-${ i }` } anchor={ `sonification-${ name.replace(/\\s/g, '-') }-${ i }` } trackno={ i } />) }\n      <Toolbar />\n      <FileBrowser />\n      <Main />\n      <Controls />\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  dark = state.globalSettings.dark;\n  return ({\n    files: state.files,\n    tracks: state.tracks\n  })\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Workstation);\n","import { Link } from 'react-router-dom';\n\nconst Index = () => {\n  return (\n    <div className=\"page-wrapper with-navbar\">\n      <nav className=\"navbar\">\n        <span className=\"navbar-brand anchor\">\n          Ocean Memory Sonification\n        </span>\n        <ul className=\"navbar-nav d-none d-md-flex\">\n          <li className=\"nav-item\">\n            <Link to=\"/workstation\" className=\"nav-link\">Workstation</Link>\n          </li>\n        </ul>\n      </nav>\n      <div className=\"content-wrapper\">\n        Homepage\n      </div>\n    </div>\n  );\n};\n\nexport default Index;\n","import halfmoon from 'halfmoon';\n\nexport const UPLOAD_FILE = 'UPLOAD_FILE';\nexport const ADD_TRACK = 'ADD_TRACK';\nexport const SET_SETTINGS = 'SET_SETTINGS';\nexport const SET_GLOBAL_SETTINGS = 'SET_GLOBAL_SETTINGS';\nexport const FOCUS_WINDOW = 'FOCUS_WINDOW';\nexport const DELETE_TRACK = 'DELETE_TRACK';\nexport const SET_DATA = 'SET_DATA';\n\nexport const INITIAL_STATE = {\n  files: [],\n  tracks: [],\n  globalSettings: {\n    bpm: 120,\n    key: 'C',\n    timesig: [4, 4],\n    dark: ['dark-mode', 'not-set'].includes(halfmoon.getPreferredMode()),\n    channels: []\n  },\n  windows: []\n};\n\nexport const INITIAL_SETTINGS = {\n  mute: false,\n  volume: 100,\n  pan: 0,\n  continuous: false,\n  channel: []\n};\n\nexport const INITIAL_CHANNEL_SETTINGS = {\n  continuous: false,\n  tracks: []\n};\n","import {\n  UPLOAD_FILE,\n  ADD_TRACK,\n  SET_SETTINGS,\n  SET_GLOBAL_SETTINGS, FOCUS_WINDOW, DELETE_TRACK, SET_DATA\n} from '../constants/state';\n\nexport const uploadFile = (name, data) => ({\n  type: UPLOAD_FILE,\n  payload: { name, csv: data } // TODO: Refactor CSV to data\n});\n\nexport const addTrack = (name, file, data) => ({\n  type: ADD_TRACK,\n  payload: { name, file, data }\n});\n\nexport const setSettings = (id, settings) => ({\n  type: SET_SETTINGS,\n  payload: { id, settings }\n});\n\nexport const setGlobalSettings = settings => ({\n  type: SET_GLOBAL_SETTINGS,\n  payload: settings\n});\n\nexport const focusWindow = window => ({\n  type: FOCUS_WINDOW,\n  payload: window\n});\n\nexport const deleteTrack = id => ({\n  type: DELETE_TRACK,\n  payload: id\n});\n\nexport const setData = (id, data) => ({\n  type: SET_DATA,\n  payload: { id, data }\n});\n","import { createRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport halfmoon from 'halfmoon';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings, uploadFile } from '../../actions';\n\nconst handleUpload = (action, ref) => async e => {\n  if (e.target.files.length) {\n    const url = URL.createObjectURL(e.target.files[0]);\n    const csv = await d3.csv(url);\n    action(e.target.files[0].name, csv);\n    e.target.value = '';\n    ref.current.click();\n  }\n};\n\nconst Toolbar = ({ uploadFile, setGlobalSettings }) => {\n  const file = createRef();\n  const edit = createRef();\n  const view = createRef();\n  const [state, setState] = useState({ sidebar: true, dark: halfmoon.getPreferredMode() === 'dark-mode' });\n  return (\n    <nav className=\"navbar\">\n      <span className=\"navbar-brand anchor\">Workstation</span>\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ file }>File</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <label htmlFor=\"upload\" className=\"dropdown-item\">\n              <input type=\"file\" id=\"upload\" className=\"d-none\" accept=\"text/csv\" onChange={ handleUpload(uploadFile, file) } />\n              <i className=\"fa fa-folder-open\"/>\n              &emsp;Open\n            </label>\n            <span className=\"dropdown-item anchor\" onClick={ () => file.current.click() }>\n              <i className=\"fa fa-file-export\"/>\n              &emsp;Export\n            </span>\n          </div>\n        </li>\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ edit }>Edit</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <span className=\"dropdown-item anchor\" onClick={ () => edit.current.click() }>\n              <i className=\"fa fa-trash\"/>\n              &emsp;Delete Track\n            </span>\n            <span className=\"dropdown-item anchor\" onClick={ () => edit.current.click() }>\n              <i className=\"fa fa-trash\"/>\n              &emsp;Remove File\n            </span>\n          </div>\n        </li>\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ view }>View</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <span\n              className=\"dropdown-item anchor\"\n              onClick={ () => {\n                view.current.click();\n                halfmoon.toggleSidebar();\n                setState({ ...state, sidebar: !state.sidebar });\n              } }\n            >\n              <i className={ `fa fa-toggle-${ state.sidebar ? 'off' : 'on' }` } />\n              &emsp;{ state.sidebar ? 'Close' : 'Open' } file browser\n            </span>\n            <span\n              className=\"dropdown-item anchor\"\n              onClick={ () => {\n                view.current.click();\n                halfmoon.toggleDarkMode();\n                setGlobalSettings({ dark: !state.dark });\n                setState({ ...state, dark: !state.dark });\n              } }\n            >\n              <i className={ `fa fa-${ state.dark ? 'sun' : 'moon' }` } />\n              &emsp;Toggle { state.dark ? 'light' : 'dark' } mode\n            </span>\n          </div>\n        </li>\n      </ul>\n      <div className=\"navbar-content ml-auto\">\n        <Link to=\"/\" className=\"btn btn-danger\">\n          <i className=\"fa fa-sign-out-alt\" />\n          &emsp;Exit Workstation\n        </Link>\n      </div>\n    </nav>\n  );\n};\n\nconst mapDispatchToProps = dispatch => ({\n  uploadFile: (name, data) => dispatch(uploadFile(name, data)),\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(null, mapDispatchToProps)(Toolbar);\n","import { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { focusWindow } from '../../actions';\n\nconst FileBrowser = ({ files, focusWindow }) => {\n  const [state, setState] = useState({ content: null });\n\n  const handleFocus = name => () => focusWindow(name);\n\n  useEffect(() => {\n    if (files.length) {\n      setState({\n        ...state,\n        content: (\n          files.map(file => (\n            <span key={ `anchor-${ file.name }` } data-toggle=\"modal\" data-target={ `modal-${ file.name }` } onClick={ handleFocus(`#modal-${ file.name }`) } className=\"sidebar-link sidebar-link-with-icon anchor\">\n              <span className=\"sidebar-icon\">\n                <i className=\"fa fa-file-csv\" />\n              </span>\n              { file.name }\n            </span>\n          ))\n        )\n      })\n    }\n  }, [files]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebar-menu\">\n        <h5 className=\"sidebar-title\">\n          <i className=\"fa fa-folder\"/>\n          &emsp;Files\n        </h5>\n        <hr className=\"sidebar-divider\"/>\n        { state.content }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  focusWindow: payload => dispatch(focusWindow(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FileBrowser);\n","export const TRACK_CONTROLS_WIDTH = 4;\nexport const TRACK_WIDTH = 12 - TRACK_CONTROLS_WIDTH;\n\nexport const FEATURES = ['Volume', 'Tempo', 'Pitch', 'Pan']; // TODO: Add more\n\nexport const KEYS = {\n  'C': 'C Major',\n  'c': 'C Minor',\n  'C#': 'C# Major',\n  'c#': 'C# Minor',\n  'D': 'D Major',\n  'd': 'D Minor',\n  'Eb': 'E&#9837; Major',\n  'eb': 'E&#9837; Minor',\n  'E': 'E Major',\n  'e': 'E Minor',\n  'F': 'F Major',\n  'f': 'F Minor',\n  'F#': 'F# Major',\n  'f#': 'F# Minor',\n  'G': 'G Major',\n  'g': 'G Minor',\n  'Ab': 'A&#9837; Major',\n  'ab': 'A&#9837; Minor',\n  'A': 'A Major',\n  'a': 'A Minor',\n  'Bb': 'B&#9837; Major',\n  'bb': 'B&#9837; Minor',\n  'B': 'B Major',\n  'b': 'B Minor',\n  'chromatic': 'Chromatic',\n  'whole': 'Whole Tone',\n  'penta': 'Pentatonic', // TODO: More keys\n  'harmonic': 'Harmonic Minor', // TODO: More keys\n  'none': 'None'\n};\n\nexport const NOTES = {\n  'a': 0,\n  'a#': 1,\n  'bb': 1,\n  'b': 2,\n  'cb': 2,\n  'b#': 3,\n  'c': 3,\n  'c#': 4,\n  'db': 4,\n  'd': 5,\n  'd#': 6,\n  'eb': 6,\n  'e': 7,\n  'fb': 7,\n  'e#': 8,\n  'f': 8,\n  'f#': 9,\n  'gb': 9,\n  'g': 10,\n  'g#': 11,\n  'ab': 11\n};\n\nexport const SCALES = {\n  'C': ['c', 'd', 'e', 'f', 'g', 'a', 'b'],\n  'c': ['c', 'd', 'eb', 'f', 'g', 'ab', 'bb'],\n  'C#': ['c#', 'd#', 'e#', 'f#', 'g#', 'a#', 'b#'],\n  'c#': ['c#', 'd#', 'e', 'f#', 'g#', 'a', 'b'],\n  'D': ['d', 'e', 'f#', 'g', 'a', 'b', 'c#'],\n  'd': ['d', 'e', 'f', 'g', 'a', 'bb', 'c'],\n  'Eb': ['eb', 'f', 'g', 'ab', 'bb', 'c', 'd'],\n  'eb': ['eb', 'f', 'gb', 'ab', 'bb', 'cb', 'db'],\n  'E': ['e', 'f#', 'g#', 'a', 'b', 'c#', 'd#'],\n  'e': ['e', 'f#', 'g', 'a', 'b', 'c', 'd'],\n  'F': ['f', 'g', 'a', 'bb', 'c', 'd', 'e'],\n  'f': ['f', 'g', 'ab', 'bb', 'c', 'db', 'eb'],\n  'F#': ['f#', 'g#', 'a#', 'b', 'c#', 'd#', 'e'],\n  'f#': ['f#', 'g#', 'a', 'b', 'c#', 'd', 'e'],\n  'G': ['g', 'a', 'b', 'c', 'd', 'e', 'f#'],\n  'g': ['g', 'a', 'bb', 'c', 'd', 'eb', 'f'],\n  'Ab': ['ab', 'bb', 'c', 'db', 'eb', 'f', 'g'],\n  'ab': ['ab', 'bb', 'cb', 'db', 'eb', 'fb', 'gb'],\n  'A': ['a', 'b', 'c#', 'd', 'e', 'f#', 'g#'],\n  'a': ['a', 'b', 'c', 'd', 'e', 'f', 'g'],\n  'Bb': ['bb', 'c', 'd', 'eb', 'f', 'g', 'a'],\n  'bb': ['bb', 'c', 'db', 'eb', 'f', 'gb', 'ab'],\n  'B': ['b', 'c#', 'd#', 'e', 'f#', 'g#', 'a#'],\n  'b': ['b', 'c#', 'd', 'e', 'f#', 'g', 'a'],\n  'chromatic': ['c', 'c#', 'd', 'd#', 'e', 'f', 'f#', 'g', 'g#', 'a', 'a#', 'b'],\n  'whole': ['c', 'd', 'e', 'f#', 'g#', 'a#'],\n  'penta': ['c', 'd', 'e', 'g', 'a'], // TODO: More keys\n  'harmonic': ['a', 'b', 'c', 'd', 'e', 'f', 'g#'], // TODO: More keys\n  'none': [],\n}\n","import { connect } from 'react-redux';\nimport { setSettings, deleteTrack, focusWindow } from '../../actions';\n\nconst Settings = ({ column, i, tracks, setSettings, deleteTrack, focusWindow }) => {\n  const handleMute = () => setSettings(i, { mute: !tracks[i].settings.mute });\n  const handleVolume = e => setSettings(i, { volume: e.target.value });\n  const handlePan = e => setSettings(i, { pan: Math.abs(e.target.value) < 5 ? 0 : parseInt(e.target.value) });\n  const handleDelete = () => deleteTrack(i);\n  const handleClick = () => focusWindow(`#sonification-${ tracks[i].name }-${ i }`);\n\n  return (\n    <details className=\"collapse-panel\">\n      <summary className=\"collapse-header\">\n        <i className=\"fa fa-cog\"/>\n        &emsp;Settings\n      </summary>\n      <div className=\"collapse-content\">\n        {\n          tracks[i].settings.channel.length > 0 ? null : (\n            <>\n              <h6 className=\"font-weight-semi-bold\">Volume</h6>\n              <div className=\"row\">\n                <div className=\"col-3\">\n                  <div className=\"custom-switch\">\n                    <input type=\"checkbox\" id={ `${ column }-row-${ i }-mute` } checked={ !tracks[i].settings.mute } onChange={ handleMute } />\n                    <label htmlFor={ `${ column }-row-${ i }-mute` }> </label>\n                  </div>\n                </div>\n                <div className=\"col-9\">\n                  <div className=\"h-full d-flex align-content-start\">\n                    <input disabled={ tracks[i].settings.mute } className={ tracks[i].settings.mute ? 'disabled' : '' } type=\"range\" min=\"0\" max=\"100\" defaultValue=\"100\" onMouseUp={ handleVolume } />\n                  </div>\n                </div>\n              </div>\n              <br />\n              <hr />\n              <h6 className=\"font-weight-semi-bold\">Pan</h6>\n              <div className=\"h-full d-flex align-content-start\">\n                <input type=\"range\" min=\"-50\" max=\"50\" value={ tracks[i].settings.pan } onChange={ handlePan } />\n              </div>\n              <br />\n              <hr />\n            </>\n          )\n        }\n        <button onClick={ handleClick } data-toggle=\"modal\" data-target={ `sonification-${ tracks[i].name.replace(/\\s/g, '-') }-${ i }` } className=\"btn btn-block btn-primary\">Sonification Settings (Advanced)</button>\n        <br />\n        <hr />\n        <button onClick={ handleDelete } className=\"btn btn-block btn-danger\">\n          <i className=\"fa fa-trash\" />\n          &emsp;Delete Track\n        </button>\n      </div>\n    </details>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setSettings: (id, settings) => dispatch(setSettings(id, settings)),\n  deleteTrack: id => dispatch(deleteTrack(id)),\n  focusWindow: window => dispatch(focusWindow(window))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\n","import { useState, useEffect, createRef } from 'react';\nimport * as d3 from 'd3';\nimport { connect } from 'react-redux';\n\nlet height = -1;\n\nconst TrackData = ({ dark, tracks, id }) => {\n  const svg = createRef();\n  const xAxis = createRef();\n  const yAxis = createRef();\n\n  const [state, setState] = useState({ graph: '' });\n\n  const data = tracks.find(t => t.id === id).data.map((d, i) => [i, d]);\n\n  useEffect(() => {\n    const width = getComputedStyle(svg.current).width;\n\n    if (height < 0) {\n      height = getComputedStyle(svg.current).height;\n    }\n\n    const x = d3.scaleLinear()\n      .domain(d3.extent(data, datum => datum[0]))\n      .range([30, parseFloat(width.slice(0, width.length - 2))]);\n    const y = d3.scaleLinear()\n      .domain(d3.extent(data, datum => datum[1]))\n      .range([parseFloat(height.slice(0, height.length - 2)) - 20, 0]);\n\n    if (data.every(datum => !isNaN(datum[1]))) {\n      const line = d3.line()\n        .x(data => x(data[0]))\n        .y(data => y(data[1]));\n\n      setState({ ...state, graph: line(data) });\n\n      const axes = [\n        d3.axisBottom()\n          .scale(x)\n          .ticks(0),\n        d3.axisLeft()\n          .scale(y)\n      ];\n\n      d3.select(xAxis.current).call(axes[0]);\n      d3.select(yAxis.current).call(axes[1]);\n    } else {\n      // TODO: Implement histogram\n    }\n\n    xAxis.current.style.transform = `translateY(calc(${ height } - 20px))`;\n    yAxis.current.style.transform = 'translateX(30px)';\n  }, [tracks]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <svg className=\"track-graph\" ref={ svg }>\n      <g className=\"graph-content\">\n        <g className=\"x\" ref={ xAxis } />\n        <g className=\"y\" ref={ yAxis } />\n        <g className=\"line\">\n          {/* TODO: Make responsive */}\n          <path d={ state.graph } fill=\"none\" stroke={ dark ? 'white' : 'black' } />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nconst mapStateToProps = state => ({\n  dark: state.globalSettings.dark,\n  tracks: state.tracks\n});\n\nexport default connect(mapStateToProps)(TrackData);\n","import { TRACK_CONTROLS_WIDTH, TRACK_WIDTH } from '../../constants/workstation';\nimport Settings from './Settings';\nimport TrackData from './TrackData';\n\nconst Track = ({ i, column, name }) => (\n  <div className=\"row row-eq-spacing\">\n    <div className={ `col-${ TRACK_CONTROLS_WIDTH }` }>\n      <div className=\"card track\">\n        <h2 className=\"card-title\">Track { i + 1 } - { column }</h2>\n        <p className=\"text-muted\">{ name }</p>\n        <Settings column={ column } i={ i } />\n      </div>\n    </div>\n    <div className={ `col-${ TRACK_WIDTH }` }>\n      <div className=\"card track overflow-scroll d-flex align-content-center\">\n        <TrackData id={ i } />\n      </div>\n    </div>\n  </div>\n);\n\nexport default Track;\n","import { connect } from 'react-redux';\nimport Track from './Track';\n\nconst Main = ({ files, tracks }) => {\n  let t = [];\n  tracks.forEach(({ file, name }) => {\n    for (const f of files) {\n      if (f.name === file) {\n        t.push({ file: f, column: name });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className=\"content-wrapper\">\n      <div className={ `container-fluid ${ tracks.length ? '' : 'h-full' }` }>\n        {\n          t.length ?\n            t.map(({ file, column }, i) =>\n              <Track key={ `${ column }-row-${ i }` } i={ i } column={ column } name={ file.name } />\n            ) : (\n              <div className=\"d-flex justify-content-center align-items-center h-full\">\n                <div className=\"text-center\">\n                  <i className=\"fa fa-music icon-lg\" />\n                  <p className=\"font-size-20\">Nothing to see here..., open a <kbd>.csv</kbd> file to get started!</p>\n                </div>\n              </div>\n            )\n        }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files,\n  tracks: state.tracks\n});\n\nexport default connect(mapStateToProps)(Main);\n","import { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { addTrack } from '../../../actions';\nimport Window from './Window';\n\nconst AddTrack = ({ anchor, track, files, addTrack }) => {\n  const [state, setState] = useState({ column: '' });\n\n  let name, columns;\n  for (const file of files) {\n    if (file.name === track) {\n      name = file.name;\n      columns = file.csv.columns;\n      break;\n    }\n  }\n\n  const handleSelect = e => setState({ ...state, column: e.target.value });\n  const handleSubmit = () => {\n    if (state.column !== '') {\n      addTrack(state.column, name, files.find(file => file.name === track).csv.map(row => isNaN(row[state.column]) ? row[state.column] : parseFloat(row[state.column])));\n      setState({ ...state, column: '' });\n    }\n  };\n\n  return (\n    <Window anchor={ anchor } buttons={ [{ close: true, color: state.column === '' ? '' : 'green', onClick: handleSubmit, disabled: state.column === '' }] } title=\"Add Track\">\n      <select className=\"form-control form-control-lg\" value={ state.column } onChange={ handleSelect }>\n        <option value=\"\" disabled>Select a column</option>\n        { columns.map(column => <option key={ `column-${ column }` } value={ column }>{ column }</option>) }\n      </select>\n    </Window>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addTrack: (name, file, data) => dispatch(addTrack(name, file, data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddTrack);\n","import Window from './Window';\n\nconst Info = ({ title, children }) => {\n  return (\n    <Window anchor=\"help-window\" title={ `Info: ${ title }` }>\n      { children ? children : <div className=\"p-20 m-20\" /> }\n    </Window>\n  );\n};\n\nexport default Info;\n","import { useState, createRef, useEffect } from 'react';\nimport Window from './Window';\nimport { connect } from 'react-redux';\nimport { FEATURES } from '../../../constants/workstation';\n\nconst deselect = e => Array.from(e.children).forEach(child => {\n  if (child.classList.contains('active')) {\n    child.classList.remove('active');\n  }\n});\n\nconst Channel = ({ anchor, title, i, tracks }) => {\n  const [state, setState] = useState({ channel: -1, features: [] });\n\n  const ul = createRef();\n\n  useEffect(() => {\n    if (state.channel === -1) {\n      deselect(ul.current);\n    }\n  }, [state.channel]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (tracks[i].settings.channel.length <= state.channel) {\n      setState({ ...state, channel: -1 });\n    }\n  }, [tracks[i].settings.channel]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleChannel = i => e => {\n    deselect(e.target.parentElement.parentElement);\n    e.target.parentElement.classList.add('active');\n    setState({ ...state, channel: i });\n  };\n\n  const handleAdd = () => setState({\n    ...state,\n    features: [\n      ...state.features,\n      (\n        <select className=\"form-control\" key={ `select-${ state.features.length }` } value={ 'none' }>\n          <option value=\"none\" disabled>None</option>\n          { FEATURES.map(f => <option value={ f } key={ f }>{ f }</option>) }\n        </select>\n      )\n    ]\n  });\n\n  const handleClose = () => setState({ ...state, channel: -1 });\n\n  return (\n    <Window anchor={ anchor } title={ `${ title }: Channel Settings` } onClose={ handleClose }>\n      <nav>\n        <ul className=\"pagination text-center\" ref={ ul }>\n          <li className=\"page-item\">\n            <button className=\"page-link\">\n              <i className=\"fa fa-angle-left\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Previous</span>\n            </button>\n          </li>\n          { tracks[i].settings.channel.map(i => <li key={ `pagination-${ i }` } className=\"page-item\"><button className=\"page-link\" onClick={ handleChannel(i) }>{ i }</button></li>) }\n          <li className=\"page-item\">\n            <button className=\"page-link\">\n              <i className=\"fa fa-angle-right\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Next</span>\n            </button>\n          </li>\n        </ul>\n      </nav>\n      <div className={ state.channel === -1 ? 'transparent' : '' }>\n        <h5 className=\"font-weight-bold\">Channel { state.channel } Controlled Features</h5>\n        <button className=\"btn btn-primary\" onClick={ handleAdd }>+&emsp;Add Controlled Feature</button>\n        <br />\n        <hr />\n        { state.features }\n      </div>\n    </Window>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks\n});\n\nexport default connect(mapStateToProps)(Channel);\n","export const channel =\n  <p>Channels group tracks into one output, allowing for tracks to affect different aspects of the sonification.</p>;\n\nexport const data =\n  <p>Select a subset of the data to sonify.</p>;\n","import { useState, useEffect } from 'react';\nimport Window from './Window';\nimport Info from './Info';\nimport Channel from './Channel';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings, setSettings, focusWindow, setData } from '../../../actions';\nimport { channel, data as dataInfo } from '../helper/info';\nimport { chunkify, removeOutliers } from '../helper/processing';\nimport { INITIAL_CHANNEL_SETTINGS } from '../../../constants/state';\n\nconst select = (e, dark) => {\n  if (dark) {\n    e.style.background = 'var(--dm-table-primary-bg-color)';\n    e.style.color = 'var(--dm-table-primary-text-color)';\n    e.style.rowBorder = 'var(--dm-table-primary-row-border-color)';\n    e.style.cellBorder = 'var(--dm-table-primary-cell-border-color)';\n  } else {\n    e.style.background = 'var(--lm-table-primary-bg-color)';\n    e.style.color = 'var(--lm-table-primary-text-color)';\n    e.style.rowBorder = 'var(--lm-table-primary-row-border-color)';\n    e.style.cellBorder = 'var(--lm-table-primary-cell-border-color)';\n  }\n};\n\nconst Sonification = ({ anchor, trackno, tracks, setSettings, globalSettings, setGlobalSettings, focusWindow, setData, files }) => {\n  const [state, setState] = useState({ title: '', children: null, segment: '' });\n\n  useEffect(() => {\n    Array.from(document.getElementsByClassName('datum-selected')).forEach(e => select(e, globalSettings.dark));\n  }, [globalSettings.dark]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleContinuousOrDiscrete = e => setSettings(trackno, { continuous: e.target.checked });\n\n  const handleAdd = () => setGlobalSettings({ channels: [...globalSettings.channels, { ...INITIAL_CHANNEL_SETTINGS, id: globalSettings.channels.length }] });\n\n  const handleChannel = i => e => {\n    if (e.target.classList.contains('btn-primary')) {\n      e.target.classList.remove('btn-primary');\n\n      const temp = [...tracks[trackno].settings.channel];\n      temp.splice(tracks[trackno].settings.channel.indexOf(i), 1);\n      setSettings(trackno, { channel: temp });\n\n      const temp2 = [...globalSettings.channels];\n      temp2[i].tracks.splice(temp2[i].tracks.indexOf(trackno), 1);\n      setGlobalSettings({ channels: temp2 });\n    } else {\n      e.target.classList.add('btn-primary');\n      setSettings(trackno, { channel: [...tracks[trackno].settings.channel, i].sort((a, b) => a - b) });\n\n      const temp = [...globalSettings.channels];\n      temp[i].tracks = [...temp[i].tracks, trackno];\n      setGlobalSettings({ channels: temp });\n    }\n  };\n\n  const handlePoint = (datum, i) => e => {\n    const temp = tracks[trackno].data;\n\n    if (e.target.classList.contains('datum-selected')) {\n      e.target.classList.remove('datum-selected');\n      e.target.style.background = null;\n      e.target.style.color = null;\n      e.target.style.rowBorder = null;\n      e.target.style.cellBorder = null;\n\n      temp.splice(i, 1);\n      setData(trackno, temp);\n    } else {\n      e.target.classList.add('datum-selected');\n      select(e.target, globalSettings.dark);\n      temp.splice(i, 0, datum);\n      setData(trackno, temp);\n    }\n  };\n\n  const handleInfo = (title, children) => () => {\n    setState({ ...state, title, children });\n    focusWindow('#help-window');\n  };\n\n  const handleOutliers = () => setData(trackno, removeOutliers(tracks[trackno].data));\n\n  const handleRestore = () => {\n    setData(trackno, files.find(f => f.name === tracks[trackno].file).csv.map(row => isNaN(row[tracks[trackno].name]) ? row[tracks[trackno].name] : parseFloat(row[tracks[trackno].name])));\n    setState({ ...state, segment: '' });\n  };\n\n  const handleSegment = e => {\n    setData(trackno, chunkify(tracks[trackno].data, e.target.value));\n    setState({ ...state, segment: e.target.value });\n  };\n\n  return (\n    <>\n      <Window anchor={ anchor } title={ `${ tracks[trackno].name }: Sonification Settings` }>\n        <h5 className=\"font-weight-bold d-flex align-items-baseline\">\n          Connect to Channel&emsp;\n          <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" onClick={ handleInfo('Connect to Channel', channel) } />\n        </h5>\n        <div className=\"w-full\">\n          <button className=\"btn btn-square btn-primary m-5\" onClick={ handleAdd }>+</button>\n          { [...globalSettings.channels].map((_, i) => <button key={ `channel-${ i }` } className=\"btn btn-square m-5\" onClick={ handleChannel(i) }>{ i }</button>) }\n        </div>\n        {\n          tracks[trackno].settings.channel.length === 0 ? null : (\n            <>\n              <br />\n              <div className=\"w-full\">\n                <button className=\"btn btn-primary ml-5\" data-toggle=\"modal\" data-target={ `channel-${ tracks[trackno].name }-${ trackno }` } onClick={ () => focusWindow(`#channel-${ tracks[trackno].name }-${ trackno }`) }>Channel Settings</button>\n              </div>\n            </>\n          )\n        }\n        <br />\n        <hr />\n        <h5 className=\"font-weight-bold d-flex align-items-baseline\">Data Processing</h5>\n        <h6 className=\"font-weight-semi-bold d-flex align-items-baseline\">\n          Data Points&emsp;\n          <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" onClick={ handleInfo('Data Points', dataInfo) } />\n        </h6>\n        <div className=\"w-full overflow-scroll\">\n          <table className=\"table\">\n            <tbody>\n              <tr>\n                <th>{ tracks[trackno].name }</th>\n                { tracks[trackno].data.map((datum, i) => <td key={ `data-${ i }` } className=\"anchor sonification-data-point is-primary\" onClick={ handlePoint(datum, i) }>{ datum }</td>) }\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <br />\n        <div className=\"row\">\n          <div className=\"col-6\">\n            <button className=\"btn btn-primary\" onClick={ handleOutliers }>Remove Outliers</button>\n          </div>\n          <div className=\"col-6\">\n            <input className=\"form-control\" placeholder=\"Segmentation Size\" type=\"number\" min=\"1\" value={ state.segment } onChange={ handleSegment } />\n          </div>\n        </div>\n        <br />\n        <button className=\"btn btn-primary\" onClick={ handleRestore }>Restore Data</button>\n        <br />\n        {\n          tracks[trackno].settings.channel.length > 0 ? null : (\n            <>\n              <br />\n              <hr />\n              <h5 className=\"font-weight-bold d-flex align-items-baseline\">\n                { tracks[trackno].settings.continuous ? 'Continuous' : 'Discrete' }&emsp;\n                <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" />\n              </h5>\n              <div className=\"d-flex w-full justify-items-center align-items-center\">\n                <div className=\"custom-switch\">\n                  <input type=\"checkbox\" id={ `continuous-${ anchor }` } value={ tracks[trackno].settings.continuous } onChange={ handleContinuousOrDiscrete } />\n                  <label htmlFor={ `continuous-${ anchor }` } />\n                </div>\n              </div>\n            </>\n          )\n        }\n      </Window>\n      <Info title={ state.title }>\n        { state.children }\n      </Info>\n      <Channel anchor={ `channel-${ tracks[trackno].name.replace(/\\s/g, '-') }-${ trackno }` } title={ tracks[trackno].name } i={ trackno } />\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks,\n  globalSettings: state.globalSettings,\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setSettings: (id, settings) => dispatch(setSettings(id, settings)),\n  setGlobalSettings: settings => dispatch(setGlobalSettings(settings)),\n  focusWindow: window => dispatch(focusWindow(window)),\n  setData: (id, data) => dispatch(setData(id, data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sonification);\n","import * as d3 from 'd3';\n\nexport const chunkify = (data, size) => {\n  const temp = [];\n  for (let i = 0; i < data.length - size; i += size) {\n    const subTemp = [];\n    for (let j = 0; j < size; j++) {\n      subTemp.push(data[i + j]);\n    }\n    temp.push(subTemp);\n  }\n  return temp;\n};\n\nexport const isNumerical = data => data.every(d => !isNaN(d));\n\nexport const scale = (data, type, max = 1, min = -1, center = 0) => {\n  if (!isNumerical(data)) {\n    return null;\n  }\n  return data.map(d => {\n    switch (type) {\n      case 'logistic':\n        return (max - min) / (1 + Math.E ** (-1 * (d - center))) - 1 + (max + min) / 2;\n      case 'tanh':\n        return (max - min) * Math.tanh(d - center) + (max + min) / 2;\n      case 'arctan':\n        return (max - min) * 2 / Math.PI * Math.atan(d - center) + (max + min) / 2;\n      case 'sign':\n        return (max - min) * Math.sign(d - center) + (max + min) / 2;\n      default:\n        return d;\n    }\n  });\n};\n\nexport const removeOutliers = data => {\n  const first = d3.quantile(data, 0.25);\n  const third = d3.quantile(data, 0.75);\n  const temp = [];\n  data.forEach(d => {\n    if (!(d < 1.5 * first || d > 1.5 * third)) {\n      temp.push(d);\n    }\n  });\n  return temp;\n};\n","import { connect } from 'react-redux';\nimport { setGlobalSettings } from '../../actions';\nimport { KEYS } from '../../constants/workstation';\nimport { play, pause, stop } from './helper/synth';\n\nconst Controls = ({ globalSettings, setGlobalSettings, tracks }) => {\n  const hasTracks = tracks.length !== 0;\n\n  const handleBPM = e => setGlobalSettings({ bpm: e.target.value.length === 0 ? 30 : parseInt(e.target.value) });\n\n  const handleKey = e => setGlobalSettings({ key: e.target.value });\n\n  const handleTimesig = top => e => setGlobalSettings({\n    timesig: top ? [e.target.value, globalSettings.timesig[1]] : Number.isInteger(Math.log(e.target.value) / Math.log(2)) ? [globalSettings.timesig[0], e.target.value] : [...globalSettings.timesig]\n  });\n\n  const handleBPMToggle = () => setGlobalSettings({ bpm: globalSettings.bpm > 0 ? -1 : 120 });\n\n  const handleTimesigToggle = () => setGlobalSettings({ timesig: globalSettings.timesig[0] > 0 ? [-1, -1] : [4, 4] });\n\n  const handlePlay = e => {\n    if (e.target.classList.contains('btn-danger')) {\n      e.target.classList.add('btn-success');\n      e.target.classList.remove('btn-danger');\n\n      stop();\n    } else if (e.target.classList.contains('btn-secondary')) {\n      e.target.classList.add('btn-danger');\n      e.target.classList.remove('btn-secondary');\n\n      pause();\n    } else {\n      e.target.classList.add('btn-danger'); // TODO: fix\n      e.target.classList.remove('btn-success');\n\n      const output = [];\n\n      tracks.forEach(t => {\n        if (t.settings.channel.length === 0) {\n          output.push(t);\n        } else {\n          // TODO: Do something\n        }\n      });\n\n      play(output, globalSettings);\n    }\n  };\n\n  return (\n    <nav className=\"navbar navbar-fixed-bottom controls\">\n      <div className=\"navbar-content w-full\">\n        <div className=\"row w-full\">\n          <div className=\"col-4\">\n            <div className=\"row h-full\">\n              <div className=\"col-6 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg\" data-toggle=\"dropdown\" type=\"button\" id=\"bpm-dropup\">\n                      <i className=\"fa fa-drum\"/>\n                      &emsp;BPM: <span className=\"text-monospace\">{ globalSettings.bpm < 0 ? 'N/A' : globalSettings.bpm }</span>\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"bpm-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group w-full\">\n                          <label htmlFor=\"bpm\">Set BPM</label>\n                          <br />\n                          <div className=\"custom-switch align-self-center\">\n                            <input type=\"checkbox\" id=\"bpm-toggle\" checked={ globalSettings.bpm > 0 } onChange={ handleBPMToggle } />\n                            <label htmlFor=\"bpm-toggle\" />\n                          </div>\n                          <br />\n                          <input type={ globalSettings.bpm < 0 ? 'text' : 'number' } className=\"form-control\" id=\"bpm\" min=\"30\" max=\"240\" value={ globalSettings.bpm < 0 ? 'N/A' : globalSettings.bpm } disabled={ globalSettings.bpm < 0 } placeholder=\"BPM\" onChange={ handleBPM } />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-6 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg\" data-toggle=\"dropdown\" type=\"button\" id=\"key-dropup\">\n                      <i className=\"fa fa-hashtag\"/>\n                      &emsp;Key: { <span dangerouslySetInnerHTML={ { __html: KEYS[globalSettings.key] } } /> }\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"key-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"key\">Set Key</label>\n                          <select className=\"form-control\" id=\"key\" onChange={ handleKey }>\n                            { Object.keys(KEYS).map(k => <option value={ k } key={ k } dangerouslySetInnerHTML={ { __html: KEYS[k] } } />) }\n                          </select>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"w-full d-flex justify-content-center\">\n              <button className=\"btn btn-square rounded-circle btn-success play font-size-24\" type=\"button\" disabled={ !hasTracks } onClick={ handlePlay }>\n                { /*<i className=\"fa fa-play\" />*/ }\n                { /* TODO: Toggle button color */ }\n              </button>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"row h-full\">\n              <div className=\"col-12 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg d-flex align-items-center\" data-toggle=\"dropdown\" type=\"button\" id=\"timesig-dropup\">\n                      <i className=\"fa fa-stopwatch\"/>\n                      &emsp;Time Signature:&nbsp;\n                      <span className=\"supsub\">\n                        <sup>{ globalSettings.timesig[0] <= 0 ? 'N/A' : globalSettings.timesig[0] }</sup>\n                        <sub>{ globalSettings.timesig[1] <= 0 ? 'N/A' : globalSettings.timesig[1] }</sub>\n                      </span>\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"timesig-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"timesig\">Set Time Signature</label>\n                          <br />\n                          <div className=\"custom-switch align-self-center\">\n                            <input type=\"checkbox\" id=\"timesig-toggle\" checked={ globalSettings.timesig[0] > 0 } onChange={ handleTimesigToggle } />\n                            <label htmlFor=\"timesig-toggle\"> </label>\n                          </div>\n                          <br />\n                          <input type=\"number\" className=\"form-control\" id=\"timesig\" min=\"1\" max=\"20\" placeholder={ globalSettings.timesig[0] <= 0 ? 'N/A' : globalSettings.timesig[0] } onChange={ handleTimesig(true) } />\n                          <input type=\"number\" className=\"form-control\" id=\"timesig-bottom\" min=\"1\" max=\"32\" placeholder={ globalSettings.timesig[1] <= 0 ? 'N/A' : globalSettings.timesig[1] } onChange={ handleTimesig(false) } />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nconst mapStateToProps = state => ({\n  globalSettings: state.globalSettings,\n  tracks: state.tracks\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import { HashRouter, Route, Switch } from 'react-router-dom';\nimport Index from './components/Index';\nimport Workstation from './components/Workstation';\n\nconst App = () => {\n  return (\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\" component={ Index } />\n        <Route path=\"/workstation\" component={ Workstation } />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import {\n  UPLOAD_FILE,\n  ADD_TRACK,\n  SET_SETTINGS,\n  SET_GLOBAL_SETTINGS, FOCUS_WINDOW, DELETE_TRACK, INITIAL_STATE, INITIAL_SETTINGS, SET_DATA\n} from '../constants/state';\n\nconst rootReducer = (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case UPLOAD_FILE:\n      return Object.assign({}, state, {\n        files: [...state.files, action.payload]\n      });\n    case ADD_TRACK:\n      return Object.assign({}, state, {\n        tracks: [...state.tracks, { ...action.payload, settings: { ...INITIAL_SETTINGS }, id: state.tracks.length }],\n      });\n    case SET_SETTINGS:\n      return Object.assign({}, state, {\n        tracks: state.tracks.map(t => action.payload.id === t.id ? { ...t, settings: { ...t.settings, ...action.payload.settings } } : t)\n      });\n    case SET_GLOBAL_SETTINGS:\n      return Object.assign({}, state, {\n        globalSettings: { ...state.globalSettings, ...action.payload }\n      });\n    case FOCUS_WINDOW:\n      const index = state.windows.indexOf(action.payload);\n      if (index >= 0) {\n        return Object.assign({}, state, {\n          windows: [action.payload, ...state.windows.slice(0, index), ...state.windows.slice(index + 1, state.windows.length)]\n        });\n      }\n      return Object.assign({}, state, {\n        windows: [action.payload, ...state.windows]\n      });\n    case DELETE_TRACK:\n      let i = 0;\n      for (const t of state.tracks) {\n        if (action.payload === t.id) {\n          break;\n        }\n        i++;\n      }\n      return Object.assign({}, state, {\n        tracks: [...state.tracks.slice(0, i), ...state.tracks.slice(i + 1, state.tracks.length)],\n      });\n    case SET_DATA:\n      return Object.assign({}, state, {\n        tracks: state.tracks.map(t => {\n          if (t.id !== action.payload.id) {\n            return t;\n          }\n          return { ...t, data: action.payload.data };\n        })\n      });\n    default:\n      return state;\n  }\n};\n\nexport default rootReducer;\n","import { createStore } from '@reduxjs/toolkit';\nimport rootReducer from '../reducers/index';\n\nconst store = createStore(rootReducer);\n\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport store from './store';\r\nimport halfmoon from 'halfmoon';\r\nimport 'halfmoon/css/halfmoon-variables.min.css';\r\nimport './style.css';\r\n\r\nwindow.onload = () => halfmoon.onDOMContentLoaded();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={ store }>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}