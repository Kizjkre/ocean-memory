{"version":3,"sources":["components/Workstation.js","components/Index.js","constants/state.js","actions/index.js","components/workstation/Toolbar.js","components/workstation/FileBrowser.js","constants/workstation.js","components/workstation/Settings.js","components/workstation/TrackData.js","components/workstation/Track.js","components/workstation/Main.js","components/workstation/windows/Window.js","components/workstation/windows/AddTrack.js","components/workstation/windows/Info.js","components/workstation/windows/Channel.js","helper/info.js","components/workstation/windows/Sonification.js","helper/processing.js","synth/synth.js","components/workstation/Controls.js","app.js","serviceWorker.js","reducers/index.js","store/index.js","index.js"],"names":["dark","Index","className","to","UPLOAD_FILE","ADD_TRACK","SET_SETTINGS","SET_GLOBAL_SETTINGS","FOCUS_WINDOW","DELETE_TRACK","SET_DATA","INITIAL_STATE","files","tracks","globalSettings","bpm","key","timesig","includes","halfmoon","getPreferredMode","channels","windows","INITIAL_SETTINGS","mute","volume","pan","continuous","channel","INITIAL_CHANNEL_SETTINGS","features","name","controller","setSettings","id","settings","type","payload","setGlobalSettings","focusWindow","window","connect","dispatch","uploadFile","data","csv","action","ref","file","createRef","edit","view","useState","sidebar","state","setState","data-toggle","aria-labelledby","htmlFor","accept","onChange","e","a","target","length","url","URL","createObjectURL","d3","value","current","click","onClick","toggleSidebar","toggleDarkMode","content","useEffect","map","data-target","FEATURES","f","KEYS","SCALES","deleteTrack","column","i","checked","disabled","min","max","defaultValue","onMouseUp","Math","abs","parseInt","replace","height","svg","xAxis","yAxis","graph","find","t","d","width","getComputedStyle","x","domain","datum","range","parseFloat","slice","y","every","isNaN","line","axes","scale","ticks","call","style","transform","fill","stroke","Track","forEach","push","anchor","buttons","children","title","onClose","win","dialog","initial","useRef","offsetX","offsetY","zIndex","offsetLeft","offsetTop","getBoundingClientRect","classList","contains","indexOf","resetPosition","tabIndex","role","top","left","data-overlay-dismissal-disabled","data-esc-dismissal-disabled","onMouseDown","clientX","clientY","onMouseMove","data-dismiss","close","color","addTrack","columns","track","row","Info","deselect","Array","from","child","remove","selected","ul","c","handleChannel","parentElement","add","handleFeature","index","findIndex","ch","innerText","trim","aria-hidden","feature","f2","select","background","rowBorder","cellBorder","setData","trackno","segment","document","getElementsByClassName","temp","splice","temp2","sort","b","handlePoint","handleInfo","_","dataInfo","first","third","removeOutliers","placeholder","size","subTemp","j","chunkify","osc","gain","play","Tone","master","toDestination","num","debug","melody","round","floor","time","note","frequency","linearRampToValueAtTime","setValueAtTime","sync","start","stop","toSeconds","console","log","hasTracks","handleTimesig","Number","isInteger","dangerouslySetInnerHTML","__html","Object","keys","k","pause","output","keyPress","addEventListener","querySelector","toLowerCase","App","exact","path","component","Workstation","Boolean","location","hostname","match","rootReducer","assign","focusIndex","store","createStore","onload","onDOMContentLoaded","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f50516b0.chunk.js","sourcesContent":["import { useEffect } from 'react';\nimport Toolbar from './workstation/Toolbar';\nimport FileBrowser from './workstation/FileBrowser';\nimport Main from './workstation/Main';\nimport AddTrack from './workstation/windows/AddTrack';\nimport Sonification from './workstation/windows/Sonification';\nimport Controls from './workstation/Controls';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings } from '../actions';\n\nlet dark;\n\nconst Workstation = ({ files, tracks, setGlobalSettings }) => {\n  const keyPress = keys => {\n    if (keys.length === 2 && keys[0] === 'shift' && keys[1] === 'd') {\n      dark = !dark;\n      setGlobalSettings({ dark });\n    }\n  };\n\n  useEffect(() => {\n    let keys = [];\n\n    document.addEventListener('keydown', e => {\n      if (!(document.querySelector('input:focus') || document.querySelector('textarea:focus') || document.querySelector('select:focus'))) {\n        keys.push(e.key.toLowerCase());\n        keyPress(keys);\n      }\n    });\n    document.addEventListener('keyup', e => {\n      if (!(document.querySelector('input:focus') || document.querySelector('textarea:focus') || document.querySelector('select:focus'))) {\n        keys.splice(keys.indexOf(e.key.toLowerCase()), 1);\n        keyPress(keys);\n      }\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div className=\"page-wrapper with-navbar with-sidebar with-navbar-fixed-bottom\">\n      <div className=\"sticky-alerts\" />\n      { files.map(({ name }) => <AddTrack key={ `modal-${ name }` } anchor={ `modal-${ name }` } track={ name } />) }\n      { tracks.map(({ file, name }, i) => <Sonification key={ `sonification-${ name }-${ i }` } anchor={ `sonification-${ name.replace(/\\s/g, '-') }-${ i }` } trackno={ i } />) }\n      <Toolbar />\n      <FileBrowser />\n      <Main />\n      <Controls />\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  dark = state.globalSettings.dark;\n  return ({\n    files: state.files,\n    tracks: state.tracks\n  })\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Workstation);\n","import { Link } from 'react-router-dom';\n\nconst Index = () => {\n  return (\n    <div className=\"page-wrapper with-navbar\">\n      <nav className=\"navbar\">\n        <span className=\"navbar-brand anchor\">\n          Ocean Memory Sonification\n        </span>\n        <ul className=\"navbar-nav d-none d-md-flex\">\n          <li className=\"nav-item\">\n            <Link to=\"/workstation\" className=\"nav-link\">Workstation</Link>\n          </li>\n        </ul>\n      </nav>\n      <div className=\"content-wrapper\">\n        Homepage\n      </div>\n    </div>\n  );\n};\n\nexport default Index;\n","import halfmoon from 'halfmoon';\n\nexport const UPLOAD_FILE = 'UPLOAD_FILE';\nexport const ADD_TRACK = 'ADD_TRACK';\nexport const SET_SETTINGS = 'SET_SETTINGS';\nexport const SET_GLOBAL_SETTINGS = 'SET_GLOBAL_SETTINGS';\nexport const FOCUS_WINDOW = 'FOCUS_WINDOW';\nexport const DELETE_TRACK = 'DELETE_TRACK';\nexport const SET_DATA = 'SET_DATA';\n\nexport const INITIAL_STATE = {\n  files: [],\n  tracks: [],\n  globalSettings: {\n    bpm: 120,\n    key: 'C',\n    timesig: [4, 4],\n    dark: ['dark-mode', 'not-set'].includes(halfmoon.getPreferredMode()),\n    channels: []\n  },\n  windows: []\n};\n\nexport const INITIAL_SETTINGS = {\n  mute: false,\n  volume: 100,\n  pan: 0,\n  continuous: false,\n  channel: []\n};\n\nexport const INITIAL_CHANNEL_SETTINGS = {\n  continuous: false,\n  tracks: [],\n  features: [\n    {\n      name: 'Volume',\n      controller: -1\n    },\n    {\n      name: 'Pitch',\n      controller: -1\n    },\n    {\n      name: 'Pan',\n      controller: -1\n    },\n    {\n      name: 'Tempo',\n      controller: -1\n    }\n  ]\n};\n","import {\n  UPLOAD_FILE,\n  ADD_TRACK,\n  SET_SETTINGS,\n  SET_GLOBAL_SETTINGS, FOCUS_WINDOW, DELETE_TRACK, SET_DATA\n} from '../constants/state';\n\nexport const uploadFile = (name, data) => ({\n  type: UPLOAD_FILE,\n  payload: { name, csv: data } // TODO: Refactor CSV to data\n});\n\nexport const addTrack = (name, file, data) => ({\n  type: ADD_TRACK,\n  payload: { name, file, data }\n});\n\nexport const setSettings = (id, settings) => ({\n  type: SET_SETTINGS,\n  payload: { id, settings }\n});\n\nexport const setGlobalSettings = settings => ({\n  type: SET_GLOBAL_SETTINGS,\n  payload: settings\n});\n\nexport const focusWindow = window => ({\n  type: FOCUS_WINDOW,\n  payload: window\n});\n\nexport const deleteTrack = id => ({\n  type: DELETE_TRACK,\n  payload: id\n});\n\nexport const setData = (id, data) => ({\n  type: SET_DATA,\n  payload: { id, data }\n});\n","import { createRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport halfmoon from 'halfmoon';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings, uploadFile } from '../../actions';\n\nconst handleUpload = (action, ref) => async e => {\n  if (e.target.files.length) {\n    const url = URL.createObjectURL(e.target.files[0]);\n    const csv = await d3.csv(url);\n    action(e.target.files[0].name, csv);\n    e.target.value = '';\n    ref.current.click();\n  }\n};\n\nconst Toolbar = ({ uploadFile, setGlobalSettings }) => {\n  const file = createRef();\n  const edit = createRef();\n  const view = createRef();\n  const [state, setState] = useState({ sidebar: true, dark: halfmoon.getPreferredMode() === 'dark-mode' });\n  return (\n    <nav className=\"navbar\">\n      <span className=\"navbar-brand anchor\">Workstation</span>\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ file }>File</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <label htmlFor=\"upload\" className=\"dropdown-item\">\n              <input type=\"file\" id=\"upload\" className=\"d-none\" accept=\"text/csv\" onChange={ handleUpload(uploadFile, file) } />\n              <i className=\"fa fa-folder-open\"/>\n              &emsp;Open\n            </label>\n            <span className=\"dropdown-item anchor\" onClick={ () => file.current.click() }>\n              <i className=\"fa fa-file-export\"/>\n              &emsp;Export\n            </span>\n          </div>\n        </li>\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ edit }>Edit</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <span className=\"dropdown-item anchor\" onClick={ () => edit.current.click() }>\n              <i className=\"fa fa-trash\"/>\n              &emsp;Delete Track\n            </span>\n            <span className=\"dropdown-item anchor\" onClick={ () => edit.current.click() }>\n              <i className=\"fa fa-trash\"/>\n              &emsp;Remove File\n            </span>\n          </div>\n        </li>\n        <li className=\"nav-item dropdown\">\n          <span className=\"nav-link anchor\" data-toggle=\"dropdown\" id=\"nav-dropdown-file\" ref={ view }>View</span>\n          <div className=\"dropdown-menu\" aria-labelledby=\"nav-dropdown-file\">\n            <span\n              className=\"dropdown-item anchor\"\n              onClick={ () => {\n                view.current.click();\n                halfmoon.toggleSidebar();\n                setState({ ...state, sidebar: !state.sidebar });\n              } }\n            >\n              <i className={ `fa fa-toggle-${ state.sidebar ? 'off' : 'on' }` } />\n              &emsp;{ state.sidebar ? 'Close' : 'Open' } file browser\n            </span>\n            <span\n              className=\"dropdown-item anchor\"\n              onClick={ () => {\n                view.current.click();\n                halfmoon.toggleDarkMode();\n                setGlobalSettings({ dark: !state.dark });\n                setState({ ...state, dark: !state.dark });\n              } }\n            >\n              <i className={ `fa fa-${ state.dark ? 'sun' : 'moon' }` } />\n              &emsp;Toggle { state.dark ? 'light' : 'dark' } mode\n            </span>\n          </div>\n        </li>\n      </ul>\n      <div className=\"navbar-content ml-auto\">\n        <Link to=\"/\" className=\"btn btn-danger\">\n          <i className=\"fa fa-sign-out-alt\" />\n          &emsp;Exit Workstation\n        </Link>\n      </div>\n    </nav>\n  );\n};\n\nconst mapDispatchToProps = dispatch => ({\n  uploadFile: (name, data) => dispatch(uploadFile(name, data)),\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(null, mapDispatchToProps)(Toolbar);\n","import { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { focusWindow } from '../../actions';\n\nconst FileBrowser = ({ files, focusWindow }) => {\n  const [state, setState] = useState({ content: null });\n\n  const handleFocus = name => () => focusWindow(name);\n\n  useEffect(() => {\n    if (files.length) {\n      setState({\n        ...state,\n        content: (\n          files.map(file => (\n            <span key={ `anchor-${ file.name }` } data-toggle=\"modal\" data-target={ `modal-${ file.name }` } onClick={ handleFocus(`#modal-${ file.name }`) } className=\"sidebar-link sidebar-link-with-icon anchor\">\n              <span className=\"sidebar-icon\">\n                <i className=\"fa fa-file-csv\" />\n              </span>\n              { file.name }\n            </span>\n          ))\n        )\n      })\n    }\n  }, [files]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebar-menu\">\n        <h5 className=\"sidebar-title\">\n          <i className=\"fa fa-folder\"/>\n          &emsp;Files\n        </h5>\n        <hr className=\"sidebar-divider\"/>\n        { state.content }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  focusWindow: payload => dispatch(focusWindow(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FileBrowser);\n","import { INITIAL_CHANNEL_SETTINGS } from './state';\n\nexport const TRACK_CONTROLS_WIDTH = 4;\nexport const TRACK_WIDTH = 12 - TRACK_CONTROLS_WIDTH;\n\nexport const FEATURES = INITIAL_CHANNEL_SETTINGS.features.map(f => f.name);\n\nexport const KEYS = {\n  'C': 'C Major',\n  'c': 'C Minor',\n  'C#': 'C# Major',\n  'c#': 'C# Minor',\n  'D': 'D Major',\n  'd': 'D Minor',\n  'Eb': 'E&#9837; Major',\n  'eb': 'E&#9837; Minor',\n  'E': 'E Major',\n  'e': 'E Minor',\n  'F': 'F Major',\n  'f': 'F Minor',\n  'F#': 'F# Major',\n  'f#': 'F# Minor',\n  'G': 'G Major',\n  'g': 'G Minor',\n  'Ab': 'A&#9837; Major',\n  'ab': 'A&#9837; Minor',\n  'A': 'A Major',\n  'a': 'A Minor',\n  'Bb': 'B&#9837; Major',\n  'bb': 'B&#9837; Minor',\n  'B': 'B Major',\n  'b': 'B Minor',\n  'chromatic': 'Chromatic',\n  'whole': 'Whole Tone',\n  'penta': 'Pentatonic', // TODO: More keys\n  'harmonic': 'Harmonic Minor', // TODO: More keys\n  'none': 'None'\n};\n\nexport const SCALES = {\n  'C': ['c', 'd', 'e', 'f', 'g', 'a', 'b'],\n  'c': ['c', 'd', 'eb', 'f', 'g', 'ab', 'bb'],\n  'C#': ['c#', 'd#', 'e#', 'f#', 'g#', 'a#', 'b#'],\n  'c#': ['c#', 'd#', 'e', 'f#', 'g#', 'a', 'b'],\n  'D': ['d', 'e', 'f#', 'g', 'a', 'b', 'c#'],\n  'd': ['d', 'e', 'f', 'g', 'a', 'bb', 'c'],\n  'Eb': ['eb', 'f', 'g', 'ab', 'bb', 'c', 'd'],\n  'eb': ['eb', 'f', 'gb', 'ab', 'bb', 'cb', 'db'],\n  'E': ['e', 'f#', 'g#', 'a', 'b', 'c#', 'd#'],\n  'e': ['e', 'f#', 'g', 'a', 'b', 'c', 'd'],\n  'F': ['f', 'g', 'a', 'bb', 'c', 'd', 'e'],\n  'f': ['f', 'g', 'ab', 'bb', 'c', 'db', 'eb'],\n  'F#': ['f#', 'g#', 'a#', 'b', 'c#', 'd#', 'e'],\n  'f#': ['f#', 'g#', 'a', 'b', 'c#', 'd', 'e'],\n  'G': ['g', 'a', 'b', 'c', 'd', 'e', 'f#'],\n  'g': ['g', 'a', 'bb', 'c', 'd', 'eb', 'f'],\n  'Ab': ['ab', 'bb', 'c', 'db', 'eb', 'f', 'g'],\n  'ab': ['ab', 'bb', 'cb', 'db', 'eb', 'fb', 'gb'],\n  'A': ['a', 'b', 'c#', 'd', 'e', 'f#', 'g#'],\n  'a': ['a', 'b', 'c', 'd', 'e', 'f', 'g'],\n  'Bb': ['bb', 'c', 'd', 'eb', 'f', 'g', 'a'],\n  'bb': ['bb', 'c', 'db', 'eb', 'f', 'gb', 'ab'],\n  'B': ['b', 'c#', 'd#', 'e', 'f#', 'g#', 'a#'],\n  'b': ['b', 'c#', 'd', 'e', 'f#', 'g', 'a'],\n  'chromatic': ['c', 'c#', 'd', 'd#', 'e', 'f', 'f#', 'g', 'g#', 'a', 'a#', 'b'],\n  'whole': ['c', 'd', 'e', 'f#', 'g#', 'a#'],\n  'penta': ['c', 'd', 'e', 'g', 'a'], // TODO: More keys\n  'harmonic': ['a', 'b', 'c', 'd', 'e', 'f', 'g#'], // TODO: More keys\n  'none': [],\n}\n","import { connect } from 'react-redux';\nimport { setSettings, deleteTrack, focusWindow } from '../../actions';\n\nconst Settings = ({ column, i, tracks, setSettings, deleteTrack, focusWindow }) => {\n  const handleMute = () => setSettings(i, { mute: !tracks[i].settings.mute });\n  const handleVolume = e => setSettings(i, { volume: e.target.value });\n  const handlePan = e => setSettings(i, { pan: Math.abs(e.target.value) < 5 ? 0 : parseInt(e.target.value) });\n  const handleDelete = () => deleteTrack(i);\n  const handleClick = () => focusWindow(`#sonification-${ tracks[i].name }-${ i }`);\n\n  return (\n    <details className=\"collapse-panel\">\n      <summary className=\"collapse-header\">\n        <i className=\"fa fa-cog\"/>\n        &emsp;Settings\n      </summary>\n      <div className=\"collapse-content\">\n        {\n          tracks[i].settings.channel.length > 0 ? null : (\n            <>\n              <h6 className=\"font-weight-semi-bold\">Volume</h6>\n              <div className=\"row\">\n                <div className=\"col-3\">\n                  <div className=\"custom-switch\">\n                    <input type=\"checkbox\" id={ `${ column }-row-${ i }-mute` } checked={ !tracks[i].settings.mute } onChange={ handleMute } />\n                    <label htmlFor={ `${ column }-row-${ i }-mute` }> </label>\n                  </div>\n                </div>\n                <div className=\"col-9\">\n                  <div className=\"h-full d-flex align-content-start\">\n                    <input disabled={ tracks[i].settings.mute } className={ tracks[i].settings.mute ? 'disabled' : '' } type=\"range\" min=\"0\" max=\"100\" defaultValue=\"100\" onMouseUp={ handleVolume } />\n                  </div>\n                </div>\n              </div>\n              <br />\n              <hr />\n              <h6 className=\"font-weight-semi-bold\">Pan</h6>\n              <div className=\"h-full d-flex align-content-start\">\n                <input type=\"range\" min=\"-50\" max=\"50\" value={ tracks[i].settings.pan } onChange={ handlePan } />\n              </div>\n              <br />\n              <hr />\n            </>\n          )\n        }\n        <button onClick={ handleClick } data-toggle=\"modal\" data-target={ `sonification-${ tracks[i].name.replace(/\\s/g, '-') }-${ i }` } className=\"btn btn-block btn-primary\">Sonification Settings (Advanced)</button>\n        <br />\n        <hr />\n        <button onClick={ handleDelete } className=\"btn btn-block btn-danger\">\n          <i className=\"fa fa-trash\" />\n          &emsp;Delete Track\n        </button>\n      </div>\n    </details>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setSettings: (id, settings) => dispatch(setSettings(id, settings)),\n  deleteTrack: id => dispatch(deleteTrack(id)),\n  focusWindow: window => dispatch(focusWindow(window))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\n","import { useState, useEffect, createRef } from 'react';\nimport * as d3 from 'd3';\nimport { connect } from 'react-redux';\n\nlet height = -1;\n\nconst TrackData = ({ dark, tracks, id }) => {\n  const svg = createRef();\n  const xAxis = createRef();\n  const yAxis = createRef();\n\n  const [state, setState] = useState({ graph: '' });\n\n  const data = tracks.find(t => t.id === id).data.map((d, i) => [i, d]);\n\n  useEffect(() => {\n    const width = getComputedStyle(svg.current).width;\n\n    if (height < 0) {\n      height = getComputedStyle(svg.current).height;\n    }\n\n    const x = d3.scaleLinear()\n      .domain(d3.extent(data, datum => datum[0]))\n      .range([30, parseFloat(width.slice(0, width.length - 2))]);\n    const y = d3.scaleLinear()\n      .domain(d3.extent(data, datum => datum[1]))\n      .range([parseFloat(height.slice(0, height.length - 2)) - 20, 0]);\n\n    if (data.every(datum => !isNaN(datum[1]))) {\n      const line = d3.line()\n        .x(data => x(data[0]))\n        .y(data => y(data[1]));\n\n      setState({ ...state, graph: line(data) });\n\n      const axes = [\n        d3.axisBottom()\n          .scale(x)\n          .ticks(0),\n        d3.axisLeft()\n          .scale(y)\n      ];\n\n      d3.select(xAxis.current).call(axes[0]);\n      d3.select(yAxis.current).call(axes[1]);\n    } else {\n      // TODO: Implement histogram\n    }\n\n    xAxis.current.style.transform = `translateY(calc(${ height } - 20px))`;\n    yAxis.current.style.transform = 'translateX(30px)';\n  }, [tracks]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <svg className=\"track-graph\" ref={ svg }>\n      <g className=\"graph-content\">\n        <g className=\"x\" ref={ xAxis } />\n        <g className=\"y\" ref={ yAxis } />\n        <g className=\"line\">\n          {/* TODO: Make responsive */}\n          <path d={ state.graph } fill=\"none\" stroke={ dark ? 'white' : 'black' } />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nconst mapStateToProps = state => ({\n  dark: state.globalSettings.dark,\n  tracks: state.tracks\n});\n\nexport default connect(mapStateToProps)(TrackData);\n","import { TRACK_CONTROLS_WIDTH, TRACK_WIDTH } from '../../constants/workstation';\nimport Settings from './Settings';\nimport TrackData from './TrackData';\n\nconst Track = ({ i, id, column, name }) => (\n  <div className=\"row row-eq-spacing\">\n    <div className={ `col-${ TRACK_CONTROLS_WIDTH }` }>\n      <div className=\"card track\">\n        <h2 className=\"card-title\">Track { i + 1 } - { column }</h2>\n        <p className=\"text-muted\">{ name }</p>\n        <Settings column={ column } i={ i } />\n      </div>\n    </div>\n    <div className={ `col-${ TRACK_WIDTH }` }>\n      <div className=\"card track overflow-scroll d-flex align-content-center\">\n        <TrackData id={ id } />\n      </div>\n    </div>\n  </div>\n);\n\nexport default Track;\n","import { connect } from 'react-redux';\nimport Track from './Track';\n\nconst Main = ({ files, tracks }) => {\n  let t = [];\n  tracks.forEach(({ file, name, id }) => {\n    for (const f of files) {\n      if (f.name === file) {\n        t.push({ file: f, column: name, id });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className=\"content-wrapper\">\n      <div className={ `container-fluid ${ tracks.length ? '' : 'h-full' }` }>\n        {\n          t.length ?\n            t.map(({ file, column, id }, i) =>\n              <Track key={ `${ column }-row-${ i }` } i={ i } id={ id } column={ column } name={ file.name } />\n            ) : (\n              <div className=\"d-flex justify-content-center align-items-center h-full\">\n                <div className=\"text-center\">\n                  <i className=\"fa fa-music icon-lg\" />\n                  <p className=\"font-size-20\">Nothing to see here..., open a <kbd>.csv</kbd> file to get started!</p>\n                </div>\n              </div>\n            )\n        }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files,\n  tracks: state.tracks\n});\n\nexport default connect(mapStateToProps)(Main);\n","import { useState, useEffect, useRef, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { focusWindow } from '../../../actions';\n\nconst Window = ({ anchor, buttons, children, title, windows, focusWindow, onClose, width }) => {\n  if (!buttons) {\n    buttons = [];\n  }\n  if (!onClose) {\n    onClose = () => null;\n  }\n\n  const win = createRef();\n  const dialog = createRef();\n  const initial = useRef({ x: null, y: null });\n\n  const [state, setState] = useState({ x: null, y: null, offsetX: null, offsetY: null, click: false, zIndex: -1000 });\n\n  useEffect(() => {\n    setState({\n      ...state,\n      x: dialog.current.offsetLeft,\n      initial: {\n        x: dialog.current.offsetLeft,\n        y: dialog.current.offsetTop\n      }\n    });\n\n    initial.current = {\n      x: dialog.current.offsetLeft,\n      y: dialog.current.offsetTop\n    };\n\n    win.current.style.height = `${ dialog.current.getBoundingClientRect().height }px`;\n    win.current.style.width = `${ dialog.current.getBoundingClientRect().width }px`;\n\n    focusWindow(`#${ anchor }`);\n  }, []);  // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (win.current.classList.contains('show')) {\n      setState({ ...state, zIndex: 100 + windows.length - windows.indexOf(`#${ anchor }`), x: initial.current.x, y: initial.current.y });\n    } else {\n      onClose();\n      setState({ ...state, zIndex: -1000 });\n    }\n  }, [windows]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleMouseDown = e => {\n    focusWindow(`#${ anchor }`);\n    setState({ ...state, offsetX: e.clientX - state.x, offsetY: e.clientY - state.y, click: true });\n  };\n  const handleDrag = e => {\n    if (state.click) {\n      setState({ ...state, x: e.clientX - state.offsetX, y: e.clientY - state.offsetY });\n    }\n  };\n  const handleMouseUp = () => setState({ ...state, click: false });\n  const resetPosition = () => setState({...state, x: initial.current.x, y: null});\n\n  return (\n    <div className=\"modal window\" id={ anchor } tabIndex=\"-1\" role=\"dialog\" style={ { top: state.y, left: state.x, zIndex: state.zIndex } } ref={ win } data-overlay-dismissal-disabled=\"true\" data-esc-dismissal-disabled=\"true\">\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\" ref={ dialog } style={ { width: width ? width: null } }>\n          <h5 className=\"modal-title window-title\" onMouseDown={ handleMouseDown } onMouseMove={ handleDrag } onMouseUp={ handleMouseUp }>\n            <button className=\"btn btn-square rounded-circle custom-modal-dismiss red\" onClick={ resetPosition } data-dismiss=\"modal\">&#160;</button>\n            &nbsp;&nbsp;\n            {\n              buttons.map(({ close, color, onClick, disabled }, i) =>\n                <span key={ `btn-${ anchor }-${ i }` }>\n                  <button className={ `btn btn-square rounded-circle custom-modal-dismiss ${ color }` } onClick={ () => { onClick(); if (close) resetPosition(); } } data-dismiss={ close ? 'modal' : null } disabled={ disabled }>&#160;</button>\n                  &nbsp;&nbsp;\n                </span>\n              )\n            }\n            <br />{ title }\n          </h5>\n          <div>{ children }</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  windows: state.windows\n});\n\nconst mapDispatchToProps = dispatch => ({\n  focusWindow: payload => dispatch(focusWindow(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Window);\n","import { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { addTrack } from '../../../actions';\nimport Window from './Window';\n\nconst AddTrack = ({ anchor, track, files, addTrack }) => {\n  const [state, setState] = useState({ column: '' });\n\n  let name, columns;\n  for (const file of files) {\n    if (file.name === track) {\n      name = file.name;\n      columns = file.csv.columns;\n      break;\n    }\n  }\n\n  const handleSelect = e => setState({ ...state, column: e.target.value });\n  const handleSubmit = () => {\n    if (state.column !== '') {\n      addTrack(state.column, name, files.find(file => file.name === track).csv.map(row => isNaN(row[state.column]) ? row[state.column] : parseFloat(row[state.column])));\n      setState({ ...state, column: '' });\n    }\n  };\n\n  return (\n    <Window anchor={ anchor } buttons={ [{ close: true, color: state.column === '' ? '' : 'green', onClick: handleSubmit, disabled: state.column === '' }] } title=\"Add Track\">\n      <select className=\"form-control form-control-lg\" value={ state.column } onChange={ handleSelect }>\n        <option value=\"\" disabled>Select a column</option>\n        { columns.map(column => <option key={ `column-${ column }` } value={ column }>{ column }</option>) }\n      </select>\n    </Window>\n  );\n};\n\nconst mapStateToProps = state => ({\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addTrack: (name, file, data) => dispatch(addTrack(name, file, data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddTrack);\n","import Window from './Window';\n\nconst Info = ({ title, children }) => {\n  return (\n    <Window anchor=\"help-window\" title={ `Info: ${ title }` }>\n      { children ? children : <div className=\"p-20 m-20\" /> }\n    </Window>\n  );\n};\n\nexport default Info;\n","import { useState, createRef, useEffect } from 'react';\nimport Window from './Window';\nimport { connect } from 'react-redux';\nimport { FEATURES } from '../../../constants/workstation';\nimport { setGlobalSettings } from '../../../actions';\n\nconst deselect = e => Array.from(e.children).forEach(child => {\n  if (child.classList.contains('active')) {\n    child.classList.remove('active');\n  }\n});\n\nconst Channel = ({ anchor, title, i, tracks, channels, setGlobalSettings }) => {\n  const [state, setState] = useState({ selected: -1 });\n\n  const ul = createRef();\n  const channel = state.selected < 0 ? { features: [] } : channels.find(c => c.id === state.selected);\n\n  useEffect(() => {\n    if (state.selected === -1) {\n      deselect(ul.current);\n    }\n  }, [state.selected]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (tracks[i].settings.channel.length <= state.selected) {\n      setState({ ...state, selected: -1 });\n    }\n  }, [tracks[i].settings.channel]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleChannel = i => e => {\n    deselect(e.target.parentElement.parentElement);\n    e.target.parentElement.classList.add('active');\n    setState({ ...state, selected: i });\n  };\n\n  const handleFeature = e => {\n    const c = [...channels];\n    const index = channels.findIndex(ch => ch.id === i);\n    if (!e.target.classList.contains('btn-primary')) {\n      e.target.classList.add('btn-primary');\n      c[index].features.find(f => f.name === e.target.innerText.trim()).controller = i;\n    } else {\n      e.target.classList.remove('btn-primary');\n      c[index].features.find(f => f.name === e.target.innerText.trim()).controller = -1;\n    }\n    setGlobalSettings({ channels: c });\n  };\n\n  const handleClose = () => setState({ ...state, channel: -1 });\n\n  return (\n    <Window anchor={ anchor } title={ `${ title }: Channel Settings` } onClose={ handleClose }>\n      <nav>\n        <ul className=\"pagination text-center\" ref={ ul }>\n          <li className=\"page-item\">\n            <button className=\"page-link\">\n              <i className=\"fa fa-angle-left\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Previous</span>\n            </button>\n          </li>\n          { tracks[i].settings.channel.map(i => <li key={ `pagination-${ i }` } className=\"page-item\"><button className=\"page-link\" onClick={ handleChannel(i) }>{ i }</button></li>) }\n          <li className=\"page-item\">\n            <button className=\"page-link\">\n              <i className=\"fa fa-angle-right\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Next</span>\n            </button>\n          </li>\n        </ul>\n      </nav>\n      <div className={ state.selected === -1 ? 'transparent' : '' }>\n        <h5 className=\"font-weight-bold\">Channel { state.selected } Controlled Features</h5>\n        {\n          FEATURES.map(f => {\n            const feature = channel.features.find(f2 => f2.name === f);\n            if ([-1, i].includes(feature?.controller)) {\n              return <button key={ f } className=\"btn ml-5\" onClick={ handleFeature }>{ f }</button>;\n            }\n            return null;\n          })\n        }\n      </div>\n    </Window>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks,\n  channels: state.globalSettings.channels\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: settings => dispatch(setGlobalSettings(settings))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Channel);\n","export const channel =\n  <p>Channels group tracks into one output, allowing for tracks to affect different aspects of the sonification.</p>;\n\nexport const data =\n  <p>Select a subset of the data to sonify.</p>;\n","import { useState, useEffect } from 'react';\nimport Window from './Window';\nimport Info from './Info';\nimport Channel from './Channel';\nimport { connect } from 'react-redux';\nimport { setGlobalSettings, setSettings, focusWindow, setData } from '../../../actions';\nimport { channel, data as dataInfo } from '../../../helper/info';\nimport { chunkify, removeOutliers } from '../../../helper/processing';\nimport { INITIAL_CHANNEL_SETTINGS } from '../../../constants/state';\n\nconst select = (e, dark) => {\n  if (dark) {\n    e.style.background = 'var(--dm-table-primary-bg-color)';\n    e.style.color = 'var(--dm-table-primary-text-color)';\n    e.style.rowBorder = 'var(--dm-table-primary-row-border-color)';\n    e.style.cellBorder = 'var(--dm-table-primary-cell-border-color)';\n  } else {\n    e.style.background = 'var(--lm-table-primary-bg-color)';\n    e.style.color = 'var(--lm-table-primary-text-color)';\n    e.style.rowBorder = 'var(--lm-table-primary-row-border-color)';\n    e.style.cellBorder = 'var(--lm-table-primary-cell-border-color)';\n  }\n};\n\nconst Sonification = ({ anchor, trackno, tracks, setSettings, globalSettings, setGlobalSettings, focusWindow, setData, files }) => {\n  const [state, setState] = useState({ title: '', children: null, segment: '' });\n\n  useEffect(() => {\n    Array.from(document.getElementsByClassName('datum-selected')).forEach(e => select(e, globalSettings.dark));\n  }, [globalSettings.dark]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleContinuousOrDiscrete = e => setSettings(trackno, { continuous: e.target.checked });\n\n  const handleAdd = () => setGlobalSettings({ channels: [...globalSettings.channels, { ...INITIAL_CHANNEL_SETTINGS, id: globalSettings.channels.length }] });\n\n  const handleChannel = i => e => {\n    if (e.target.classList.contains('btn-primary')) {\n      e.target.classList.remove('btn-primary');\n\n      const temp = [...tracks[trackno].settings.channel];\n      temp.splice(tracks[trackno].settings.channel.indexOf(i), 1);\n      setSettings(trackno, { channel: temp });\n\n      const temp2 = [...globalSettings.channels];\n      temp2[i].tracks.splice(temp2[i].tracks.indexOf(trackno), 1);\n      setGlobalSettings({ channels: temp2 });\n    } else {\n      e.target.classList.add('btn-primary');\n      setSettings(trackno, { channel: [...tracks[trackno].settings.channel, i].sort((a, b) => a - b) });\n\n      const temp = [...globalSettings.channels];\n      temp[i].tracks = [...temp[i].tracks, trackno];\n      setGlobalSettings({ channels: temp });\n    }\n  };\n\n  const handlePoint = (datum, i) => e => {\n    const temp = tracks[trackno].data;\n\n    if (e.target.classList.contains('datum-selected')) {\n      e.target.classList.remove('datum-selected');\n      e.target.style.background = null;\n      e.target.style.color = null;\n      e.target.style.rowBorder = null;\n      e.target.style.cellBorder = null;\n\n      temp.splice(i, 1);\n      setData(trackno, temp);\n    } else {\n      e.target.classList.add('datum-selected');\n      select(e.target, globalSettings.dark);\n      temp.splice(i, 0, datum);\n      setData(trackno, temp);\n    }\n  };\n\n  const handleInfo = (title, children) => () => {\n    setState({ ...state, title, children });\n    focusWindow('#help-window');\n  };\n\n  const handleOutliers = () => setData(trackno, removeOutliers(tracks[trackno].data));\n\n  const handleRestore = () => {\n    setData(trackno, files.find(f => f.name === tracks[trackno].file).csv.map(row => isNaN(row[tracks[trackno].name]) ? row[tracks[trackno].name] : parseFloat(row[tracks[trackno].name])));\n    setState({ ...state, segment: '' });\n  };\n\n  const handleSegment = e => {\n    setData(trackno, chunkify(tracks[trackno].data, e.target.value));\n    setState({ ...state, segment: e.target.value });\n  };\n\n  return (\n    <>\n      <Window anchor={ anchor } title={ `${ tracks[trackno].name }: Sonification Settings` } width=\"50vw\">\n        <h5 className=\"font-weight-bold d-flex align-items-baseline\">\n          Connect to Channel&emsp;\n          <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" onClick={ handleInfo('Connect to Channel', channel) } />\n        </h5>\n        <div className=\"w-full\">\n          <button className=\"btn btn-square btn-primary m-5\" onClick={ handleAdd }>+</button>\n          { [...globalSettings.channels].map((_, i) => <button key={ `channel-${ i }` } className=\"btn btn-square m-5\" onClick={ handleChannel(i) }>{ i }</button>) }\n        </div>\n        {\n          tracks[trackno].settings.channel.length === 0 ? null : (\n            <>\n              <br />\n              <div className=\"w-full\">\n                <button className=\"btn btn-primary ml-5\" data-toggle=\"modal\" data-target={ `channel-${ tracks[trackno].name }-${ trackno }` } onClick={ () => focusWindow(`#channel-${ tracks[trackno].name }-${ trackno }`) }>Channel Settings</button>\n              </div>\n            </>\n          )\n        }\n        <br />\n        <hr />\n        <h5 className=\"font-weight-bold d-flex align-items-baseline\">Data Processing</h5>\n        <h6 className=\"font-weight-semi-bold d-flex align-items-baseline\">\n          Data Points&emsp;\n          <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" onClick={ handleInfo('Data Points', dataInfo) } />\n        </h6>\n        <div className=\"w-full overflow-scroll\">\n          <table className=\"table\">\n            <tbody>\n              <tr>\n                <th>{ tracks[trackno].name }</th>\n                { tracks[trackno].data.map((datum, i) => <td key={ `data-${ i }` } className=\"anchor sonification-data-point is-primary\" onClick={ handlePoint(datum, i) }>{ datum }</td>) }\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <br />\n        <div className=\"row\">\n          <div className=\"col-6\">\n            <button className=\"btn btn-primary\" onClick={ handleOutliers }>Remove Outliers</button>\n          </div>\n          <div className=\"col-6\">\n            <input className=\"form-control\" placeholder=\"Segmentation Size\" type=\"number\" min=\"1\" value={ state.segment } onChange={ handleSegment } />\n          </div>\n        </div>\n        <br />\n        <button className=\"btn btn-primary\" onClick={ handleRestore }>Restore Data</button>\n        <br />\n        {\n          tracks[trackno].settings.channel.length > 0 ? null : (\n            <>\n              <br />\n              <hr />\n              <h5 className=\"font-weight-bold d-flex align-items-baseline\">\n                { tracks[trackno].settings.continuous ? 'Continuous' : 'Discrete' }&emsp;\n                <i className=\"fa fa-question-circle anchor\" data-toggle=\"modal\" data-target=\"help-window\" />\n              </h5>\n              <div className=\"d-flex w-full justify-items-center align-items-center\">\n                <div className=\"custom-switch\">\n                  <input type=\"checkbox\" id={ `continuous-${ anchor }` } value={ tracks[trackno].settings.continuous } onChange={ handleContinuousOrDiscrete } />\n                  <label htmlFor={ `continuous-${ anchor }` } />\n                </div>\n              </div>\n            </>\n          )\n        }\n      </Window>\n      <Info title={ state.title }>\n        { state.children }\n      </Info>\n      <Channel anchor={ `channel-${ tracks[trackno].name.replace(/\\s/g, '-') }-${ trackno }` } title={ tracks[trackno].name } i={ trackno } />\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  tracks: state.tracks,\n  globalSettings: state.globalSettings,\n  files: state.files\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setSettings: (id, settings) => dispatch(setSettings(id, settings)),\n  setGlobalSettings: settings => dispatch(setGlobalSettings(settings)),\n  focusWindow: window => dispatch(focusWindow(window)),\n  setData: (id, data) => dispatch(setData(id, data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sonification);\n","import * as d3 from 'd3';\n\nexport const chunkify = (data, size) => {\n  const temp = [];\n  for (let i = 0; i < data.length - size; i += size) {\n    const subTemp = [];\n    for (let j = 0; j < size; j++) {\n      subTemp.push(data[i + j]);\n    }\n    temp.push(subTemp);\n  }\n  return temp;\n};\n\nexport const isNumerical = data => data.every(d => !isNaN(d));\n\nexport const scale = (data, type, max = 1, min = -1, center = 0) => {\n  if (!isNumerical(data)) {\n    return null;\n  }\n  return data.map(d => {\n    switch (type) {\n      case 'logistic':\n        return (max - min) / (1 + Math.E ** (-1 * (d - center))) - 1 + (max + min) / 2;\n      case 'tanh':\n        return (max - min) * Math.tanh(d - center) + (max + min) / 2;\n      case 'arctan':\n        return (max - min) * 2 / Math.PI * Math.atan(d - center) + (max + min) / 2;\n      case 'sign':\n        return (max - min) * Math.sign(d - center) + (max + min) / 2;\n      default:\n        return d;\n    }\n  });\n};\n\nexport const removeOutliers = data => {\n  const first = d3.quantile(data, 0.25);\n  const third = d3.quantile(data, 0.75);\n  const temp = [];\n  data.forEach(d => {\n    if (!(d < 1.5 * first || d > 1.5 * third)) {\n      temp.push(d);\n    }\n  });\n  return temp;\n};\n","import { SCALES } from '../constants/workstation';\nimport * as Tone from 'tone';\n\nconst osc = [];\nconst gain = [];\n\nexport const play = async (tracks, globalSettings) => {\n  const bpm = globalSettings.bpm < 0 ? 60 : globalSettings.bpm;\n  const key = globalSettings.key === 'none' ? 'chromatic' : globalSettings.key;\n\n  Tone.Transport.bpm.value = bpm;\n\n  const master = new Tone.Gain(1 / tracks.length).toDestination();\n\n  tracks.forEach(d => {\n    if (d.settings.channel.length === 0) {\n      const max = Math.max(...d.data);\n      const min = Math.min(...d.data);\n      const num = SCALES[key].length * 2;\n      const normalize = x => Math.round(num / (max - min) * (x - min));\n\n      gain.push(new Tone.Gain(d.settings.mute ? 0 : d.settings.volume / 100));\n\n      // TODO: More oscillator types\n      osc.push(new Tone.OmniOscillator(0, 'sine').connect(master));\n\n      osc[osc.length - 1].debug = true;\n\n      const melody = [];\n\n      d.data.forEach((datum, i) => {\n        const index = normalize(datum);\n        melody.push([`0:${ i }`, `${ SCALES[key][index % SCALES[key].length] }${ 4 + Math.floor(index / SCALES[key].length) }`]);\n      });\n\n      if (d.settings.continuous) {\n        melody.forEach(([time, note]) => {\n          osc[osc.length - 1].frequency.linearRampToValueAtTime(note, time);\n        });\n      } else {\n        melody.forEach(([time, note]) => {\n          osc[osc.length - 1].frequency.setValueAtTime(note, time);\n        });\n      }\n\n      osc[osc.length - 1].sync().start(0).stop(osc[osc.length - 1].toSeconds(melody[melody.length - 1][0]));\n    }\n  });\n\n  globalSettings.channels.forEach(c => {\n    console.log(c);\n  });\n\n  Tone.Transport.start();\n};\n\nexport const pause = () => Tone.Transport.pause();\n\nexport const stop = () => {\n  Tone.Transport.stop();\n};\n","import { connect } from 'react-redux';\nimport { setGlobalSettings } from '../../actions';\nimport { KEYS } from '../../constants/workstation';\nimport { play, pause, stop } from '../../synth/synth';\n\nconst Controls = ({ globalSettings, setGlobalSettings, tracks }) => {\n  const hasTracks = tracks.length !== 0;\n\n  const handleBPM = e => setGlobalSettings({ bpm: e.target.value.length === 0 ? 30 : parseInt(e.target.value) });\n\n  const handleKey = e => setGlobalSettings({ key: e.target.value });\n\n  const handleTimesig = top => e => setGlobalSettings({\n    timesig: top ? [e.target.value, globalSettings.timesig[1]] : Number.isInteger(Math.log(e.target.value) / Math.log(2)) ? [globalSettings.timesig[0], e.target.value] : [...globalSettings.timesig]\n  });\n\n  const handleBPMToggle = () => setGlobalSettings({ bpm: globalSettings.bpm > 0 ? -1 : 120 });\n\n  const handleTimesigToggle = () => setGlobalSettings({ timesig: globalSettings.timesig[0] > 0 ? [-1, -1] : [4, 4] });\n\n  const handlePlay = e => {\n    if (e.target.classList.contains('btn-danger')) {\n      e.target.classList.add('btn-success');\n      e.target.classList.remove('btn-danger');\n\n      stop();\n    } else if (e.target.classList.contains('btn-secondary')) {\n      e.target.classList.add('btn-danger');\n      e.target.classList.remove('btn-secondary');\n\n      pause();\n    } else {\n      e.target.classList.add('btn-danger'); // TODO: fix\n      e.target.classList.remove('btn-success');\n\n      const output = [];\n\n      tracks.forEach(t => {\n        if (t.settings.channel.length === 0) {\n          output.push(t);\n        } else {\n          // TODO: Do something\n        }\n      });\n\n      (async () => {\n        await play(output, globalSettings);\n      })();\n    }\n  };\n\n  return (\n    <nav className=\"navbar navbar-fixed-bottom controls\">\n      <div className=\"navbar-content w-full\">\n        <div className=\"row w-full\">\n          <div className=\"col-4\">\n            <div className=\"row h-full\">\n              <div className=\"col-6 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg\" data-toggle=\"dropdown\" type=\"button\" id=\"bpm-dropup\">\n                      <i className=\"fa fa-drum\"/>\n                      &emsp;BPM: <span className=\"text-monospace\">{ globalSettings.bpm < 0 ? 'N/A' : globalSettings.bpm }</span>\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"bpm-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group w-full\">\n                          <label htmlFor=\"bpm\">Set BPM</label>\n                          <br />\n                          <div className=\"custom-switch align-self-center\">\n                            <input type=\"checkbox\" id=\"bpm-toggle\" checked={ globalSettings.bpm > 0 } onChange={ handleBPMToggle } />\n                            <label htmlFor=\"bpm-toggle\" />\n                          </div>\n                          <br />\n                          <input type={ globalSettings.bpm < 0 ? 'text' : 'number' } className=\"form-control\" id=\"bpm\" min=\"30\" max=\"240\" value={ globalSettings.bpm < 0 ? 'N/A' : globalSettings.bpm } disabled={ globalSettings.bpm < 0 } placeholder=\"BPM\" onChange={ handleBPM } />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-6 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg\" data-toggle=\"dropdown\" type=\"button\" id=\"key-dropup\">\n                      <i className=\"fa fa-hashtag\"/>\n                      &emsp;Key: { <span dangerouslySetInnerHTML={ { __html: KEYS[globalSettings.key] } } /> }\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"key-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"key\">Set Key</label>\n                          <select className=\"form-control\" id=\"key\" onChange={ handleKey }>\n                            { Object.keys(KEYS).map(k => <option value={ k } key={ k } dangerouslySetInnerHTML={ { __html: KEYS[k] } } />) }\n                          </select>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"w-full d-flex justify-content-center\">\n              <button className=\"btn btn-square rounded-circle btn-success play font-size-24\" type=\"button\" disabled={ !hasTracks } onClick={ handlePlay }>\n                { /*<i className=\"fa fa-play\" />*/ }\n                { /* TODO: Toggle button color */ }\n              </button>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"row h-full\">\n              <div className=\"col-12 d-flex justify-content-center\">\n                <div className=\"h-full w-full d-flex justify-content-center\">\n                  <div className=\"dropdown dropup with-arrow align-self-center\">\n                    <button className=\"btn btn-lg d-flex align-items-center\" data-toggle=\"dropdown\" type=\"button\" id=\"timesig-dropup\">\n                      <i className=\"fa fa-stopwatch\"/>\n                      &emsp;Time Signature:&nbsp;\n                      <span className=\"supsub\">\n                        <sup>{ globalSettings.timesig[0] <= 0 ? 'N/A' : globalSettings.timesig[0] }</sup>\n                        <sub>{ globalSettings.timesig[1] <= 0 ? 'N/A' : globalSettings.timesig[1] }</sub>\n                      </span>\n                    </button>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"timesig-dropup\">\n                      <div className=\"container mt-15\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"timesig\">Set Time Signature</label>\n                          <br />\n                          <div className=\"custom-switch align-self-center\">\n                            <input type=\"checkbox\" id=\"timesig-toggle\" checked={ globalSettings.timesig[0] > 0 } onChange={ handleTimesigToggle } />\n                            <label htmlFor=\"timesig-toggle\"> </label>\n                          </div>\n                          <br />\n                          <input type=\"number\" className=\"form-control\" id=\"timesig\" min=\"1\" max=\"20\" placeholder={ globalSettings.timesig[0] <= 0 ? 'N/A' : globalSettings.timesig[0] } onChange={ handleTimesig(true) } />\n                          <input type=\"number\" className=\"form-control\" id=\"timesig-bottom\" min=\"1\" max=\"32\" placeholder={ globalSettings.timesig[1] <= 0 ? 'N/A' : globalSettings.timesig[1] } onChange={ handleTimesig(false) } />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nconst mapStateToProps = state => ({\n  globalSettings: state.globalSettings,\n  tracks: state.tracks\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setGlobalSettings: payload => dispatch(setGlobalSettings(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import { HashRouter, Route, Switch } from 'react-router-dom';\nimport Index from './components/Index';\nimport Workstation from './components/Workstation';\n\nconst App = () => {\n  return (\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\" component={ Index } />\n        <Route path=\"/workstation\" component={ Workstation } />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import {\n  UPLOAD_FILE,\n  ADD_TRACK,\n  SET_SETTINGS,\n  SET_GLOBAL_SETTINGS, FOCUS_WINDOW, DELETE_TRACK, INITIAL_STATE, INITIAL_SETTINGS, SET_DATA\n} from '../constants/state';\n\nconst rootReducer = (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case UPLOAD_FILE:\n      return Object.assign({}, state, {\n        files: [...state.files, action.payload]\n      });\n    case ADD_TRACK:\n      return Object.assign({}, state, {\n        tracks: [...state.tracks, { ...action.payload, settings: { ...INITIAL_SETTINGS }, id: state.tracks.length }],\n      });\n    case SET_SETTINGS:\n      return Object.assign({}, state, {\n        tracks: state.tracks.map(t => action.payload.id === t.id ? { ...t, settings: { ...t.settings, ...action.payload.settings } } : t)\n      });\n    case SET_GLOBAL_SETTINGS:\n      return Object.assign({}, state, {\n        globalSettings: { ...state.globalSettings, ...action.payload }\n      });\n    case FOCUS_WINDOW:\n      const focusIndex = state.windows.indexOf(action.payload);\n      if (focusIndex >= 0) {\n        return Object.assign({}, state, {\n          windows: [action.payload, ...state.windows.slice(0, focusIndex), ...state.windows.slice(focusIndex + 1, state.windows.length)]\n        });\n      }\n      return Object.assign({}, state, {\n        windows: [action.payload, ...state.windows]\n      });\n    case DELETE_TRACK:\n      let i = 0;\n      for (const t of state.tracks) {\n        if (action.payload === t.id) {\n          break;\n        }\n        i++;\n      }\n      return Object.assign({}, state, {\n        tracks: [...state.tracks.slice(0, i), ...state.tracks.slice(i + 1, state.tracks.length)],\n      });\n    case SET_DATA:\n      return Object.assign({}, state, {\n        tracks: state.tracks.map(t => {\n          if (t.id !== action.payload.id) {\n            return t;\n          }\n          return { ...t, data: action.payload.data };\n        })\n      });\n    default:\n      return state;\n  }\n};\n\nexport default rootReducer;\n","import { createStore } from '@reduxjs/toolkit';\nimport rootReducer from '../reducers/index';\n\nconst store = createStore(rootReducer);\n\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport store from './store';\r\nimport halfmoon from 'halfmoon';\r\nimport 'halfmoon/css/halfmoon-variables.min.css';\r\nimport './style.css';\r\n\r\nwindow.onload = () => halfmoon.onDOMContentLoaded();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={ store }>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}